!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=78)}([function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT,o=n(2),s=n(6),a=Math,u=t.exports=s(a);u.EPSILON=1e-9,u.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},u.assert=function(t){if(r&&!u.isFinite(t))throw i&&o.debug(t),new Error("Invalid Number!")},u.invSqrt=function(t){return 1/a.sqrt(t)},u.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},u.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},u.mod=function(t,e,n){return void 0===e?(n=1,e=0):void 0===n&&(n=e,e=0),n>e?(t=(t-e)%(n-e))+(t<0?n:e):(t=(t-n)%(e-n))+(t<=0?e:n)},u.clamp=function(t,e,n){return t<e?e:t>n?n:t},u.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:a.random()*(e-t)+t}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=n(2),s=n(0);function a(t,e){if(!(this instanceof a))return new a(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),r&&a.assert(this)}a.zero=function(){var t=Object.create(a.prototype);return t.x=0,t.y=0,t},a.neo=function(t,e){var n=Object.create(a.prototype);return n.x=t,n.y=e,n},a.clone=function(t){return r&&a.assert(t),a.neo(t.x,t.y)},a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)},a.assert=function(t){if(r&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid Vec2!")},a.prototype.clone=function(){return a.clone(this)},a.prototype.setZero=function(){return this.x=0,this.y=0,this},a.prototype.set=function(t,e){return"object"==typeof t?(r&&a.assert(t),this.x=t.x,this.y=t.y):(r&&s.assert(t),r&&s.assert(e),this.x=t,this.y=e),this},a.prototype.wSet=function(t,e,n,i){return void 0!==n||void 0!==i?this.setCombine(t,e,n,i):this.setMul(t,e)},a.prototype.setCombine=function(t,e,n,i){r&&s.assert(t),r&&a.assert(e),r&&s.assert(n),r&&a.assert(i);var o=t*e.x+n*i.x,u=t*e.y+n*i.y;return this.x=o,this.y=u,this},a.prototype.setMul=function(t,e){r&&s.assert(t),r&&a.assert(e);var n=t*e.x,i=t*e.y;return this.x=n,this.y=i,this},a.prototype.add=function(t){return r&&a.assert(t),this.x+=t.x,this.y+=t.y,this},a.prototype.wAdd=function(t,e,n,i){return void 0!==n||void 0!==i?this.addCombine(t,e,n,i):this.addMul(t,e)},a.prototype.addCombine=function(t,e,n,i){r&&s.assert(t),r&&a.assert(e),r&&s.assert(n),r&&a.assert(i);var o=t*e.x+n*i.x,u=t*e.y+n*i.y;return this.x+=o,this.y+=u,this},a.prototype.addMul=function(t,e){r&&s.assert(t),r&&a.assert(e);var n=t*e.x,i=t*e.y;return this.x+=n,this.y+=i,this},a.prototype.wSub=function(t,e,n,i){return void 0!==n||void 0!==i?this.subCombine(t,e,n,i):this.subMul(t,e)},a.prototype.subCombine=function(t,e,n,i){r&&s.assert(t),r&&a.assert(e),r&&s.assert(n),r&&a.assert(i);var o=t*e.x+n*i.x,u=t*e.y+n*i.y;return this.x-=o,this.y-=u,this},a.prototype.subMul=function(t,e){r&&s.assert(t),r&&a.assert(e);var n=t*e.x,i=t*e.y;return this.x-=n,this.y-=i,this},a.prototype.sub=function(t){return r&&a.assert(t),this.x-=t.x,this.y-=t.y,this},a.prototype.mul=function(t){return r&&s.assert(t),this.x*=t,this.y*=t,this},a.prototype.length=function(){return a.lengthOf(this)},a.prototype.lengthSquared=function(){return a.lengthSquared(this)},a.prototype.normalize=function(){var t=this.length();if(t<s.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},a.lengthOf=function(t){return r&&a.assert(t),s.sqrt(t.x*t.x+t.y*t.y)},a.lengthSquared=function(t){return r&&a.assert(t),t.x*t.x+t.y*t.y},a.distance=function(t,e){r&&a.assert(t),r&&a.assert(e);var n=t.x-e.x,i=t.y-e.y;return s.sqrt(n*n+i*i)},a.distanceSquared=function(t,e){r&&a.assert(t),r&&a.assert(e);var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},a.areEqual=function(t,e){return r&&a.assert(t),r&&a.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},a.skew=function(t){return r&&a.assert(t),a.neo(-t.y,t.x)},a.dot=function(t,e){return r&&a.assert(t),r&&a.assert(e),t.x*e.x+t.y*e.y},a.cross=function(t,e){return"number"==typeof e?(r&&a.assert(t),r&&s.assert(e),a.neo(e*t.y,-e*t.x)):"number"==typeof t?(r&&s.assert(t),r&&a.assert(e),a.neo(-t*e.y,t*e.x)):(r&&a.assert(t),r&&a.assert(e),t.x*e.y-t.y*e.x)},a.addCross=function(t,e,n){return"number"==typeof n?(r&&a.assert(e),r&&s.assert(n),a.neo(n*e.y+t.x,-n*e.x+t.y)):"number"==typeof e?(r&&s.assert(e),r&&a.assert(n),a.neo(-e*n.y+t.x,e*n.x+t.y)):void(r&&o.assert(!1))},a.add=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(t.x+e.x,t.y+e.y)},a.wAdd=function(t,e,n,i){return void 0!==n||void 0!==i?a.combine(t,e,n,i):a.mul(t,e)},a.combine=function(t,e,n,i){return a.zero().setCombine(t,e,n,i)},a.sub=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(t.x-e.x,t.y-e.y)},a.mul=function(t,e){return"object"==typeof t?(r&&a.assert(t),r&&s.assert(e),a.neo(t.x*e,t.y*e)):"object"==typeof e?(r&&s.assert(t),r&&a.assert(e),a.neo(t*e.x,t*e.y)):void 0},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},a.neg=function(t){return r&&a.assert(t),a.neo(-t.x,-t.y)},a.abs=function(t){return r&&a.assert(t),a.neo(s.abs(t.x),s.abs(t.y))},a.mid=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(.5*(t.x+e.x),.5*(t.y+e.y))},a.upper=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(s.max(t.x,e.x),s.max(t.y,e.y))},a.lower=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(s.min(t.x,e.x),s.min(t.y,e.y))},a.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var n=s.invSqrt(e);this.x*=n*t,this.y*=n*t}return this},a.clamp=function(t,e){return(t=a.neo(t.x,t.y)).clamp(e),t},a.scaleFn=function(t,e){return function(n){return a.neo(n.x*t,n.y*e)}},a.translateFn=function(t,e){return function(n){return a.neo(n.x+t,n.y+e)}}},function(t,e){var n="undefined"!=typeof DEBUG&&DEBUG,i="undefined"!=typeof ASSERT&&ASSERT;e.debug=function(){n&&console.log.apply(console,arguments)},e.assert=function(t,e,n){if(i&&!t)throw n&&console.log(n),new Error(e)}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=n(2),s=n(1),a=n(0);function u(t){if(!(this instanceof u))return new u(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}u.neo=function(t){var e=Object.create(u.prototype);return e.setAngle(t),e},u.clone=function(t){r&&u.assert(t);var e=Object.create(u.prototype);return e.s=t.s,e.c=t.c,e},u.identity=function(){var t=Object.create(u.prototype);return t.s=0,t.c=1,t},u.isValid=function(t){return t&&a.isFinite(t.s)&&a.isFinite(t.c)},u.assert=function(t){if(r&&!u.isValid(t))throw i&&o.debug(t),new Error("Invalid Rot!")},u.prototype.setIdentity=function(){this.s=0,this.c=1},u.prototype.set=function(t){"object"==typeof t?(r&&u.assert(t),this.s=t.s,this.c=t.c):(r&&a.assert(t),this.s=a.sin(t),this.c=a.cos(t))},u.prototype.setAngle=function(t){r&&a.assert(t),this.s=a.sin(t),this.c=a.cos(t)},u.prototype.getAngle=function(){return a.atan2(this.s,this.c)},u.prototype.getXAxis=function(){return s.neo(this.c,this.s)},u.prototype.getYAxis=function(){return s.neo(-this.s,this.c)},u.mul=function(t,e){if(r&&u.assert(t),"c"in e&&"s"in e){r&&u.assert(e);var n=u.identity();return n.s=t.s*e.c+t.c*e.s,n.c=t.c*e.c-t.s*e.s,n}if("x"in e&&"y"in e)return r&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},u.mulRot=function(t,e){r&&u.assert(t),r&&u.assert(e);var n=u.identity();return n.s=t.s*e.c+t.c*e.s,n.c=t.c*e.c-t.s*e.s,n},u.mulVec2=function(t,e){return r&&u.assert(t),r&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},u.mulSub=function(t,e,n){var i=t.c*(e.x-n.x)-t.s*(e.y-n.y),r=t.s*(e.x-n.y)+t.c*(e.y-n.y);return s.neo(i,r)},u.mulT=function(t,e){if("c"in e&&"s"in e){r&&u.assert(e);var n=u.identity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n}if("x"in e&&"y"in e)return r&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},u.mulTRot=function(t,e){r&&u.assert(e);var n=u.identity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n},u.mulTVec2=function(t,e){return r&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=n(2),s=n(1),a=n(3);function u(t,e){if(!(this instanceof u))return new u(t,e);this.p=s.zero(),this.q=a.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}u.clone=function(t){var e=Object.create(u.prototype);return e.p=s.clone(t.p),e.q=a.clone(t.q),e},u.neo=function(t,e){var n=Object.create(u.prototype);return n.p=s.clone(t),n.q=a.clone(e),n},u.identity=function(){var t=Object.create(u.prototype);return t.p=s.zero(),t.q=a.identity(),t},u.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},u.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},u.isValid=function(t){return t&&s.isValid(t.p)&&a.isValid(t.q)},u.assert=function(t){if(r&&!u.isValid(t))throw i&&o.debug(t),new Error("Invalid Transform!")},u.mul=function(t,e){if(r&&u.assert(t),Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)n[i]=u.mul(t,e[i]);return n}if("x"in e&&"y"in e){r&&s.assert(e);var o=t.q.c*e.x-t.q.s*e.y+t.p.x,c=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(o,c)}if("p"in e&&"q"in e){r&&u.assert(e);var h=u.identity();return h.q=a.mulRot(t.q,e.q),h.p=s.add(a.mulVec2(t.q,e.p),t.p),h}},u.mulAll=function(t,e){r&&u.assert(t);for(var n=[],i=0;i<e.length;i++)n[i]=u.mul(t,e[i]);return n},u.mulFn=function(t){return r&&u.assert(t),function(e){return u.mul(t,e)}},u.mulVec2=function(t,e){r&&u.assert(t),r&&s.assert(e);var n=t.q.c*e.x-t.q.s*e.y+t.p.x,i=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(n,i)},u.mulXf=function(t,e){r&&u.assert(t),r&&u.assert(e);var n=u.identity();return n.q=a.mulRot(t.q,e.q),n.p=s.add(a.mulVec2(t.q,e.p),t.p),n},u.mulT=function(t,e){if(r&&u.assert(t),"x"in e&&"y"in e){r&&s.assert(e);var n=e.x-t.p.x,i=e.y-t.p.y,o=t.q.c*n+t.q.s*i,c=-t.q.s*n+t.q.c*i;return s.neo(o,c)}if("p"in e&&"q"in e){r&&u.assert(e);var h=u.identity();return h.q.set(a.mulTRot(t.q,e.q)),h.p.set(a.mulTVec2(t.q,s.sub(e.p,t.p))),h}},u.mulTVec2=function(t,e){r&&u.assert(t),r&&s.assert(e);var n=e.x-t.p.x,i=e.y-t.p.y,o=t.q.c*n+t.q.s*i,a=-t.q.s*n+t.q.c*i;return s.neo(o,a)},u.mulTXf=function(t,e){r&&u.assert(t),r&&u.assert(e);var n=u.identity();return n.q.set(a.mulTRot(t.q,e.q)),n.p.set(a.mulTVec2(t.q,s.sub(e.p,t.p))),n}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var n=e;n.maxManifoldPoints=2,n.maxPolygonVertices=12,n.aabbExtension=.1,n.aabbMultiplier=2,n.linearSlop=.005,n.linearSlopSquared=n.linearSlop*n.linearSlop,n.angularSlop=2/180*Math.PI,n.polygonRadius=2*n.linearSlop,n.maxSubSteps=8,n.maxTOIContacts=32,n.maxTOIIterations=20,n.maxDistnceIterations=20,n.velocityThreshold=1,n.maxLinearCorrection=.2,n.maxAngularCorrection=8/180*Math.PI,n.maxTranslation=2,n.maxTranslationSquared=n.maxTranslation*n.maxTranslation,n.maxRotation=.5*Math.PI,n.maxRotationSquared=n.maxRotation*n.maxRotation,n.baumgarte=.2,n.toiBaugarte=.75,n.timeToSleep=.5,n.linearSleepTolerance=.01,n.linearSleepToleranceSqr=Math.pow(n.linearSleepTolerance,2),n.angularSleepTolerance=2/180*Math.PI,n.angularSleepToleranceSqr=Math.pow(n.angularSleepTolerance,2)},function(t,e){if("function"==typeof Object.create)t.exports=function(t,e){return Object.create.call(Object,t,e)};else{function n(){}t.exports=function(t,e){if(e)throw Error("Second argument is not supported!");if("object"!=typeof t||null===t)throw Error("Invalid prototype!");return n.prototype=t,new n}}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,Object.prototype.propertyIsEnumerable;t.exports=function(t,e){for(var n in null!==t&&void 0!==t||(t={}),e)e.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=e[n]);if("function"==typeof Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),r=0;r<i.length;r++){var o=i[r];e.propertyIsEnumerable(o)&&void 0===t[n]&&(t[o]=e[o])}return t}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=n(2),s=n(0);function a(t,e,n){if(!(this instanceof a))return new a(t,e,n);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=n),r&&a.assert(this)}a.neo=function(t,e,n){var i=Object.create(a.prototype);return i.x=t,i.y=e,i.z=n,i},a.clone=function(t){return r&&a.assert(t),a.neo(t.x,t.y,t.z)},a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)&&s.isFinite(t.z)},a.assert=function(t){if(r&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid Vec3!")},a.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},a.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},a.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},a.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},a.areEqual=function(t,e){return r&&a.assert(t),r&&a.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},a.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},a.cross=function(t,e){return new a(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},a.add=function(t,e){return new a(t.x+e.x,t.y+e.y,t.z+e.z)},a.sub=function(t,e){return new a(t.x-e.x,t.y-e.y,t.z-e.z)},a.mul=function(t,e){return new a(e*t.x,e*t.y,e*t.z)},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},a.neg=function(t){return new a(-t.x,-t.y,-t.z)}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=n(2),s=(n(0),n(1));function a(t,e,n,i){"object"==typeof t&&null!==t?(this.ex=s.clone(t),this.ey=s.clone(e)):"number"==typeof t?(this.ex=s.neo(t,n),this.ey=s.neo(e,i)):(this.ex=s.zero(),this.ey=s.zero())}a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isValid(t.ex)&&s.isValid(t.ey)},a.assert=function(t){if(r&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid Mat22!")},a.prototype.set=function(t,e,n,i){"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof i?(this.ex.set(t,n),this.ey.set(e,i)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(r&&a.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):r&&o.assert(!1)},a.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},a.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},a.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,n=this.ex.y,i=this.ey.y,r=t*i-e*n;0!=r&&(r=1/r);var o=new a;return o.ex.x=r*i,o.ey.x=-r*e,o.ex.y=-r*n,o.ey.y=r*t,o},a.prototype.solve=function(t){r&&s.assert(t);var e=this.ex.x,n=this.ey.x,i=this.ex.y,o=this.ey.y,a=e*o-n*i;0!=a&&(a=1/a);var u=s.zero();return u.x=a*(o*t.x-n*t.y),u.y=a*(e*t.y-i*t.x),u},a.mul=function(t,e){if(e&&"x"in e&&"y"in e){r&&s.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return s.neo(n,i)}if(e&&"ex"in e&&"ey"in e)return r&&a.assert(e),new a(s.mul(t,e.ex),s.mul(t,e.ey));r&&o.assert(!1)},a.mulVec2=function(t,e){r&&s.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return s.neo(n,i)},a.mulMat22=function(t,e){return r&&a.assert(e),new a(s.mul(t,e.ex),s.mul(t,e.ey))},a.mulT=function(t,e){return e&&"x"in e&&"y"in e?(r&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(r&&a.assert(e),new a(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))):void(r&&o.assert(!1))},a.mulTVec2=function(t,e){return r&&a.assert(t),r&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))},a.mulTMat22=function(t,e){return r&&a.assert(t),r&&a.assert(e),new a(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))},a.abs=function(t){return r&&a.assert(t),new a(s.abs(t.ex),s.abs(t.ey))},a.add=function(t,e){return r&&a.assert(t),r&&a.assert(e),new a(s.add(t.ex+e.ex),s.add(t.ey+e.ey))}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=c;var r=n(2),o=n(0),s=n(1),a=n(3),u=n(4);function c(t,e){i&&r.assert(void 0===t),i&&r.assert(void 0===e),this.localCenter=s.zero(),this.c=s.zero(),this.a=0,this.alpha0=0,this.c0=s.zero(),this.a0=0}c.prototype.setTransform=function(t){var e=u.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},c.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var n=u.mulVec2(e,this.localCenter);this.c.set(n),this.c0.set(n)},c.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(a.mulVec2(t.q,this.localCenter))},c.prototype.advance=function(t){i&&r.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},c.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},c.prototype.normalize=function(){var t=o.mod(this.a0,-o.PI,+o.PI);this.a-=this.a0-t,this.a0=t},c.prototype.clone=function(){var t=new c;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},c.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=n(2),s=(n(0),n(1)),a=n(8);function u(t,e,n){"object"==typeof t&&null!==t?(this.ex=a.clone(t),this.ey=a.clone(e),this.ez=a.clone(n)):(this.ex=a(),this.ey=a(),this.ez=a())}u.prototype.toString=function(){return JSON.stringify(this)},u.isValid=function(t){return t&&a.isValid(t.ex)&&a.isValid(t.ey)&&a.isValid(t.ez)},u.assert=function(t){if(r&&!u.isValid(t))throw i&&o.debug(t),new Error("Invalid Mat33!")},u.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},u.prototype.solve33=function(t){var e=a.dot(this.ex,a.cross(this.ey,this.ez));0!=e&&(e=1/e);var n=new a;return n.x=e*a.dot(t,a.cross(this.ey,this.ez)),n.y=e*a.dot(this.ex,a.cross(t,this.ez)),n.z=e*a.dot(this.ex,a.cross(this.ey,t)),n},u.prototype.solve22=function(t){var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o);var a=s.zero();return a.x=o*(r*t.x-n*t.y),a.y=o*(e*t.y-i*t.x),a},u.prototype.getInverse22=function(t){var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o),t.ex.x=o*r,t.ey.x=-o*n,t.ex.z=0,t.ex.y=-o*i,t.ey.y=o*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},u.prototype.getSymInverse33=function(t){var e=a.dot(this.ex,a.cross(this.ey,this.ez));0!=e&&(e=1/e);var n=this.ex.x,i=this.ey.x,r=this.ez.x,o=this.ey.y,s=this.ez.y,u=this.ez.z;t.ex.x=e*(o*u-s*s),t.ex.y=e*(r*s-i*u),t.ex.z=e*(i*s-r*o),t.ey.x=t.ex.y,t.ey.y=e*(n*u-r*r),t.ey.z=e*(r*i-n*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(n*o-i*i)},u.mul=function(t,e){if(r&&u.assert(t),e&&"z"in e&&"y"in e&&"x"in e){r&&a.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,i=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,c=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new a(n,i,c)}if(e&&"y"in e&&"x"in e){r&&s.assert(e);n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return s.neo(n,i)}r&&o.assert(!1)},u.mulVec3=function(t,e){r&&u.assert(t),r&&a.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,i=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,o=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new a(n,i,o)},u.mulVec2=function(t,e){r&&u.assert(t),r&&s.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return s.neo(n,i)},u.add=function(t,e){return r&&u.assert(t),r&&u.assert(e),new u(a.add(t.ex+e.ex),a.add(t.ey+e.ey),a.add(t.ez+e.ez))}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(){this.v=i.zero(),this.w=0};var i=n(1)},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=o;var i=n(1),r=n(3);function o(){this.c=i.zero(),this.a=0}o.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(i.sub(this.c,r.mulVec2(t.q,e))),t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=s;var r=n(2);function o(){this.other=null,this.joint=null,this.prev=null,this.next=null}function s(t,e,n){e=t.bodyA||e,n=t.bodyB||n,i&&r.assert(e),i&&r.assert(n),i&&r.assert(e!=n),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=n,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new o,this.m_edgeB=new o,this.m_islandFlag=!1,this.m_userData=t.userData}s.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},s.prototype.getType=function(){return this.m_type},s.prototype.getBodyA=function(){return this.m_bodyA},s.prototype.getBodyB=function(){return this.m_bodyB},s.prototype.getNext=function(){return this.m_next},s.prototype.getUserData=function(){return this.m_userData},s.prototype.setUserData=function(t){this.m_userData=t},s.prototype.getCollideConnected=function(){return this.m_collideConnected},s.prototype.getAnchorA=function(){},s.prototype.getAnchorB=function(){},s.prototype.getReactionForce=function(t){},s.prototype.getReactionTorque=function(t){},s.prototype.shiftOrigin=function(t){},s.prototype.initVelocityConstraints=function(t){},s.prototype.solveVelocityConstraints=function(t){},s.prototype.solvePositionConstraints=function(t){}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=i;n(0);function i(){this.m_type,this.m_radius}i.isValid=function(t){return!!t},i.prototype.getRadius=function(){return this.m_radius},i.prototype.getType=function(){return this.m_type},i.prototype._clone=function(){},i.prototype.getChildCount=function(){},i.prototype.testPoint=function(t,e){},i.prototype.rayCast=function(t,e,n,i){},i.prototype.computeAABB=function(t,e,n){},i.prototype.computeMass=function(t,e){},i.prototype.computeDistanceProxy=function(t){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapApplyWithContext=e.ensureArray=e.flatten=e.NoopFunc=void 0;var i=n(19),r=e.NoopFunc=function(){};e.flatten=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},e.ensureArray=function(t){return t?(0,i.isArray)(t)?t:[t]:[]},e.wrapApplyWithContext=function(t,e){return(0,i.isFunction)(t)?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(e,i)}:r}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT,o=(n(5),n(0)),s=n(1);function a(t,e){if(!(this instanceof a))return new a(t,e);this.lowerBound=s.zero(),this.upperBound=s.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e&&this.upperBound.set(e)}t.exports=a,a.prototype.isValid=function(){return a.isValid(this)},a.isValid=function(t){var e=s.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&s.isValid(t.lowerBound)&&s.isValid(t.upperBound)},a.assert=function(t){if(r&&!a.isValid(t))throw i&&common.debug(t),new Error("Invalid AABB!")},a.prototype.getCenter=function(){return s.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},a.prototype.getExtents=function(){return s.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},a.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},a.prototype.combine=function(t,e){var n=t.lowerBound,i=t.upperBound,r=e.lowerBound,s=e.upperBound,a=o.min(n.x,r.x),u=o.min(n.y,r.y),c=o.max(s.x,i.x),h=o.max(s.y,i.y);this.lowerBound.set(a,u),this.upperBound.set(c,h)},a.prototype.combinePoints=function(t,e){this.lowerBound.set(o.min(t.x,e.x),o.min(t.y,e.y)),this.upperBound.set(o.max(t.x,e.x),o.max(t.y,e.y))},a.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},a.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},a.prototype.extend=function(t){a.extend(this,t)},a.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},a.testOverlap=function(t,e){var n=e.lowerBound.x-t.upperBound.x,i=t.lowerBound.x-e.upperBound.x,r=e.lowerBound.y-t.upperBound.y,o=t.lowerBound.y-e.upperBound.y;return!(n>0||r>0||i>0||o>0)},a.areEqual=function(t,e){return s.areEqual(t.lowerBound,e.lowerBound)&&s.areEqual(t.upperBound,e.upperBound)},a.diff=function(t,e){var n=o.max(0,o.min(t.upperBound.x,e.upperBound.x)-o.max(e.lowerBound.x,t.lowerBound.x)),i=o.max(0,o.min(t.upperBound.y,e.upperBound.y)-o.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-n*i},a.prototype.rayCast=function(t,e){for(var n=-1/0,i=1/0,r=e.p1,a=s.sub(e.p2,e.p1),u=s.abs(a),c=s.zero(),h="x";null!==h;h="x"===h?"y":null)if(u.x<o.EPSILON){if(r[h]<this.lowerBound[h]||this.upperBound[h]<r[h])return!1}else{var l=1/a[h],f=(this.lowerBound[h]-r[h])*l,p=(this.upperBound[h]-r[h])*l,m=-1;if(f>p){var _=f;f=p,p=_,m=1}if(f>n&&(c.setZero(),c[h]=m,n=f),n>(i=o.min(i,p)))return!1}return!(n<0||e.maxFraction<n)&&(t.fraction=n,t.normal=c,!0)},a.prototype.toString=function(){return JSON.stringify(this)}},function(t,e,n){(function(t,i){var r=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),u=i[n];n<o;u=i[++n])_(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,r){if(v(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(!0===i.noDeprecation)return n;var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),h(i,t,i.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function h(t,n,i){if(t.customInspect&&n&&w(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=h(t,r,i)),r}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(d(e))return t.stylize(""+e,"number");if(m(e))return t.stylize(""+e,"boolean");if(_(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),A(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(w(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(g(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return l(n)}var c,b="",B=!1,C=["{","}"];(p(n)&&(B=!0,C=["[","]"]),w(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),A(n)&&(b=" "+l(n)),0!==s.length||B&&0!=n.length?i<0?g(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=B?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)E(e,String(s))?o.push(f(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}(t,n,i,a,s):s.map(function(e){return f(t,n,i,a,e,B)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,C)):C[0]+b+C[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,i,r,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),E(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(u.value)<0?(a=_(n)?h(t,u.value,null):h(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function _(t){return null===t}function d(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function g(t){return b(t)&&"[object RegExp]"===B(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===B(t)}function A(t){return b(t)&&("[object Error]"===B(t)||t instanceof Error)}function w(t){return"function"==typeof t}function B(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(o)&&(o=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=i.pid;s[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=m,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=d,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=g,e.isObject=b,e.isDate=x,e.isError=A,e.isFunction=w,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(80);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),S[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(81),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,n(14),n(29))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.io=e.Vec2=e.coordsToVec2=e.Vec2ToCoords=e.p5VecToVec2=e.pixelToWorld=e.worldToPixel=e.Config=e.Camera=e.Parallax=e.PlatformLoader=e.CanvasUtils=e.HOC=e.Constants=e.beforeRender=e.Entities=e.Sprites=e.Scheduler=e.TouchEvents=e.KeyboardEvents=e.MouseEvents=e.compose=e.withController=e.scene=void 0;var i=n(51);Object.defineProperty(e,"scene",{enumerable:!0,get:function(){return i.scene}});var r=n(79);Object.defineProperty(e,"withController",{enumerable:!0,get:function(){return r.addController}});var o=n(23);Object.defineProperty(e,"compose",{enumerable:!0,get:function(){return o.compose}});var s=n(30);Object.defineProperty(e,"MouseEvents",{enumerable:!0,get:function(){return s.MouseEvents}}),Object.defineProperty(e,"KeyboardEvents",{enumerable:!0,get:function(){return s.KeyboardEvents}}),Object.defineProperty(e,"TouchEvents",{enumerable:!0,get:function(){return s.TouchEvents}});var a=n(54);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return k(a).default}});var u=n(108);Object.defineProperty(e,"Sprites",{enumerable:!0,get:function(){return u.Sprites}});var c=n(65);Object.defineProperty(e,"Entities",{enumerable:!0,get:function(){return k(c).default}}),Object.defineProperty(e,"beforeRender",{enumerable:!0,get:function(){return r.beforeRender}});var h=n(28);Object.defineProperty(e,"Constants",{enumerable:!0,get:function(){return k(h).default}});var l=n(23);Object.defineProperty(e,"HOC",{enumerable:!0,get:function(){return l.wrapperCreator}});var f=n(45);Object.defineProperty(e,"CanvasUtils",{enumerable:!0,get:function(){return k(f).default}});var p=n(35);Object.defineProperty(e,"PlatformLoader",{enumerable:!0,get:function(){return p.PlatformLoader}});var m=n(110);Object.defineProperty(e,"Parallax",{enumerable:!0,get:function(){return m.Parallax}});var _=n(111);Object.defineProperty(e,"Config",{enumerable:!0,get:function(){return _.Config}});var d=n(31);Object.defineProperty(e,"worldToPixel",{enumerable:!0,get:function(){return d.worldToPixel}}),Object.defineProperty(e,"pixelToWorld",{enumerable:!0,get:function(){return d.pixelToWorld}}),Object.defineProperty(e,"p5VecToVec2",{enumerable:!0,get:function(){return d.p5VecToVec2}}),Object.defineProperty(e,"Vec2ToCoords",{enumerable:!0,get:function(){return d.Vec2ToCoords}}),Object.defineProperty(e,"coordsToVec2",{enumerable:!0,get:function(){return d.coordsToVec2}}),Object.defineProperty(e,"Vec2",{enumerable:!0,get:function(){return d.Vec2}});var y=k(n(62)),v=k(n(112)),g=k(n(36)),b=k(n(113)),x=k(n(114)),A=n(116),w=n(143),B=k(n(144)),C=n(145),S=n(146),E=n(147),M=n(148),T=k(n(151)),P=n(154);function k(t){return t&&t.__esModule?t:{default:t}}var I=e.Camera=(0,E.createCamera)(),R={Renderer:v.default,Controller:r.Controller,Entity:g.default,HOC:{FollowMouse:C.FollowMouse,DynamicBackground:S.DynamicBackground},with:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.assets,i=void 0===n?{}:n,r=e.scene,o=e.layers,s=void 0===o?{}:o,a=function(){var n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).socket;new y.default(function(o){var a=new v.default(o,r);a.addToPreload(function(t){b.default.handleAssetLoading(i,o,t)}),(0,M.addonsLoader)(t,e);var u=a.lm;(0,w.LayerFacade)(u)(s),I.setOffset({x:a.scene.width/2,y:a.scene.height/2}),(new B.default).run(u),new T.default({controllers:t,p5:o,renderer:a,socket:n,options:e}).run(),x.default.frameworkInitMessage()})},u={withIO:function(){var t=(0,A.socketConnect)();return u.ioConnect=new Promise(function(e){t.on("connect",function(){e(t)})}),u},init:function(){u.ioConnect?u.ioConnect.then(function(t){a({socket:t})}):a()}};return u}};e.io={connection:P.newConnection};e.default=R},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(2),o=n(0),s=n(1),a=n(4),u=n(9),c=n(3),h=n(5),l=n(22),f=n(32);function p(t){this.contact=t,this.prev,this.next,this.other}function m(t,e,n,i,r){this.m_nodeA=new p(this),this.m_nodeB=new p(this),this.m_fixtureA=t,this.m_fixtureB=n,this.m_indexA=e,this.m_indexB=i,this.m_evaluateFcn=r,this.m_manifold=new l,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=d(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=y(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=s.zero(),this.v_normalMass=new u,this.v_K=new u,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=s.zero(),this.p_localPoint=s.zero(),this.p_localCenterA=s.zero(),this.p_localCenterB=s.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function _(){this.rA=s.zero(),this.rB=s.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function d(t,e){return o.sqrt(t*e)}function y(t,e){return t>e?t:e}t.exports=m,m.prototype.initConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,o=e.getShape(),a=n.getShape(),u=e.getBody(),c=n.getBody(),h=this.getManifold(),l=h.pointCount;i&&r.assert(l>0),this.v_invMassA=u.m_invMass,this.v_invMassB=c.m_invMass,this.v_invIA=u.m_invI,this.v_invIB=c.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=u.m_invMass,this.p_invMassB=c.m_invMass,this.p_invIA=u.m_invI,this.p_invIB=c.m_invI,this.p_localCenterA=s.clone(u.m_sweep.localCenter),this.p_localCenterB=s.clone(c.m_sweep.localCenter),this.p_radiusA=o.m_radius,this.p_radiusB=a.m_radius,this.p_type=h.type,this.p_localNormal=s.clone(h.localNormal),this.p_localPoint=s.clone(h.localPoint),this.p_pointCount=l;for(var f=0;f<l;++f){var p=h.points[f],m=this.v_points[f]=new _;t.warmStarting?(m.normalImpulse=t.dtRatio*p.normalImpulse,m.tangentImpulse=t.dtRatio*p.tangentImpulse):(m.normalImpulse=0,m.tangentImpulse=0),m.rA.setZero(),m.rB.setZero(),m.normalMass=0,m.tangentMass=0,m.velocityBias=0,this.p_localPoints[f]=s.clone(p.localPoint)}},m.prototype.getManifold=function(){return this.m_manifold},m.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),n=this.m_fixtureB.getBody(),i=this.m_fixtureA.getShape(),r=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),i.m_radius,n.getTransform(),r.m_radius)},m.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},m.prototype.isEnabled=function(){return this.m_enabledFlag},m.prototype.isTouching=function(){return this.m_touchingFlag},m.prototype.getNext=function(){return this.m_next},m.prototype.getFixtureA=function(){return this.m_fixtureA},m.prototype.getFixtureB=function(){return this.m_fixtureB},m.prototype.getChildIndexA=function(){return this.m_indexA},m.prototype.getChildIndexB=function(){return this.m_indexB},m.prototype.flagForFiltering=function(){this.m_filterFlag=!0},m.prototype.setFriction=function(t){this.m_friction=t},m.prototype.getFriction=function(){return this.m_friction},m.prototype.resetFriction=function(){this.m_friction=d(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},m.prototype.setRestitution=function(t){this.m_restitution=t},m.prototype.getRestitution=function(){return this.m_restitution},m.prototype.resetRestitution=function(){this.m_restitution=y(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},m.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},m.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},m.prototype.evaluate=function(t,e,n){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,n,this.m_fixtureB,this.m_indexB)},m.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,n=this.m_touchingFlag,i=this.m_fixtureA.isSensor(),r=this.m_fixtureB.isSensor(),o=i||r,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),u=s.getTransform(),c=a.getTransform();if(o){var h=this.m_fixtureA.getShape(),p=this.m_fixtureB.getShape();e=f.testOverlap(h,this.m_indexA,p,this.m_indexB,u,c),this.m_manifold.pointCount=0}else{var m=this.m_manifold;this.m_manifold=new l,this.evaluate(this.m_manifold,u,c),e=this.m_manifold.pointCount>0;for(var _=0;_<this.m_manifold.pointCount;++_){var d=this.m_manifold.points[_];d.normalImpulse=0,d.tangentImpulse=0;for(var y=0;y<m.pointCount;++y){var v=m.points[y];if(v.id.key==d.id.key){d.normalImpulse=v.normalImpulse,d.tangentImpulse=v.tangentImpulse;break}}}e!=n&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==n&&1==e&&t&&t.beginContact(this),1==n&&0==e&&t&&t.endContact(this),0==o&&e&&t&&t.preSolve(this,m)},m.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},m.prototype.solvePositionConstraintTOI=function(t,e,n){return this._solvePositionConstraint(t,!0,e,n)},m.prototype._solvePositionConstraint=function(t,e,n,i){var r=this.m_fixtureA,u=this.m_fixtureB,f=r.getBody(),p=u.getBody(),m=(f.c_velocity,p.c_velocity,f.c_position),_=p.c_position,d=s.clone(this.p_localCenterA),y=s.clone(this.p_localCenterB),v=0,g=0;e&&f!=n&&f!=i||(v=this.p_invMassA,g=this.p_invIA);var b=0,x=0;e&&p!=n&&p!=i||(b=this.p_invMassB,x=this.p_invIB);for(var A=s.clone(m.c),w=m.a,B=s.clone(_.c),C=_.a,S=0,E=0;E<this.p_pointCount;++E){var M,T,P,k=a.identity(),I=a.identity();switch(k.q.set(w),I.q.set(C),k.p=s.sub(A,c.mulVec2(k.q,d)),I.p=s.sub(B,c.mulVec2(I.q,y)),this.p_type){case l.e_circles:var R=a.mulVec2(k,this.p_localPoint),O=a.mulVec2(I,this.p_localPoints[0]);(M=s.sub(O,R)).normalize(),T=s.combine(.5,R,.5,O),P=s.dot(s.sub(O,R),M)-this.p_radiusA-this.p_radiusB;break;case l.e_faceA:M=c.mulVec2(k.q,this.p_localNormal);var F=a.mulVec2(k,this.p_localPoint),z=a.mulVec2(I,this.p_localPoints[E]);P=s.dot(s.sub(z,F),M)-this.p_radiusA-this.p_radiusB,T=z;break;case l.e_faceB:M=c.mulVec2(I.q,this.p_localNormal);F=a.mulVec2(I,this.p_localPoint),z=a.mulVec2(k,this.p_localPoints[E]);P=s.dot(s.sub(z,F),M)-this.p_radiusA-this.p_radiusB,T=z,M.mul(-1)}var j=s.sub(T,A),D=s.sub(T,B);S=o.min(S,P);var L=e?h.toiBaugarte:h.baumgarte,V=h.linearSlop,q=h.maxLinearCorrection,U=o.clamp(L*(P+V),-q,0),N=s.cross(j,M),Y=s.cross(D,M),W=v+b+g*N*N+x*Y*Y,G=W>0?-U/W:0,H=s.mul(G,M);A.subMul(v,H),w-=g*s.cross(j,H),B.addMul(b,H),C+=x*s.cross(D,H)}return m.c.set(A),m.a=w,_.c.set(B),_.a=C,S},m.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,o=e.getBody(),u=n.getBody(),l=o.c_velocity,f=u.c_velocity,p=o.c_position,m=u.c_position,_=this.p_radiusA,d=this.p_radiusB,y=this.getManifold(),v=this.v_invMassA,g=this.v_invMassB,b=this.v_invIA,x=this.v_invIB,A=s.clone(this.p_localCenterA),w=s.clone(this.p_localCenterB),B=s.clone(p.c),C=p.a,S=s.clone(l.v),E=l.w,M=s.clone(m.c),T=m.a,P=s.clone(f.v),k=f.w;i&&r.assert(y.pointCount>0);var I=a.identity(),R=a.identity();I.q.set(C),R.q.set(T),I.p.setCombine(1,B,-1,c.mulVec2(I.q,A)),R.p.setCombine(1,M,-1,c.mulVec2(R.q,w));var O=y.getWorldManifold(null,I,_,R,d);this.v_normal.set(O.normal);for(var F=0;F<this.v_pointCount;++F){var z=this.v_points[F];z.rA.set(s.sub(O.points[F],B)),z.rB.set(s.sub(O.points[F],M));var j=s.cross(z.rA,this.v_normal),D=s.cross(z.rB,this.v_normal),L=v+g+b*j*j+x*D*D;z.normalMass=L>0?1/L:0;var V=s.cross(this.v_normal,1),q=s.cross(z.rA,V),U=s.cross(z.rB,V),N=v+g+b*q*q+x*U*U;z.tangentMass=N>0?1/N:0,z.velocityBias=0;var Y=s.dot(this.v_normal,P)+s.dot(this.v_normal,s.cross(k,z.rB))-s.dot(this.v_normal,S)-s.dot(this.v_normal,s.cross(E,z.rA));Y<-h.velocityThreshold&&(z.velocityBias=-this.v_restitution*Y)}if(2==this.v_pointCount&&t.blockSolve){var W=this.v_points[0],G=this.v_points[1],H=s.cross(W.rA,this.v_normal),J=s.cross(W.rB,this.v_normal),X=s.cross(G.rA,this.v_normal),Z=s.cross(G.rB,this.v_normal),K=v+g+b*H*H+x*J*J,$=v+g+b*X*X+x*Z*Z,Q=v+g+b*H*X+x*J*Z;K*K<1e3*(K*$-Q*Q)?(this.v_K.ex.set(K,Q),this.v_K.ey.set(Q,$),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}p.c.set(B),p.a=C,l.v.set(S),l.w=E,m.c.set(M),m.a=T,f.v.set(P),f.w=k},m.prototype.warmStartConstraint=function(t){for(var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getBody(),r=n.getBody(),o=i.c_velocity,a=r.c_velocity,u=(i.c_position,r.c_position,this.v_invMassA),c=this.v_invIA,h=this.v_invMassB,l=this.v_invIB,f=s.clone(o.v),p=o.w,m=s.clone(a.v),_=a.w,d=this.v_normal,y=s.cross(d,1),v=0;v<this.v_pointCount;++v){var g=this.v_points[v],b=s.combine(g.normalImpulse,d,g.tangentImpulse,y);p-=c*s.cross(g.rA,b),f.subMul(u,b),_+=l*s.cross(g.rB,b),m.addMul(h,b)}o.v.set(f),o.w=p,a.v.set(m),a.w=_},m.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,n=0;n<this.v_pointCount;++n)e.points[n].normalImpulse=this.v_points[n].normalImpulse,e.points[n].tangentImpulse=this.v_points[n].tangentImpulse},m.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body,a=e.c_velocity,c=(e.c_position,n.c_velocity),h=(n.c_position,this.v_invMassA),l=this.v_invIA,f=this.v_invMassB,p=this.v_invIB,m=s.clone(a.v),_=a.w,d=s.clone(c.v),y=c.w,v=this.v_normal,g=s.cross(v,1),b=this.v_friction;i&&r.assert(1==this.v_pointCount||2==this.v_pointCount);for(var x=0;x<this.v_pointCount;++x){var A=this.v_points[x];(M=s.zero()).addCombine(1,d,1,s.cross(y,A.rB)),M.subCombine(1,m,1,s.cross(_,A.rA));var w=s.dot(M,g)-this.v_tangentSpeed,B=A.tangentMass*-w,C=b*A.normalImpulse;B=(T=o.clamp(A.tangentImpulse+B,-C,C))-A.tangentImpulse,A.tangentImpulse=T;var S=s.mul(B,g);m.subMul(h,S),_-=l*s.cross(A.rA,S),d.addMul(f,S),y+=p*s.cross(A.rB,S)}if(1==this.v_pointCount||0==t.blockSolve)for(var E=0;E<this.v_pointCount;++E){var M;A=this.v_points[E];(M=s.zero()).addCombine(1,d,1,s.cross(y,A.rB)),M.subCombine(1,m,1,s.cross(_,A.rA));var T,P=s.dot(M,v);B=-A.normalMass*(P-A.velocityBias);B=(T=o.max(A.normalImpulse+B,0))-A.normalImpulse,A.normalImpulse=T;S=s.mul(B,v);m.subMul(h,S),_-=l*s.cross(A.rA,S),d.addMul(f,S),y+=p*s.cross(A.rB,S)}else{var k=this.v_points[0],I=this.v_points[1],R=s.neo(k.normalImpulse,I.normalImpulse);i&&r.assert(R.x>=0&&R.y>=0);var O=s.zero().add(d).add(s.cross(y,k.rB)).sub(m).sub(s.cross(_,k.rA)),F=s.zero().add(d).add(s.cross(y,I.rB)).sub(m).sub(s.cross(_,I.rA)),z=s.dot(O,v),j=s.dot(F,v),D=s.neo(z-k.velocityBias,j-I.velocityBias);D.sub(u.mulVec2(this.v_K,R));for(;;){var L=u.mulVec2(this.v_normalMass,D).neg();if(L.x>=0&&L.y>=0){var V=s.sub(L,R),q=s.mul(V.x,v),U=s.mul(V.y,v);m.subCombine(h,q,h,U),_-=l*(s.cross(k.rA,q)+s.cross(I.rA,U)),d.addCombine(f,q,f,U),y+=p*(s.cross(k.rB,q)+s.cross(I.rB,U)),k.normalImpulse=L.x,I.normalImpulse=L.y;break}if(L.x=-k.normalMass*D.x,L.y=0,z=0,j=this.v_K.ex.y*L.x+D.y,L.x>=0&&j>=0){V=s.sub(L,R),q=s.mul(V.x,v),U=s.mul(V.y,v);m.subCombine(h,q,h,U),_-=l*(s.cross(k.rA,q)+s.cross(I.rA,U)),d.addCombine(f,q,f,U),y+=p*(s.cross(k.rB,q)+s.cross(I.rB,U)),k.normalImpulse=L.x,I.normalImpulse=L.y;break}if(L.x=0,L.y=-I.normalMass*D.y,z=this.v_K.ey.x*L.y+D.x,j=0,L.y>=0&&z>=0){V=s.sub(L,R),q=s.mul(V.x,v),U=s.mul(V.y,v);m.subCombine(h,q,h,U),_-=l*(s.cross(k.rA,q)+s.cross(I.rA,U)),d.addCombine(f,q,f,U),y+=p*(s.cross(k.rB,q)+s.cross(I.rB,U)),k.normalImpulse=L.x,I.normalImpulse=L.y;break}if(L.x=0,L.y=0,z=D.x,j=D.y,z>=0&&j>=0){V=s.sub(L,R),q=s.mul(V.x,v),U=s.mul(V.y,v);m.subCombine(h,q,h,U),_-=l*(s.cross(k.rA,q)+s.cross(I.rA,U)),d.addCombine(f,q,f,U),y+=p*(s.cross(k.rB,q)+s.cross(I.rB,U)),k.normalImpulse=L.x,I.normalImpulse=L.y;break}break}}a.v.set(m),a.w=_,c.v.set(d),c.w=y};var v=[];m.addType=function(t,e,n){v[t]=v[t]||{},v[t][e]=n},m.create=function(t,e,n,i){var r,o,s=t.getType(),a=n.getType();if(o=v[s]&&v[s][a])r=new m(t,e,n,i,o);else{if(!(o=v[a]&&v[a][s]))return null;r=new m(n,i,t,e,o)}t=r.getFixtureA(),n=r.getFixtureB(),e=r.getChildIndexA(),i=r.getChildIndexB();var u=t.getBody(),c=n.getBody();return r.m_nodeA.contact=r,r.m_nodeA.other=c,r.m_nodeA.prev=null,r.m_nodeA.next=u.m_contactList,null!=u.m_contactList&&(u.m_contactList.prev=r.m_nodeA),u.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=u,r.m_nodeB.prev=null,r.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=r.m_nodeB),c.m_contactList=r.m_nodeB,0==t.isSensor()&&0==n.isSensor()&&(u.setAwake(!0),c.setAwake(!0)),r},m.destroy=function(t,e){var n=t.m_fixtureA,i=t.m_fixtureB,r=n.getBody(),o=i.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==r.m_contactList&&(r.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==n.isSensor()&&0==i.isSensor()&&(r.setAwake(!0),o.setAwake(!0));var s=n.getType(),a=i.getType(),u=v[s][a].destroyFcn;"function"==typeof u&&u(t)}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,n(2);var i=n(1),r=n(4),o=n(0),s=n(3);function a(){this.type,this.localNormal=i.zero(),this.localPoint=i.zero(),this.points=[new u,new u],this.pointCount=0}function u(){this.localPoint=i.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new c}function c(){this.cf=new h}function h(){this.indexA,this.indexB,this.typeA,this.typeB}t.exports=a,t.exports.clipSegmentToLine=function(t,e,n,r,o){var s=0,u=i.dot(n,e[0].v)-r,c=i.dot(n,e[1].v)-r;u<=0&&t[s++].set(e[0]);c<=0&&t[s++].set(e[1]);if(u*c<0){var h=u/(u-c);t[s].v.setCombine(1-h,e[0].v,h,e[1].v),t[s].id.cf.indexA=o,t[s].id.cf.indexB=e[0].id.cf.indexB,t[s].id.cf.typeA=a.e_vertex,t[s].id.cf.typeB=a.e_face,++s}return s},t.exports.clipVertex=f,t.exports.getPointStates=function(t,e,n,i){for(var r=0;r<n.pointCount;++r){var o=n.points[r].id;t[r]=l.removeState;for(var s=0;s<i.pointCount;++s)if(i.points[s].id.key==o.key){t[r]=l.persistState;break}}for(var r=0;r<i.pointCount;++r){var o=i.points[r].id;e[r]=l.addState;for(var s=0;s<n.pointCount;++s)if(n.points[s].id.key==o.key){e[r]=l.persistState;break}}},t.exports.PointState=l,a.e_circles=0,a.e_faceA=1,a.e_faceB=2,a.e_vertex=0,a.e_face=1,Object.defineProperty(c.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),c.prototype.set=function(t){this.cf.set(t.cf)},h.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},a.prototype.getWorldManifold=function(t,e,n,u,c){if(0!=this.pointCount){var h=(t=t||new function(){this.normal,this.points=[],this.separations=[]}).normal,l=t.points,f=t.separations;switch(this.type){case a.e_circles:h=i.neo(1,0);var p=r.mulVec2(e,this.localPoint),m=r.mulVec2(u,this.points[0].localPoint),_=i.sub(m,p);i.lengthSquared(_)>o.EPSILON*o.EPSILON&&(h.set(_),h.normalize()),l[0]=i.mid(p,m),f[0]=-c-n,l.length=1,f.length=1;break;case a.e_faceA:h=s.mulVec2(e.q,this.localNormal);for(var d=r.mulVec2(e,this.localPoint),y=0;y<this.pointCount;++y){var v=r.mulVec2(u,this.points[y].localPoint),g=i.clone(v).addMul(n-i.dot(i.sub(v,d),h),h),b=i.clone(v).subMul(c,h);l[y]=i.mid(g,b),f[y]=i.dot(i.sub(b,g),h)}l.length=this.pointCount,f.length=this.pointCount;break;case a.e_faceB:h=s.mulVec2(u.q,this.localNormal);for(d=r.mulVec2(u,this.localPoint),y=0;y<this.pointCount;++y){v=r.mulVec2(e,this.points[y].localPoint),b=i.combine(1,v,c-i.dot(i.sub(v,d),h),h),g=i.combine(1,v,-n,h);l[y]=i.mid(g,b),f[y]=i.dot(i.sub(g,b),h)}l.length=this.pointCount,f.length=this.pointCount,h.mul(-1)}return t.normal=h,t.points=l,t.separations=f,t}};var l={nullState:0,addState:1,persistState:2,removeState:3};function f(){this.v=i.zero(),this.id=new c}f.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compose=e.wrapperCreator=void 0;var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=n(17),o=n(63);e.wrapperCreator=function(t){var e=t.setup,n=void 0===e?r.NoopFunc:e,o=t.beforeRender,s=void 0===o?r.NoopFunc:o;return function(t,e){return function(o){var a=t(o,i({},e)),u=a.items,c=a.hooks,h=i({p5:o.p5,gl:o.gl},e,{items:u});return n.call(h,o),c.addToBeforeRender((0,r.wrapApplyWithContext)(s,h)),{items:u,hooks:c}}}},e.compose=function(t){return function(e){var n={},s=function(t){n=i({},n,t)},a=function(){return i({},n)};return t.reduce(function(t,e){return e(t,{setState:s,getState:a})},function(){return{items:(0,r.ensureArray)(e.apply(void 0,arguments)),hooks:new o.Hooks}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(17),o=n(35);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a="_fr_default_layer",u=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.layers=[a],this.items=s({},a,[]),this.config=s({},a,{}),this.updateCallback=r.NoopFunc}return i(t,[{key:"onUpdate",value:function(t){this.updateCallback=t}},{key:"addLayer",value:function(t){var e=t.layerName,n=t.layerConfig,i=t.parentLayer;if(-1!==this.layers.indexOf(e))throw new Error('Layer "'+e+'" already exists.');if(i){var r=this.layers.indexOf(i);-1!==r&&this.layers.splice(r+1,0,e)}else this.layers.push(e);this.items[e]=[],this.config[e]=n}},{key:"runConfigs",value:function(t){this.visitLayers(function(e){var n=e.layerName,i=e.layerConfig,r=t(n),s=r.canvas.getContext("2d"),a=[],u=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"%";return function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,i=Math.floor((0,o.constrain)(n,0,100));a.push(t+"("+i+e+")")}};i({brightness:u("brightness"),contrast:u("contrast"),grayscale:u("grayscale"),blur:u("blur","px"),sepia:u("sepia"),saturate:u("saturate"),p:r,light:function(){r.blendMode(r.OVERLAY)}}),0<a.length&&(s.filter=a.join(" "))})}},{key:"mergeConfig",value:function(t,e){this.config[t]=e}},{key:"addItem",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.layerName,i=void 0===n?a:n,r=e.zIndex,o=void 0===r?0:r;if(-1===this.layers.indexOf(i))throw new Error('Layer "'+i+"\" doesn't exists.");var s=this.items[i];if(0===s.length)s.push(t);else{var u=s.findIndex(function(t){return t.layer().zIndex>o});-1===u?s.push(t):s.splice(u,0,t)}this.updateCallback()}},{key:"clearItems",value:function(){var t=this.items;Object.keys(t).forEach(function(e){t[e]=[]})}},{key:"acceptGC",value:function(t){var e=this;this.layers.forEach(function(n){t.collect(e.items,n)}),this.updateCallback()}},{key:"getItems",value:function(){var t=this;return this.layers.map(function(e){return t.items[e]}).reduce(function(t,e){return e?t.concat(e):t},[])}},{key:"visitLayers",value:function(t){var e=this;this.layers.forEach(function(n){var i=e.items[n],r=e.config[n];t({items:i,layerName:n,layerConfig:r})})}}]),t}(),c={DEFAULT_LAYER:a,Manager:u};e.default=c,t.exports=e.default},function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){var i,r=n(127),o=n(71),s=n(132),a=n(133),u=n(134);"undefined"!=typeof ArrayBuffer&&(i=n(135));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=c||h;e.protocol=3;var f=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=r(f),m={type:"error",data:"parser error"},_=n(136);function d(t,e,n){for(var i=new Array(t.length),r=a(t.length,n),o=function(t,n,r){e(n,function(e,n){i[t]=n,r(e,i)})},s=0;s<t.length;s++)o(s,t[s],r)}e.encodePacket=function(t,n,i,r){"function"==typeof n&&(r=n,n=!1),"function"==typeof i&&(r=i,i=null);var o=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=t.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=f[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}(t,n,r);if(void 0!==_&&o instanceof _)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);if(l)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=new FileReader;return r.onload=function(){e.encodePacket({type:t.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(t.data)}(t,n,i);var r=new Uint8Array(1);r[0]=f[t.type];var o=new _([r.buffer,t.data]);return i(o)}(t,n,r);if(o&&o.base64)return function(t,n){var i="b"+e.packets[t.type]+t.data.data;return n(i)}(t,r);var s=f[t.type];return void 0!==t.data&&(s+=i?u.encode(String(t.data),{strict:!1}):String(t.data)),r(""+s)},e.encodeBase64Packet=function(t,n){var i,r="b"+e.packets[t.type];if(void 0!==_&&t.data instanceof _){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];n(r+t)},o.readAsDataURL(t.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];i=String.fromCharCode.apply(null,a)}return r+=btoa(i),n(r)},e.decodePacket=function(t,n,i){if(void 0===t)return m;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(i&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return m;var r=t.charAt(0);return Number(r)==r&&p[r]?t.length>1?{type:p[r],data:t.substring(1)}:{type:p[r]}:m}r=new Uint8Array(t)[0];var o=s(t,1);return _&&"blob"===n&&(o=new _([o])),{type:p[r],data:o}},e.decodeBase64Packet=function(t,e){var n=p[t.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=i.decode(t.substr(1));return"blob"===e&&_&&(r=new _([r])),{type:n,data:r}},e.encodePayload=function(t,n,i){"function"==typeof n&&(i=n,n=null);var r=o(t);if(n&&r)return _&&!l?e.encodePayloadAsBlob(t,i):e.encodePayloadAsArrayBuffer(t,i);if(!t.length)return i("0:");d(t,function(t,i){e.encodePacket(t,!!r&&n,!1,function(t){i(null,function(t){return t.length+":"+t}(t))})},function(t,e){return i(e.join(""))})},e.decodePayload=function(t,n,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,i);var r;if("function"==typeof n&&(i=n,n=null),""===t)return i(m,0,1);for(var o,s,a="",u=0,c=t.length;u<c;u++){var h=t.charAt(u);if(":"===h){if(""===a||a!=(o=Number(a)))return i(m,0,1);if(a!=(s=t.substr(u+1,o)).length)return i(m,0,1);if(s.length){if(r=e.decodePacket(s,n,!1),m.type===r.type&&m.data===r.data)return i(m,0,1);if(!1===i(r,u+o,c))return}u+=o,a=""}else a+=h}return""!==a?i(m,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));d(t,function(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})},function(t,e){var i=e.reduce(function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2},0),r=new Uint8Array(i),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var i=new Uint8Array(t.length),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);n=i.buffer}r[o++]=e?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)r[o++]=parseInt(a[s]);r[o++]=255;for(i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]}),n(r.buffer)})},e.encodePayloadAsBlob=function(t,n){d(t,function(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);t=i.buffer,e[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)s[r]=parseInt(o[r]);if(s[o.length]=255,_){var a=new _([e.buffer,s.buffer,t]);n(null,a)}})},function(t,e){return n(new _(e))})},e.decodePayloadAsBinary=function(t,n,i){"function"==typeof n&&(i=n,n=null);for(var r=t,o=[];r.byteLength>0;){for(var a=new Uint8Array(r),u=0===a[0],c="",h=1;255!==a[h];h++){if(c.length>310)return i(m,0,1);c+=a[h]}r=s(r,2+c.length),c=parseInt(c);var l=s(r,0,c);if(u)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(t){var f=new Uint8Array(l);l="";for(h=0;h<f.length;h++)l+=String.fromCharCode(f[h])}o.push(l),r=s(r,c)}var p=o.length;o.forEach(function(t,r){i(e.decodePacket(t,n,!0),r,p)})}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var r=n(2),o=n(6),s=(n(7),n(0)),a=n(4),u=n(3),c=n(1),h=(n(18),n(5)),l=n(16);function f(t){if(!(this instanceof f))return new f(t);f._super.call(this),this.m_type=f.TYPE,this.m_radius=h.polygonRadius,this.m_centroid=c.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}f._super=l,f.prototype=o(f._super.prototype),f.TYPE="polygon",f.prototype.getVertex=function(t){return i&&r.assert(0<=t&&t<this.m_count),this.m_vertices[t]},f.prototype._clone=function(){var t=new f;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},f.prototype.getChildCount=function(){return 1},f.prototype._set=function(t){if(i&&r.assert(3<=t.length&&t.length<=h.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=s.min(t.length,h.maxPolygonVertices),n=[],o=0,a=0;a<e;++a){for(var u=t[a],l=!0,f=0;f<o;++f)if(c.distanceSquared(u,n[f])<.25*h.linearSlopSquared){l=!1;break}l&&(n[o++]=u)}if((e=o)<3)return i&&r.assert(!1),void this._setAsBox(1,1);var p=0,m=n[0].x;for(a=1;a<e;++a){var _=n[a].x;(_>m||_==m&&n[a].y<n[p].y)&&(p=a,m=_)}for(var d=[],y=0,v=p;;){d[y]=v;var g=0;for(f=1;f<e;++f)if(g!=v){var b=c.sub(n[g],n[d[y]]),x=(u=c.sub(n[f],n[d[y]]),c.cross(b,u));x<0&&(g=f),0==x&&u.lengthSquared()>b.lengthSquared()&&(g=f)}else g=f;if(++y,v=g,g==p)break}if(y<3)return i&&r.assert(!1),void this._setAsBox(1,1);this.m_count=y;for(a=0;a<y;++a)this.m_vertices[a]=n[d[a]];for(a=0;a<y;++a){var A=a,w=a+1<y?a+1:0,B=c.sub(this.m_vertices[w],this.m_vertices[A]);i&&r.assert(B.lengthSquared()>s.EPSILON*s.EPSILON),this.m_normals[a]=c.cross(B,1),this.m_normals[a].normalize()}this.m_centroid=function(t,e){i&&r.assert(e>=3);for(var n=c.zero(),o=0,a=c.zero(),u=0;u<e;++u){var h=a,l=t[u],f=u+1<e?t[u+1]:t[0],p=c.sub(l,h),m=c.sub(f,h),_=.5*c.cross(p,m);o+=_,n.addMul(_*(1/3),h),n.addMul(_*(1/3),l),n.addMul(_*(1/3),f)}return i&&r.assert(o>s.EPSILON),n.mul(1/o),n}(this.m_vertices,y)}},f.prototype._setAsBox=function(t,e,n,i){if(this.m_vertices[0]=c.neo(-t,-e),this.m_vertices[1]=c.neo(t,-e),this.m_vertices[2]=c.neo(t,e),this.m_vertices[3]=c.neo(-t,e),this.m_normals[0]=c.neo(0,-1),this.m_normals[1]=c.neo(1,0),this.m_normals[2]=c.neo(0,1),this.m_normals[3]=c.neo(-1,0),this.m_count=4,c.isValid(n)){i=i||0,this.m_centroid.set(n);var r=a.identity();r.p.set(n),r.q.set(i);for(var o=0;o<this.m_count;++o)this.m_vertices[o]=a.mulVec2(r,this.m_vertices[o]),this.m_normals[o]=u.mulVec2(r.q,this.m_normals[o])}},f.prototype.testPoint=function(t,e){for(var n=u.mulTVec2(t.q,c.sub(e,t.p)),i=0;i<this.m_count;++i){if(c.dot(this.m_normals[i],c.sub(n,this.m_vertices[i]))>0)return!1}return!0},f.prototype.rayCast=function(t,e,n,o){for(var s=u.mulTVec2(n.q,c.sub(e.p1,n.p)),a=u.mulTVec2(n.q,c.sub(e.p2,n.p)),h=c.sub(a,s),l=0,f=e.maxFraction,p=-1,m=0;m<this.m_count;++m){var _=c.dot(this.m_normals[m],c.sub(this.m_vertices[m],s)),d=c.dot(this.m_normals[m],h);if(0==d){if(_<0)return!1}else d<0&&_<l*d?(l=_/d,p=m):d>0&&_<f*d&&(f=_/d);if(f<l)return!1}return i&&r.assert(0<=l&&l<=e.maxFraction),p>=0&&(t.fraction=l,t.normal=u.mulVec2(n.q,this.m_normals[p]),!0)},f.prototype.computeAABB=function(t,e,n){for(var i=1/0,r=1/0,o=-1/0,u=-1/0,c=0;c<this.m_count;++c){var h=a.mulVec2(e,this.m_vertices[c]);i=s.min(i,h.x),o=s.max(o,h.x),r=s.min(r,h.y),u=s.max(u,h.y)}t.lowerBound.set(i,r),t.upperBound.set(o,u),t.extend(this.m_radius)},f.prototype.computeMass=function(t,e){i&&r.assert(this.m_count>=3);for(var n=c.zero(),o=0,a=0,u=c.zero(),h=0;h<this.m_count;++h)u.add(this.m_vertices[h]);u.mul(1/this.m_count);for(h=0;h<this.m_count;++h){var l=c.sub(this.m_vertices[h],u),f=h+1<this.m_count?c.sub(this.m_vertices[h+1],u):c.sub(this.m_vertices[0],u),p=c.cross(l,f),m=.5*p;o+=m,n.addCombine(m*(1/3),l,m*(1/3),f);var _=l.x,d=l.y,y=f.x,v=f.y;a+=1/3*.25*p*(_*_+y*_+y*y+(d*d+v*d+v*v))}t.mass=e*o,i&&r.assert(o>s.EPSILON),n.mul(1/o),t.center.setCombine(1,n,1,u),t.I=e*a,t.I+=t.mass*(c.dot(t.center,t.center)-c.dot(n,n))},f.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,n=t<this.m_count-1?e+1:0,i=this.m_vertices[e],r=c.sub(this.m_vertices[n],i),o=0;o<this.m_count;++o)if(o!=e&&o!=n){var s=c.sub(this.m_vertices[o],i);if(c.cross(r,s)<0)return!1}return!0},f.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatDirections=void 0;var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=s(n(44)),o=s(n(64));function s(t){return t&&t.__esModule?t:{default:t}}var a=(0,r.default)({HORIZONTAL:null,VERTICAL:null,BOTH:null}),u=e.RepeatDirections={REPEAT_BOTH:"repeat",REPEAT_X:"repeat-x",REPEAT_Y:"repeat-y",NO_REPEAT:"no-repeat"};e.default=i({},o.default,{BackgroundTranslate:a,RepeatDirections:u})},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function _(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||h||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TouchEvents=e.KeyboardEvents=e.MouseEvents=e.clearEventHandlers=e.onEventCreate=void 0;var i=n(17),r=(e.onEventCreate=function(t){var e=t,n={};return function(t,r){(0,i.ensureArray)(t).forEach(function(t){e[t]||(n[t]=[],e[t]=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];n[t].forEach(function(t){t.apply(void 0,i)})}),n[t].push(r)})}},function(t){return Object.values(t)}),o=(e.clearEventHandlers=function(t){[].concat(r(o),r(s),r(a)).forEach(function(e){t[e]=void 0})},e.MouseEvents={mouseMoved:"mouseMoved",mouseDragged:"mouseDragged",mousePressed:"mousePressed",mouseReleased:"mouseReleased",mouseClicked:"mouseClicked",doubleClicked:"doubleClicked",mouseWheel:"mouseWheel"}),s=e.KeyboardEvents={keyPressed:"keyPressed",keyReleased:"keyReleased"},a=e.TouchEvents={touchStarted:"touchStarted",touchMoved:"touchMoved",touchEnded:"touchEnded"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.coordsToVec2=e.Vec2ToCoords=e.p5VecToVec2=e.pixelToWorld=e.worldToPixel=e.Vec2=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(55)).default.Vec2;e.Vec2=i;var r=e.worldToPixel=function(t){return 10*t},o=e.pixelToWorld=function(t){return t/10},s=e.p5VecToVec2=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,r=t.y,s=void 0===r?0:r;return i(o(n),o(s))};e.Vec2ToCoords=function(t){var e=t.x,n=t.y;return{x:r(e),y:r(n)}},e.coordsToVec2=s},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=m,t.exports.Input=l,t.exports.Output=f,t.exports.Proxy=_,t.exports.Cache=p;var r=n(5),o=n(2),s=n(42),a=n(0),u=n(1),c=(n(8),n(9),n(11),n(3)),h=(n(10),n(4));n(12),n(13);function l(){this.proxyA=new _,this.proxyB=new _,this.transformA=null,this.transformB=null,this.useRadii=!1}function f(){this.pointA=u.zero(),this.pointB=u.zero(),this.distance,this.iterations}function p(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function m(t,e,n){++s.gjkCalls;var i=n.proxyA,o=n.proxyB,l=n.transformA,f=n.transformB,p=new y;p.readCache(e,i,l,o,f);for(var m=p.m_v,_=r.maxDistnceIterations,d=[],v=[],g=0,b=0;b<_;){g=p.m_count;for(var x=0;x<g;++x)d[x]=m[x].indexA,v[x]=m[x].indexB;if(p.solve(),3==p.m_count)break;(M=p.getClosestPoint()).lengthSquared();var A=p.getSearchDirection();if(A.lengthSquared()<a.EPSILON*a.EPSILON)break;var w=m[p.m_count];w.indexA=i.getSupport(c.mulTVec2(l.q,u.neg(A))),w.wA=h.mulVec2(l,i.getVertex(w.indexA)),w.indexB=o.getSupport(c.mulTVec2(f.q,A)),w.wB=h.mulVec2(f,o.getVertex(w.indexB)),w.w=u.sub(w.wB,w.wA),++b,++s.gjkIters;var B=!1;for(x=0;x<g;++x)if(w.indexA==d[x]&&w.indexB==v[x]){B=!0;break}if(B)break;++p.m_count}if(s.gjkMaxIters=a.max(s.gjkMaxIters,b),p.getWitnessPoints(t.pointA,t.pointB),t.distance=u.distance(t.pointA,t.pointB),t.iterations=b,p.writeCache(e),n.useRadii){var C=i.m_radius,S=o.m_radius;if(t.distance>C+S&&t.distance>a.EPSILON){t.distance-=C+S;var E=u.sub(t.pointB,t.pointA);E.normalize(),t.pointA.addMul(C,E),t.pointB.subMul(S,E)}else{var M=u.mid(t.pointA,t.pointB);t.pointA.set(M),t.pointB.set(M),t.distance=0}}}function _(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function d(){this.indexA,this.indexB,this.wA=u.zero(),this.wB=u.zero(),this.w=u.zero(),this.a}function y(){this.m_v1=new d,this.m_v2=new d,this.m_v3=new d,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}s.gjkCalls=0,s.gjkIters=0,s.gjkMaxIters=0,_.prototype.getVertexCount=function(){return this.m_count},_.prototype.getVertex=function(t){return i&&o.assert(0<=t&&t<this.m_count),this.m_vertices[t]},_.prototype.getSupport=function(t){for(var e=0,n=u.dot(this.m_vertices[0],t),i=0;i<this.m_count;++i){var r=u.dot(this.m_vertices[i],t);r>n&&(e=i,n=r)}return e},_.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},_.prototype.set=function(t,e){i&&o.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},d.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=u.clone(t.wA),this.wB=u.clone(t.wB),this.w=u.clone(t.w),this.a=t.a},y.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},y.prototype.readCache=function(t,e,n,r,s){i&&o.assert(t.count<=3),this.m_count=t.count;for(var c=0;c<this.m_count;++c){(_=this.m_v[c]).indexA=t.indexA[c],_.indexB=t.indexB[c];var l=e.getVertex(_.indexA),f=r.getVertex(_.indexB);_.wA=h.mulVec2(n,l),_.wB=h.mulVec2(s,f),_.w=u.sub(_.wB,_.wA),_.a=0}if(this.m_count>1){var p=t.metric,m=this.getMetric();(m<.5*p||2*p<m||m<a.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var _;(_=this.m_v[0]).indexA=0,_.indexB=0;l=e.getVertex(0),f=r.getVertex(0);_.wA=h.mulVec2(n,l),_.wB=h.mulVec2(s,f),_.w=u.sub(_.wB,_.wA),_.a=1,this.m_count=1}},y.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},y.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return u.neg(this.m_v1.w);case 2:var t=u.sub(this.m_v2.w,this.m_v1.w);return u.cross(t,u.neg(this.m_v1.w))>0?u.cross(1,t):u.cross(t,1);default:return i&&o.assert(!1),u.zero()}},y.prototype.getClosestPoint=function(){switch(this.m_count){case 0:return i&&o.assert(!1),u.zero();case 1:return u.clone(this.m_v1.w);case 2:return u.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return u.zero();default:return i&&o.assert(!1),u.zero()}},y.prototype.getWitnessPoints=function(t,e){switch(this.m_count){case 0:i&&o.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t);break;default:i&&o.assert(!1)}},y.prototype.getMetric=function(){switch(this.m_count){case 0:return i&&o.assert(!1),0;case 1:return 0;case 2:return u.distance(this.m_v1.w,this.m_v2.w);case 3:return u.cross(u.sub(this.m_v2.w,this.m_v1.w),u.sub(this.m_v3.w,this.m_v1.w));default:return i&&o.assert(!1),0}},y.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:i&&o.assert(!1)}},y.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,n=u.sub(e,t),i=-u.dot(t,n);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);var r=u.dot(e,n);if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var o=1/(r+i);this.m_v1.a=r*o,this.m_v2.a=i*o,this.m_count=2},y.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,n=this.m_v3.w,i=u.sub(e,t),r=u.dot(t,i),o=u.dot(e,i),s=-r,a=u.sub(n,t),c=u.dot(t,a),h=u.dot(n,a),l=-c,f=u.sub(n,e),p=u.dot(e,f),m=u.dot(n,f),_=-p,d=u.cross(i,a),y=d*u.cross(e,n),v=d*u.cross(n,t),g=d*u.cross(t,e);if(s<=0&&l<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&s>0&&g<=0){var b=1/(o+s);return this.m_v1.a=o*b,this.m_v2.a=s*b,void(this.m_count=2)}if(h>0&&l>0&&v<=0){var x=1/(h+l);return this.m_v1.a=h*x,this.m_v3.a=l*x,this.m_count=2,void this.m_v2.set(this.m_v3)}if(o<=0&&_<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(h<=0&&m<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(m>0&&_>0&&y<=0){var A=1/(m+_);return this.m_v2.a=m*A,this.m_v3.a=_*A,this.m_count=2,void this.m_v1.set(this.m_v3)}var w=1/(y+v+g);this.m_v1.a=y*w,this.m_v2.a=v*w,this.m_v3.a=g*w,this.m_count=3},m.testOverlap=function(t,e,n,i,r,o){var s=new l;s.proxyA.set(t,e),s.proxyB.set(n,i),s.transformA=r,s.transformB=o,s.useRadii=!0;var u=new p,c=new f;return m(c,u,s),c.distance<10*a.EPSILON}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=h;var r=n(2),o=n(6),s=(n(7),n(0)),a=(n(4),n(3)),u=n(1),c=(n(18),n(5),n(16));function h(t,e){if(!(this instanceof h))return new h(t,e);h._super.call(this),this.m_type=h.TYPE,this.m_p=u.zero(),this.m_radius=1,"object"==typeof t&&u.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}h._super=c,h.prototype=o(h._super.prototype),h.TYPE="circle",h.prototype.getRadius=function(){return this.m_radius},h.prototype.getCenter=function(){return this.m_p},h.prototype.getVertex=function(t){return i&&r.assert(0==t),this.m_p},h.prototype.getVertexCount=function(t){return 1},h.prototype._clone=function(){var t=new h;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},h.prototype.getChildCount=function(){return 1},h.prototype.testPoint=function(t,e){var n=u.add(t.p,a.mulVec2(t.q,this.m_p)),i=u.sub(e,n);return u.dot(i,i)<=this.m_radius*this.m_radius},h.prototype.rayCast=function(t,e,n,i){var r=u.add(n.p,a.mulVec2(n.q,this.m_p)),o=u.sub(e.p1,r),c=u.dot(o,o)-this.m_radius*this.m_radius,h=u.sub(e.p2,e.p1),l=u.dot(o,h),f=u.dot(h,h),p=l*l-f*c;if(p<0||f<s.EPSILON)return!1;var m=-(l+s.sqrt(p));return 0<=m&&m<=e.maxFraction*f&&(m/=f,t.fraction=m,t.normal=u.add(o,u.mul(m,h)),t.normal.normalize(),!0)},h.prototype.computeAABB=function(t,e,n){var i=u.add(e.p,a.mulVec2(e.q,this.m_p));t.lowerBound.set(i.x-this.m_radius,i.y-this.m_radius),t.upperBound.set(i.x+this.m_radius,i.y+this.m_radius)},h.prototype.computeMass=function(t,e){t.mass=e*s.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+u.dot(this.m_p,this.m_p))},h.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=c;var i=n(6),r=(n(7),n(5)),o=n(16),s=(n(0),n(4)),a=n(3),u=n(1);n(18);function c(t,e){if(!(this instanceof c))return new c(t,e);c._super.call(this),this.m_type=c.TYPE,this.m_radius=r.polygonRadius,this.m_vertex1=t?u.clone(t):u.zero(),this.m_vertex2=e?u.clone(e):u.zero(),this.m_vertex0=u.zero(),this.m_vertex3=u.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}c._super=o,c.prototype=i(c._super.prototype),c.TYPE="edge",c.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},c.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},c.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},c.prototype._clone=function(){var t=new c;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},c.prototype.getChildCount=function(){return 1},c.prototype.testPoint=function(t,e){return!1},c.prototype.rayCast=function(t,e,n,i){var r=a.mulTVec2(n.q,u.sub(e.p1,n.p)),o=a.mulTVec2(n.q,u.sub(e.p2,n.p)),s=u.sub(o,r),c=this.m_vertex1,h=this.m_vertex2,l=u.sub(h,c),f=u.neo(l.y,-l.x);f.normalize();var p=u.dot(f,u.sub(c,r)),m=u.dot(f,s);if(0==m)return!1;var _=p/m;if(_<0||e.maxFraction<_)return!1;var d=u.add(r,u.mul(_,s)),y=u.sub(h,c),v=u.dot(y,y);if(0==v)return!1;var g=u.dot(u.sub(d,c),y)/v;return!(g<0||1<g)&&(t.fraction=_,t.normal=p>0?a.mulVec2(n.q,f).neg():a.mulVec2(n.q,f),!0)},c.prototype.computeAABB=function(t,e,n){var i=s.mulVec2(e,this.m_vertex1),r=s.mulVec2(e,this.m_vertex2);t.combinePoints(i,r),t.extend(this.m_radius)},c.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},c.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformLoader=e.getTriangleCoords=e.lerpVectIfShould=e.shouldLerpVect=e.assureArray=e.mirror=e.isArray=e.constrain=e.objToVect=e.vectToObj=e.vectorFromAngle=e.getRandomVectorBetween=e.lerpVector=e.getRandomHSB=e.getRandomRGB=e.getOffsetForAbsolutePos=e.getPlayerAbsolutePos=e.vectorsAreSame=e.zeroVector=e.times=e.getMouseCreate=e.getCenterCreate=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(62)),r=n(19),o=n(106);e.getCenterCreate=function(t,e){return function(){var n=t.width/2,i=t.height/2;return t.createVector(n/e,i/e)}},e.getMouseCreate=function(t,e){return function(){return t.createVector(t.mouseX/e,t.mouseY/e)}},e.times=function(t,e){for(var n=0;n<t;n++)e(n)},e.zeroVector=function(t){return t.createVector()},e.vectorsAreSame=function(t,e){return t.x===e.x&&t.y===e.y},e.getPlayerAbsolutePos=function(t,e){return t.sub(e)},e.getOffsetForAbsolutePos=function(t,e){return e.mult(-1).add(t)},e.getRandomRGB=function(t){return{r:t.random(50,255),g:t.random(50,255),b:t.random(50,255)}},e.getRandomHSB=function(t){return{h:t.random(0,350),s:t.random(40,100),b:t.random(50,100)}},e.lerpVector=function(t){return function(e,n,i){e.x=t.lerp(e.x,n,i),e.y=t.lerp(e.y,n,i)}},e.getRandomVectorBetween=function(t){return function(e,n){var i=t.random(e,n),r=t.random(e,n);return t.createVector(i,r)}},e.vectorFromAngle=function(t){return i.default.Vector.fromAngle(t)},e.vectToObj=function(t){return{x:t.x,y:t.y}},e.objToVect=function(t,e){return t.createVector(e.x,e.y)},e.constrain=function(t,e,n){return Math.min(n,Math.max(e,t))};var s=e.isArray=function(t){return t&&t.constructor===Array};e.mirror=function(t,e){var n={};return Object.keys(t).forEach(function(t){n[t]=e&&(0,r.isFunction)(e)?e(t):t}),n},e.assureArray=function(t){return s(t)?t:[t]},e.shouldLerpVect=function(t,e){return.5<=t.dist(e)},e.lerpVectIfShould=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.07;return t.lerp(e,n),t},e.getTriangleCoords=function(t,e){return{ax:-.5*t,ay:.5*e,bx:.5*t,by:.5*e,cx:0,cy:-.5*e}},e.PlatformLoader=function(t,e){var n=e.resolve,i=e.layer;return t.objects.map(function(t){return new o.DynamicPlatform(t,function(e){return n?n(e)[t.type]:null},i)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filterRenderable=void 0;var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(19),o=function(t){return t&&t.__esModule?t:{default:t}}(n(24)),s=n(63),a=n(31);var u=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._isRendered=!0,this._hooks=new s.Hooks,this._mixins=[],this._io={}}return i(t,[{key:"with",value:function(t){return this._mixins=this._mixins.concat(t),this}},{key:"noRender",value:function(){this._isRendered=!1}},{key:"layer",value:function(){return{layerName:o.default.DEFAULT_LAYER}}},{key:"destroy",value:function(){var t=this.body;t&&(t.m_world.destroyBody(t),this.noRender())}},{key:"synced",value:function(){return{}}},{key:"getPosition",value:function(){var t=this.body;return t?(0,a.Vec2ToCoords)(t.getPosition()):this.position||{x:0,y:0}}},{key:"physics",value:function(){}},{key:"initialize",value:function(){}},{key:"update",value:function(){}},{key:"render",value:function(){}}]),t}();e.default=u;e.filterRenderable=function(t){return(0,r.isArray)(t)?t.filter(function(t){return t.shouldRender}):t&&t.shouldRender?[t]:[]}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(119)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++r)}),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(29))},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(137)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++r)}),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(29))},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=v;var r=n(2),o=n(7),s=n(1),a=n(3),u=n(0),c=n(10),h=n(4),l=n(12),f=n(13),p=n(56),m=(n(16),n(57),v.STATIC="static"),_=v.KINEMATIC="kinematic",d=v.DYNAMIC="dynamic",y={type:m,position:s.zero(),angle:0,linearVelocity:s.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function v(t,e){e=o(e,y),i&&r.assert(s.isValid(e.position)),i&&r.assert(s.isValid(e.linearVelocity)),i&&r.assert(u.isFinite(e.angle)),i&&r.assert(u.isFinite(e.angularVelocity)),i&&r.assert(u.isFinite(e.angularDamping)&&e.angularDamping>=0),i&&r.assert(u.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==d?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=h.identity(),this.m_xf.p=s.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new c,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new l,this.c_position=new f,this.m_force=s.zero(),this.m_torque=0,this.m_linearVelocity=s.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function g(){this.mass=0,this.center=s.zero(),this.I=0}v.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},v.prototype.getWorld=function(){return this.m_world},v.prototype.getNext=function(){return this.m_next},v.prototype.setUserData=function(t){this.m_userData=t},v.prototype.getUserData=function(){return this.m_userData},v.prototype.getFixtureList=function(){return this.m_fixtureList},v.prototype.getJointList=function(){return this.m_jointList},v.prototype.getContactList=function(){return this.m_contactList},v.prototype.isStatic=function(){return this.m_type==m},v.prototype.isDynamic=function(){return this.m_type==d},v.prototype.isKinematic=function(){return this.m_type==_},v.prototype.setStatic=function(){return this.setType(m),this},v.prototype.setDynamic=function(){return this.setType(d),this},v.prototype.setKinematic=function(){return this.setType(_),this},v.prototype.getType=function(){return this.m_type},v.prototype.setType=function(t){if(i&&r.assert(t===m||t===_||t===d),i&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==m&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var n=e;e=e.next,this.m_world.destroyContact(n.contact)}this.m_contactList=null;for(var o=this.m_world.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)for(var a=s.m_proxyCount,u=0;u<a;++u)o.touchProxy(s.m_proxies[u].proxyId)}},v.prototype.isBullet=function(){return this.m_bulletFlag},v.prototype.setBullet=function(t){this.m_bulletFlag=!!t},v.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},v.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},v.prototype.isAwake=function(){return this.m_awakeFlag},v.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},v.prototype.isActive=function(){return this.m_activeFlag},v.prototype.setActive=function(t){if(i&&r.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.destroyProxies(e);for(var o=this.m_contactList;o;){var s=o;o=o.next,this.m_world.destroyContact(s.contact)}this.m_contactList=null}},v.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},v.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},v.prototype.getTransform=function(){return this.m_xf},v.prototype.setTransform=function(t,e){if(i&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var n=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.synchronize(n,this.m_xf,this.m_xf)}},v.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},v.prototype.synchronizeFixtures=function(){var t=h.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.synchronize(e,t,this.m_xf)},v.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},v.prototype.getPosition=function(){return this.m_xf.p},v.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},v.prototype.getAngle=function(){return this.m_sweep.a},v.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},v.prototype.getWorldCenter=function(){return this.m_sweep.c},v.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},v.prototype.getLinearVelocity=function(){return this.m_linearVelocity},v.prototype.getLinearVelocityFromWorldPoint=function(t){var e=s.sub(t,this.m_sweep.c);return s.add(this.m_linearVelocity,s.cross(this.m_angularVelocity,e))},v.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},v.prototype.setLinearVelocity=function(t){this.m_type!=m&&(s.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},v.prototype.getAngularVelocity=function(){return this.m_angularVelocity},v.prototype.setAngularVelocity=function(t){this.m_type!=m&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},v.prototype.getLinearDamping=function(){return this.m_linearDamping},v.prototype.setLinearDamping=function(t){this.m_linearDamping=t},v.prototype.getAngularDamping=function(){return this.m_angularDamping},v.prototype.setAngularDamping=function(t){this.m_angularDamping=t},v.prototype.getGravityScale=function(){return this.m_gravityScale},v.prototype.setGravityScale=function(t){this.m_gravityScale=t},v.prototype.getMass=function(){return this.m_mass},v.prototype.getInertia=function(){return this.m_I+this.m_mass*s.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},v.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},v.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);i&&r.assert(this.isDynamic());for(var t=s.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var n=new g;e.getMassData(n),this.m_mass+=n.mass,t.addMul(n.mass,n.center),this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*s.dot(t,t),i&&r.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var o=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,o)))},v.prototype.setMassData=function(t){if(i&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==d){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*s.dot(t.center,t.center),i&&r.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,e)))}},v.prototype.applyForce=function(t,e,n){this.m_type==d&&(n&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=s.cross(s.sub(e,this.m_sweep.c),t)))},v.prototype.applyForceToCenter=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},v.prototype.applyTorque=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},v.prototype.applyLinearImpulse=function(t,e,n){this.m_type==d&&(n&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*s.cross(s.sub(e,this.m_sweep.c),t)))},v.prototype.applyAngularImpulse=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},v.prototype.shouldCollide=function(t){if(this.m_type!=d&&t.m_type!=d)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},v.prototype.createFixture=function(t,e){if(i&&r.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var n=new p(this,t,e);if(this.m_activeFlag){var o=this.m_world.m_broadPhase;n.createProxies(o,this.m_xf)}return n.m_next=this.m_fixtureList,this.m_fixtureList=n,n.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,n},v.prototype.destroyFixture=function(t){if(i&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){i&&r.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var n=this.m_fixtureList;null!=n;){if(n.m_next===t){n.m_next=t.m_next,e=!0;break}n=n.m_next}i&&r.assert(e);for(var o=this.m_contactList;o;){var s=o.contact;o=o.next;var a=s.getFixtureA(),u=s.getFixtureB();t!=a&&t!=u||this.m_world.destroyContact(s)}if(this.m_activeFlag){var c=this.m_world.m_broadPhase;t.destroyProxies(c)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},v.prototype.getWorldPoint=function(t){return h.mulVec2(this.m_xf,t)},v.prototype.getWorldVector=function(t){return a.mulVec2(this.m_xf.q,t)},v.prototype.getLocalPoint=function(t){return h.mulTVec2(this.m_xf,t)},v.prototype.getLocalVector=function(t){return a.mulTVec2(this.m_xf.q,t)}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;e.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var n in this)"function"!=typeof this[n]&&"object"!=typeof this[n]&&(e+=n+": "+this[n]+t);return e}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var r=n(2),o=n(6),s=(n(7),n(0),n(4)),a=(n(3),n(1)),u=(n(18),n(5)),c=n(16),h=n(34);function l(t,e){if(!(this instanceof l))return new l(t,e);l._super.call(this),this.m_type=l.TYPE,this.m_radius=u.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}l._super=c,l.prototype=o(l._super.prototype),l.TYPE="chain",l.prototype._createLoop=function(t){i&&r.assert(0==this.m_vertices.length&&0==this.m_count),i&&r.assert(t.length>=3);for(var e=1;e<t.length;++e){var n=t[e-1],o=t[e];i&&r.assert(a.distanceSquared(n,o)>u.linearSlopSquared)}this.m_vertices.length=0,this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_vertices[t.length]=t[0].clone(),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},l.prototype._createChain=function(t){i&&r.assert(0==this.m_vertices.length&&0==this.m_count),i&&r.assert(t.length>=2);for(var e=1;e<t.length;++e){var n=t[e-1],o=t[e];i&&r.assert(a.distanceSquared(n,o)>u.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},l.prototype._setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},l.prototype._setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},l.prototype._clone=function(){var t=new l;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},l.prototype.getChildCount=function(){return this.m_count-1},l.prototype.getChildEdge=function(t,e){i&&r.assert(0<=e&&e<this.m_count-1),t.m_type=h.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},l.prototype.getVertex=function(t){return i&&r.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},l.prototype.testPoint=function(t,e){return!1},l.prototype.rayCast=function(t,e,n,o){return i&&r.assert(0<=o&&o<this.m_count),new h(this.getVertex(o),this.getVertex(o+1)).rayCast(t,e,n,0)},l.prototype.computeAABB=function(t,e,n){i&&r.assert(0<=n&&n<this.m_count);var o=s.mulVec2(e,this.getVertex(n)),a=s.mulVec2(e,this.getVertex(n+1));t.combinePoints(o,a)},l.prototype.computeMass=function(t,e){t.mass=0,t.center=a.neo(),t.I=0},l.prototype.computeDistanceProxy=function(t,e){i&&r.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius}},function(t,e,n){"use strict";t.exports=function(t){var e,n={};if(!(t instanceof Object)||Array.isArray(t))throw new Error("keyMirror(...): Argument must be an object.");for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(28).RepeatDirections.REPEAT_BOTH,r={fillRepeat:function(t){var e=t.p,n=t.width,r=t.height,o=t.asset,s=t.repeat,a=void 0===s?i:s,u=e;e.rootGL&&(u=e.rootGL);var c=u.createGraphics(n,r),h=c.canvas,l=h.getContext("2d");return l.fillStyle=l.createPattern(o.canvas,a),l.fillRect(0,0,h.width,h.height),c}};e.default=r,t.exports=e.default},function(t,e){var n=1e3,i=60*n,r=60*i,o=24*r,s=365.25*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?function(t){return a(t,o,"day")||a(t,r,"hour")||a(t,i,"minute")||a(t,n,"second")||t+" ms"}(t):function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=r)return Math.round(t/r)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var i=n(120)("socket.io-parser"),r=n(25),o=n(122),s=n(48),a=n(67);function u(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=l;var c=e.ERROR+'"encode error"';function h(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var r=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===r)return c;n+=r}return i("encoded %j as %s",t,n),n}function l(){this.reconstructor=null}function f(t){this.reconPack=t,this.buffers=[]}function p(t){return{type:e.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,n){(i("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){o.removeBlobs(t,function(t){var n=o.deconstructPacket(t),i=h(n.packet),r=n.buffers;r.unshift(i),e(r)})}(t,n):n([h(t)])},r(l.prototype),l.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return p("unknown packet type "+r.type);if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var o="";"-"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(n+1))for(r.nsp="";++n;){var a=t.charAt(n);if(","===a)break;if(r.nsp+=a,n===t.length)break}else r.nsp="/";var u=t.charAt(n+1);if(""!==u&&Number(u)==u){for(r.id="";++n;){var a=t.charAt(n);if(null==a||Number(a)!=a){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}if(t.charAt(++n)){var c=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(n)),h=!1!==c&&(r.type===e.ERROR||s(c));if(!h)return p("invalid payload");r.data=c}return i("decoded %s as %j",t,r),r}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new f(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e){var i=n(125);t.exports=function(t){var n=t.xdomain,r=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||i))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(t){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,n(14))},function(t,e,n){var i=n(26),r=n(25);function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=o,r(o.prototype),o.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit("packet",t)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.Scene=function t(e,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.width=e,this.height=n,i&&(this.styleWidth=Math.min(Math.ceil(window.innerHeight*(e/n)/window.innerWidth*100),100),this.fullHeight=!0)};e.scene=function(t,e,n){return new i(t,e,n)},e.DEFAULT_SCENE=new i(window.innerWidth,window.innerHeight),e.acquireScaleFactor=function(t){return t>window.innerWidth?1:Math.round(window.innerWidth/t*100)/100}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(19);var s=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.activities={}}return r(t,[{key:"reset",value:function(){this.activities={}}},{key:"trigger",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.activities[t];if(n&&n.receivers){var i=n.receivers,r=n.provider;(0,o.isFunction)(r)?i.forEach(function(t){t(r())}):i.forEach(function(t){t(e)})}}},{key:"accept",value:function(t,e){var n=this.activities[t];n||(n={});var r=n.receivers,o=void 0===r?[]:r;o.push(e),this.activities[t]=i({},n,{receivers:o})}},{key:"provide",value:function(t,e){var n=this.activities[t];n=i({},n,{provider:e}),this.activities[t]=n}}]),t}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=function(t){return t&&t.__esModule?t:{default:t}}(n(54)),o=n(31),s=n(101),a=n(103);var u=n(55),c=n(104).debounce,h=u.Vec2,l=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;return c(t,e)},f=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e.forEach(function(e){var r=t.createBody();r.setUserData({type:"_FR_DEFAULT_TYPE",events:{},oneWayCollisions:!1});var s={p:n,dynamic:function(){r.setDynamic()},shape:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return r.createFixture(i({shape:t(u)},n)),e.body=r,r},position:function(t){var e=t.x,n=void 0===e?0:e,i=t.y,s=void 0===i?0:i;r.setPosition((0,o.coordsToVec2)({x:n,y:s}))},type:function(t){r.getUserData().type=t},oneWayCollisions:function(){r.getUserData().oneWayCollisions=!0},isGround:function(){s.type(a.PhysicsConstants.GROUND_TYPE)},contact:{with:function(t){var e=r.getUserData().events;return e[t]={},{onBegin:function(n,i){e[t].onBegin=l(n,i)},onEnd:function(n,i){e[t].onEnd=l(n,i)}}}},destroy:function(n){t.destroyBody(r),n&&e.noRender()},body:r};e.physics(s)})},p={create:function(){return p.world=function(){var t=u.World({gravity:h(0,9)});return(0,s.bindHandlers)(t),t}(),p},run:function(){!function(t){r.default.irregularTimeScheduler(.02)(function(){return t.step(.02),p.world==t})}(p.world)},applyTo:function(t,e){f(p.world,t,e)},subscriber:function(t,e){f(p.world,[t],e)}};e.default=p,t.exports=e.default},function(t,e,n){"use strict";t.exports={irregularTimeScheduler:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:200,e=arguments[1];return function(n){!function i(){var r=t;e&&e>t&&(r=t+Math.random()*(e-t)),setTimeout(function(){n()&&i()},r)}()}}}},function(t,e,n){e.internal={},e.Math=n(0),e.Vec2=n(1),e.Vec3=n(8),e.Mat22=n(9),e.Mat33=n(11),e.Transform=n(4),e.Rot=n(3),e.AABB=n(18),e.Shape=n(16),e.Fixture=n(56),e.Body=n(41),e.Contact=n(21),e.Joint=n(15),e.World=n(57),e.Circle=n(33),e.Edge=n(34),e.Polygon=n(27),e.Chain=n(43),e.Box=n(86),n(87),n(88),e.internal.CollidePolygons=n(89),n(90),n(91),e.DistanceJoint=n(92),e.FrictionJoint=n(93),e.GearJoint=n(94),e.MotorJoint=n(95),e.MouseJoint=n(96),e.PrismaticJoint=n(61),e.PulleyJoint=n(97),e.RevoluteJoint=n(60),e.RopeJoint=n(98),e.WeldJoint=n(99),e.WheelJoint=n(100),e.internal.Sweep=n(10),e.internal.stats=n(42),e.internal.Manifold=n(22),e.internal.Distance=n(32),e.internal.TimeOfImpact=n(59),e.internal.DynamicTree=n(58),e.internal.Settings=n(5)},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var r=n(2),o=n(7),s=n(0),a=n(1),u=n(18),c={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function h(t,e){this.aabb=new u,this.fixture=t,this.childIndex=e,this.proxyId}function l(t,e,n){e.shape?(n=e,e=e.shape):"number"==typeof n&&(n={density:n}),n=o(n,c),this.m_body=t,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_density=n.density,this.m_isSensor=n.isSensor,this.m_filterGroupIndex=n.filterGroupIndex,this.m_filterCategoryBits=n.filterCategoryBits,this.m_filterMaskBits=n.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var i=this.m_shape.getChildCount(),r=0;r<i;++r)this.m_proxies[r]=new h(this,r);this.m_userData=n.userData}l.prototype.getType=function(){return this.m_shape.getType()},l.prototype.getShape=function(){return this.m_shape},l.prototype.isSensor=function(){return this.m_isSensor},l.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},l.prototype.getUserData=function(){return this.m_userData},l.prototype.setUserData=function(t){this.m_userData=t},l.prototype.getBody=function(){return this.m_body},l.prototype.getNext=function(){return this.m_next},l.prototype.getDensity=function(){return this.m_density},l.prototype.setDensity=function(t){i&&r.assert(s.isFinite(t)&&t>=0),this.m_density=t},l.prototype.getFriction=function(){return this.m_friction},l.prototype.setFriction=function(t){this.m_friction=t},l.prototype.getRestitution=function(){return this.m_restitution},l.prototype.setRestitution=function(t){this.m_restitution=t},l.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},l.prototype.rayCast=function(t,e,n){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),n)},l.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},l.prototype.getAABB=function(t){return i&&r.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},l.prototype.createProxies=function(t,e){i&&r.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var n=0;n<this.m_proxyCount;++n){var o=this.m_proxies[n];this.m_shape.computeAABB(o.aabb,e,n),o.proxyId=t.createProxy(o.aabb,o)}},l.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var n=this.m_proxies[e];t.destroyProxy(n.proxyId),n.proxyId=null}this.m_proxyCount=0},l.prototype.synchronize=function(t,e,n){for(var i=0;i<this.m_proxyCount;++i){var r=this.m_proxies[i],o=new u,s=new u;this.m_shape.computeAABB(o,e,r.childIndex),this.m_shape.computeAABB(s,n,r.childIndex),r.aabb.combine(o,s);var c=a.sub(n.p,e.p);t.moveProxy(r.proxyId,r.aabb,c)}},l.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},l.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},l.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},l.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},l.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,n=e.getFixtureA(),i=e.getFixtureB();n!=this&&i!=this||e.flagForFiltering(),t=t.next}var r=this.m_body.getWorld();if(null!=r)for(var o=r.m_broadPhase,s=0;s<this.m_proxyCount;++s)o.touchProxy(this.m_proxies[s].proxyId)}},l.prototype.shouldCollide=function(t){return t.m_filterGroupIndex==this.m_filterGroupIndex&&0!=t.m_filterGroupIndex?t.m_filterGroupIndex>0:0!=(t.m_filterMaskBits&this.m_filterCategoryBits)&&0!=(t.m_filterCategoryBits&this.m_filterMaskBits)}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var r=n(7),o=n(2),s=n(1),a=n(82),u=n(84),c=n(41),h=n(21),l={gravity:s.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function f(t){if(!(this instanceof f))return new f(t);t&&s.isValid(t)&&(t={gravity:t}),t=r(t,l),this.m_solver=new u(this),this.m_broadPhase=new a,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=s.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.m_stepCount=0,this.addPair=this.createContact.bind(this)}f.prototype.getBodyList=function(){return this.m_bodyList},f.prototype.getJointList=function(){return this.m_jointList},f.prototype.getContactList=function(){return this.m_contactList},f.prototype.getBodyCount=function(){return this.m_bodyCount},f.prototype.getJointCount=function(){return this.m_jointCount},f.prototype.getContactCount=function(){return this.m_contactCount},f.prototype.setGravity=function(t){this.m_gravity=t},f.prototype.getGravity=function(){return this.m_gravity},f.prototype.isLocked=function(){return this.m_locked},f.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},f.prototype.getAllowSleeping=function(){return this.m_allowSleep},f.prototype.setWarmStarting=function(t){this.m_warmStarting=t},f.prototype.getWarmStarting=function(){return this.m_warmStarting},f.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},f.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},f.prototype.setSubStepping=function(t){this.m_subStepping=t},f.prototype.getSubStepping=function(){return this.m_subStepping},f.prototype.setAutoClearForces=function(t){this.m_clearForces=t},f.prototype.getAutoClearForces=function(){return this.m_clearForces},f.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},f.prototype.queryAABB=function(t,e){i&&o.assert("function"==typeof e);var n=this.m_broadPhase;this.m_broadPhase.query(t,function(t){var i=n.getUserData(t);return e(i.fixture)})},f.prototype.rayCast=function(t,e,n){i&&o.assert("function"==typeof n);var r=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},function(t,e){var i=r.getUserData(e),o=i.fixture,a=i.childIndex,u={};if(o.rayCast(u,t,a)){var c=u.fraction,h=s.add(s.mul(1-c,t.p1),s.mul(c,t.p2));return n(o,h,u.normal,c)}return t.maxFraction})},f.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},f.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},f.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},f.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},f.prototype.shiftOrigin=function(t){if(i&&o.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var n=this.m_jointList;n;n=n.m_next)n.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},f.prototype.createBody=function(t,e){if(i&&o.assert(0==this.isLocked()),this.isLocked())return null;t&&s.isValid(t)&&(t={position:t,angle:e});var n=new c(this,t);return n.m_prev=null,n.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=n),this.m_bodyList=n,++this.m_bodyCount,n},f.prototype.createDynamicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},f.prototype.createKinematicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},f.prototype.destroyBody=function(t){if(i&&o.assert(this.m_bodyCount>0),i&&o.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var n=e;e=e.next,this.publish("remove-joint",n.joint),this.destroyJoint(n.joint),t.m_jointList=e}t.m_jointList=null;for(var r=t.m_contactList;r;){var s=r;r=r.next,this.destroyContact(s.contact),t.m_contactList=r}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var u=a;a=a.m_next,this.publish("remove-fixture",u),u.destroyProxies(this.m_broadPhase),t.m_fixtureList=a}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},f.prototype.createJoint=function(t){if(i&&o.assert(!!t.m_bodyA),i&&o.assert(!!t.m_bodyB),i&&o.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},f.prototype.destroyJoint=function(t){if(i&&o.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,n=t.m_bodyB;if(e.setAwake(!0),n.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,i&&o.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var r=n.getContactList();r;)r.other==e&&r.contact.flagForFiltering(),r=r.next;this.publish("remove-joint",t)}};var p=new u.TimeStep;f.prototype.step=function(t,e,n){if((0|e)!==e&&(e=0),e=e||this.m_velocityIterations,n=n||this.m_positionIterations,this.m_stepCount++,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,p.reset(t),p.velocityIterations=e,p.positionIterations=n,p.warmStarting=this.m_warmStarting,p.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(p);for(var i=this.m_bodyList;i;i=i.getNext())0!=i.m_islandFlag&&(i.isStatic()||i.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(p),this.m_clearForces&&this.clearForces(),this.m_locked=!1},f.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},f.prototype.createContact=function(t,e){var n=t.fixture,i=e.fixture,r=t.childIndex,o=e.childIndex,s=n.getBody(),a=i.getBody();if(s!=a){for(var u=a.getContactList();u;){if(u.other==s){var c=u.contact.getFixtureA(),l=u.contact.getFixtureB(),f=u.contact.getChildIndexA(),p=u.contact.getChildIndexB();if(c==n&&l==i&&f==r&&p==o)return;if(c==i&&l==n&&f==o&&p==r)return}u=u.next}if(0!=a.shouldCollide(s)&&0!=i.shouldCollide(n)){var m=h.create(n,r,i,o);null!=m&&(m.m_prev=null,null!=this.m_contactList&&(m.m_next=this.m_contactList,this.m_contactList.m_prev=m),this.m_contactList=m,++this.m_contactCount)}}},f.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var n=t.getFixtureA(),i=t.getFixtureB(),r=t.getChildIndexA(),o=t.getChildIndexB(),s=n.getBody(),a=i.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==i.shouldCollide(n)){this.destroyContact(t);continue}t.m_filterFlag=!1}var u=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=u||0!=c){var h=n.m_proxies[r].proxyId,l=i.m_proxies[o].proxyId;0!=this.m_broadPhase.testOverlap(h,l)?t.update(this):this.destroyContact(t)}}},f.prototype.destroyContact=function(t){h.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},f.prototype._listeners=null,f.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e?this:(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this)},f.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var n=this._listeners&&this._listeners[t];if(!n||!n.length)return this;var i=n.indexOf(e);return i>=0&&n.splice(i,1),this},f.prototype.publish=function(t,e,n,i){var r=this._listeners&&this._listeners[t];if(!r||!r.length)return 0;for(var o=0;o<r.length;o++)r[o].call(this,e,n,i);return r.length},f.prototype.beginContact=function(t){this.publish("begin-contact",t)},f.prototype.endContact=function(t){this.publish("end-contact",t)},f.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},f.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(5),o=n(2),s=n(83),a=n(1),u=n(0),c=n(18);function h(t){this.id=t,this.aabb=new c,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function l(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new s({create:function(){return new h}})}t.exports=l,h.prototype.isLeaf=function(){return null==this.child1},l.prototype.getUserData=function(t){var e=this.m_nodes[t];return i&&o.assert(!!e),e.userData},l.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return i&&o.assert(!!e),e.aabb},l.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},l.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},l.prototype.createProxy=function(t,e){i&&o.assert(c.isValid(t));var n=this.allocateNode();return n.aabb.set(t),c.extend(n.aabb,r.aabbExtension),n.userData=e,n.height=0,this.insertLeaf(n),n.id},l.prototype.destroyProxy=function(t){var e=this.m_nodes[t];i&&o.assert(!!e),i&&o.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},l.prototype.moveProxy=function(t,e,n){i&&o.assert(c.isValid(e)),i&&o.assert(!n||a.isValid(n));var s=this.m_nodes[t];return i&&o.assert(!!s),i&&o.assert(s.isLeaf()),!s.aabb.contains(e)&&(this.removeLeaf(s),s.aabb.set(e),e=s.aabb,c.extend(e,r.aabbExtension),n.x<0?e.lowerBound.x+=n.x*r.aabbMultiplier:e.upperBound.x+=n.x*r.aabbMultiplier,n.y<0?e.lowerBound.y+=n.y*r.aabbMultiplier:e.upperBound.y+=n.y*r.aabbMultiplier,this.insertLeaf(s),!0)},l.prototype.insertLeaf=function(t){if(i&&o.assert(c.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,n=this.m_root;0==n.isLeaf();){var r=n.child1,s=n.child2,a=n.aabb.getPerimeter(),h=new c;h.combine(n.aabb,e);var l,f,p=h.getPerimeter(),m=2*p,_=2*(p-a);if(r.isLeaf()){(y=new c).combine(e,r.aabb),l=y.getPerimeter()+_}else{(y=new c).combine(e,r.aabb);var d=r.aabb.getPerimeter();l=y.getPerimeter()-d+_}if(s.isLeaf()){(y=new c).combine(e,s.aabb),f=y.getPerimeter()+_}else{var y;(y=new c).combine(e,s.aabb);d=s.aabb.getPerimeter();f=y.getPerimeter()-d+_}if(m<l&&m<f)break;n=l<f?r:s}var v=n,g=v.parent,b=this.allocateNode();for(b.parent=g,b.userData=null,b.aabb.combine(e,v.aabb),b.height=v.height+1,null!=g?(g.child1==v?g.child1=b:g.child2=b,b.child1=v,b.child2=t,v.parent=b,t.parent=b):(b.child1=v,b.child2=t,v.parent=b,t.parent=b,this.m_root=b),n=t.parent;null!=n;){r=(n=this.balance(n)).child1,s=n.child2;i&&o.assert(null!=r),i&&o.assert(null!=s),n.height=1+u.max(r.height,s.height),n.aabb.combine(r.aabb,s.aabb),n=n.parent}},l.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,n=t.parent,i=n.parent;if(e=n.child1==t?n.child2:n.child1,null!=i){i.child1==n?i.child1=e:i.child2=e,e.parent=i,this.freeNode(n);for(var r=i;null!=r;){var o=(r=this.balance(r)).child1,s=r.child2;r.aabb.combine(o.aabb,s.aabb),r.height=1+u.max(o.height,s.height),r=r.parent}}else this.m_root=e,e.parent=null,this.freeNode(n)}else this.m_root=null},l.prototype.balance=function(t){i&&o.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var n=e.child1,r=e.child2,s=r.height-n.height;if(s>1){var a=r.child1,c=r.child2;return r.child1=e,r.parent=e.parent,e.parent=r,null!=r.parent?r.parent.child1==t?r.parent.child1=r:r.parent.child2=r:this.m_root=r,a.height>c.height?(r.child2=a,e.child2=c,c.parent=e,e.aabb.combine(n.aabb,c.aabb),r.aabb.combine(e.aabb,a.aabb),e.height=1+u.max(n.height,c.height),r.height=1+u.max(e.height,a.height)):(r.child2=c,e.child2=a,a.parent=e,e.aabb.combine(n.aabb,a.aabb),r.aabb.combine(e.aabb,c.aabb),e.height=1+u.max(n.height,a.height),r.height=1+u.max(e.height,c.height)),r}if(s<-1){var h=n.child1,l=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==e?n.parent.child1=n:n.parent.child2=n:this.m_root=n,h.height>l.height?(n.child2=h,e.child1=l,l.parent=e,e.aabb.combine(r.aabb,l.aabb),n.aabb.combine(e.aabb,h.aabb),e.height=1+u.max(r.height,l.height),n.height=1+u.max(e.height,h.height)):(n.child2=l,e.child1=h,h.parent=e,e.aabb.combine(r.aabb,h.aabb),n.aabb.combine(e.aabb,l.aabb),e.height=1+u.max(r.height,h.height),n.height=1+u.max(e.height,l.height)),n}return e},l.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},l.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),n=0,i=m.allocate().preorder();t=i.next();)t.height<0||(n+=t.aabb.getPerimeter());return m.release(i),n/e},l.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var n=ComputeHeight(e.child1),i=ComputeHeight(e.child2);return 1+u.max(n,i)},l.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&i&&o.assert(null==t.parent);var e=t.child1,n=t.child2;if(t.isLeaf())return i&&o.assert(null==e),i&&o.assert(null==n),void(i&&o.assert(0==t.height));i&&o.assert(e.parent==t),i&&o.assert(n.parent==t),this.validateStructure(e),this.validateStructure(n)}},l.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,n=t.child2;if(t.isLeaf())return i&&o.assert(null==e),i&&o.assert(null==n),void(i&&o.assert(0==t.height));var r=this.m_nodes[e].height,s=this.m_nodes[n].height,a=1+u.max(r,s);i&&o.assert(t.height==a);var h=new c;h.combine(e.aabb,n.aabb),i&&o.assert(c.areEqual(h,t.aabb)),this.validateMetrics(e),this.validateMetrics(n)}},l.prototype.validate=function(){ValidateStructure(this.m_root),ValidateMetrics(this.m_root),i&&o.assert(this.getHeight()==this.computeHeight())},l.prototype.getMaxBalance=function(){for(var t,e=0,n=m.allocate().preorder();t=n.next();)if(!(t.height<=1)){i&&o.assert(0==t.isLeaf());var r=u.abs(t.child2.height-t.child1.height);e=u.max(e,r)}return m.release(n),e},l.prototype.rebuildBottomUp=function(){for(var t,e=[],n=0,i=m.allocate().preorder();t=i.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[n]=t,++n):this.freeNode(t));for(m.release(i);n>1;){for(var r=1/0,o=-1,s=-1,a=0;a<n;++a)for(var h=e[a].aabb,l=a+1;l<n;++l){var f=e[l].aabb,p=new c;p.combine(h,f);var _=p.getPerimeter();_<r&&(o=a,s=l,r=_)}var d=e[o],y=e[s],v=this.allocateNode();v.child1=d,v.child2=y,v.height=1+u.max(d.height,y.height),v.aabb.combine(d.aabb,y.aabb),v.parent=null,d.parent=v,y.parent=v,e[s]=e[n-1],e[o]=v,--n}this.m_root=e[0],this.validate()},l.prototype.shiftOrigin=function(t){for(var e,n=m.allocate().preorder();e=n.next();){var i=e.aabb;i.lowerBound.x-=t.x,i.lowerBound.y-=t.y,i.upperBound.x-=t.x,i.upperBound.y-=t.y}m.release(n)},l.prototype.query=function(t,e){i&&o.assert("function"==typeof e);var n=p.allocate();for(n.push(this.m_root);n.length>0;){var r=n.pop();if(null!=r)if(c.testOverlap(r.aabb,t))if(r.isLeaf()){if(0==e(r.id))return}else n.push(r.child1),n.push(r.child2)}p.release(n)},l.prototype.rayCast=function(t,e){i&&o.assert("function"==typeof e);var n=t.p1,r=t.p2,s=a.sub(r,n);i&&o.assert(s.lengthSquared()>0),s.normalize();var h=a.cross(1,s),l=a.abs(h),m=t.maxFraction,_=new c,d=a.combine(1-m,n,m,r);_.combinePoints(n,d);var y=p.allocate(),v=f.allocate();for(y.push(this.m_root);y.length>0;){var g=y.pop();if(null!=g&&0!=c.testOverlap(g.aabb,_)){var b=g.aabb.getCenter(),x=g.aabb.getExtents();if(!(u.abs(a.dot(h,a.sub(n,b)))-a.dot(l,x)>0))if(g.isLeaf()){v.p1=a.clone(t.p1),v.p2=a.clone(t.p2),v.maxFraction=m;var A=e(v,g.id);if(0==A)return;A>0&&(m=A,d=a.combine(1-m,n,m,r),_.combinePoints(n,d))}else y.push(g.child1),y.push(g.child2)}}p.release(y),f.release(v)};var f=new s({create:function(){return{}},release:function(t){}}),p=new s({create:function(){return[]},release:function(t){t.length=0}}),m=new s({create:function(){return new function(){var t=[],e=[];return{preorder:function(n){return t.length=0,t.push(n),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var n=t.length-1,i=t[n];if(0===e[n])return e[n]=1,i;if(1===e[n]&&(e[n]=2,i.child1))return t.push(i.child1),e.push(1),i.child1;if(2===e[n]&&(e[n]=3,i.child2))return t.push(i.child2),e.push(1),i.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}},release:function(t){t.close()}})},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t,e){var n=s.now();++a.toiCalls,t.state=v.e_unknown,t.t=e.tMax;var c=e.proxyA,h=e.proxyB,l=e.sweepA,d=e.sweepB;l.normalize(),d.normalize();var b=e.tMax,x=c.m_radius+h.m_radius,A=u.max(r.linearSlop,x-3*r.linearSlop),w=.25*r.linearSlop;i&&o.assert(A>w);var B=0,C=r.maxTOIIterations,S=0,E=new y,M=new m;for(M.proxyA=e.proxyA,M.proxyB=e.proxyB,M.useRadii=!1;;){var T=f.identity(),P=f.identity();l.getTransform(T,B),d.getTransform(P,B),M.transformA=T,M.transformB=P;var k=new _;if(p(k,E,M),k.distance<=0){t.state=v.e_overlapped,t.t=0;break}if(k.distance<A+w){t.state=v.e_touching,t.t=B;break}var I=new g;I.initialize(E,c,l,h,d,B);for(var R=!1,O=b,F=0;;){var z=I.findMinSeparation(O);I.indexA,I.indexB;if(z>A+w){t.state=v.e_separated,t.t=b,R=!0;break}if(z>A-w){B=O;break}var j=I.evaluate(B);I.indexA,I.indexB;if(j<A-w){t.state=v.e_failed,t.t=B,R=!0;break}if(j<=A+w){t.state=v.e_touching,t.t=B,R=!0;break}for(var D=0,L=B,V=O;;){var q;q=1&D?L+(A-j)*(V-L)/(z-j):.5*(L+V),++D,++a.toiRootIters;var U=I.evaluate(q);I.indexA,I.indexB;if(u.abs(U-A)<w){O=q;break}if(U>A?(L=q,j=U):(V=q,z=U),50==D)break}if(a.toiMaxRootIters=u.max(a.toiMaxRootIters,D),++F==r.maxPolygonVertices)break}if(++S,++a.toiIters,R)break;if(S==C){t.state=v.e_failed,t.t=B;break}}a.toiMaxIters=u.max(a.toiMaxIters,S);var N=s.diff(n);a.toiMaxTime=u.max(a.toiMaxTime,N),a.toiTime+=N},t.exports.Input=function(){this.proxyA=new d,this.proxyB=new d,this.sweepA=new l,this.sweepB=new l,this.tMax},t.exports.Output=v;var r=n(5),o=n(2),s=n(85),a=n(42),u=n(0),c=n(1),h=(n(8),n(9),n(11),n(3)),l=n(10),f=n(4),p=(n(12),n(13),n(32)),m=p.Input,_=p.Output,d=p.Proxy,y=p.Cache;function v(){this.state,this.t}v.e_unknown=0,v.e_failed=1,v.e_overlapped=2,v.e_touching=3,v.e_separated=4,a.toiTime=0,a.toiMaxTime=0,a.toiCalls=0,a.toiIters=0,a.toiMaxIters=0,a.toiRootIters=0,a.toiMaxRootIters=0;function g(){this.m_proxyA=new d,this.m_proxyB=new d,this.m_sweepA,this.m_sweepB,this.m_type,this.m_localPoint=c.zero(),this.m_axis=c.zero()}g.prototype.initialize=function(t,e,n,r,s,a){this.m_proxyA=e,this.m_proxyB=r;var u=t.count;i&&o.assert(0<u&&u<3),this.m_sweepA=n,this.m_sweepB=s;var l=f.identity(),p=f.identity();if(this.m_sweepA.getTransform(l,a),this.m_sweepB.getTransform(p,a),1==u){this.m_type=1;var m=this.m_proxyA.getVertex(t.indexA[0]),_=this.m_proxyB.getVertex(t.indexB[0]),d=f.mulVec2(l,m),y=f.mulVec2(p,_);return this.m_axis.setCombine(1,y,-1,d),w=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var v=r.getVertex(t.indexB[0]),g=r.getVertex(t.indexB[1]);this.m_axis=c.cross(c.sub(g,v),1),this.m_axis.normalize();var b=h.mulVec2(p.q,this.m_axis);this.m_localPoint=c.mid(v,g);y=f.mulVec2(p,this.m_localPoint),m=e.getVertex(t.indexA[0]),d=f.mulVec2(l,m);return(w=c.dot(d,b)-c.dot(y,b))<0&&(this.m_axis=c.neg(this.m_axis),w=-w),w}this.m_type=2;var x=this.m_proxyA.getVertex(t.indexA[0]),A=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=c.cross(c.sub(A,x),1),this.m_axis.normalize();b=h.mulVec2(l.q,this.m_axis);this.m_localPoint=c.mid(x,A);var w;d=f.mulVec2(l,this.m_localPoint),_=this.m_proxyB.getVertex(t.indexB[0]),y=f.mulVec2(p,_);return(w=c.dot(y,b)-c.dot(d,b))<0&&(this.m_axis=c.neg(this.m_axis),w=-w),w},g.prototype.compute=function(t,e){var n=f.identity(),r=f.identity();switch(this.m_sweepA.getTransform(n,e),this.m_sweepB.getTransform(r,e),this.m_type){case 1:if(t){var s=h.mulTVec2(n.q,this.m_axis),a=h.mulTVec2(r.q,c.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(s),this.indexB=this.m_proxyB.getSupport(a)}var u=this.m_proxyA.getVertex(this.indexA),l=this.m_proxyB.getVertex(this.indexB),p=f.mulVec2(n,u),m=f.mulVec2(r,l);return c.dot(m,this.m_axis)-c.dot(p,this.m_axis);case 2:var _=h.mulVec2(n.q,this.m_axis);p=f.mulVec2(n,this.m_localPoint);if(t){a=h.mulTVec2(r.q,c.neg(_));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(a)}l=this.m_proxyB.getVertex(this.indexB),m=f.mulVec2(r,l);return c.dot(m,_)-c.dot(p,_);case 3:_=h.mulVec2(r.q,this.m_axis),m=f.mulVec2(r,this.m_localPoint);if(t){s=h.mulTVec2(n.q,c.neg(_));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(s)}u=this.m_proxyA.getVertex(this.indexA),p=f.mulVec2(n,u);return c.dot(p,_)-c.dot(m,_);default:return i&&o.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},g.prototype.findMinSeparation=function(t){return this.compute(!0,t)},g.prototype.evaluate=function(t){return this.compute(!1,t)}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=y;var r=n(2),o=n(7),s=n(6),a=n(5),u=n(0),c=n(1),h=n(8),l=n(9),f=n(11),p=n(3),m=(n(10),n(4),n(12),n(13),n(15)),_=0;y.TYPE="revolute-joint",y._super=m,y.prototype=s(y._super.prototype);var d={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function y(t,e,n,i){if(!(this instanceof y))return new y(t,e,n,i);t=o(t,d),m.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=y.TYPE,this.m_localAnchorA=i?e.getLocalPoint(i):t.localAnchorA||c.zero(),this.m_localAnchorB=i?n.getLocalPoint(i):t.localAnchorB||c.zero(),this.m_referenceAngle=u.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_impulse=h(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new f,this.m_motorMass,this.m_limitState=_}y.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},y.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},y.prototype.getReferenceAngle=function(){return this.m_referenceAngle},y.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},y.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},y.prototype.isMotorEnabled=function(){return this.m_enableMotor},y.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},y.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},y.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},y.prototype.getMotorSpeed=function(){return this.m_motorSpeed},y.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},y.prototype.isLimitEnabled=function(){return this.m_enableLimit},y.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},y.prototype.getLowerLimit=function(){return this.m_lowerAngle},y.prototype.getUpperLimit=function(){return this.m_upperAngle},y.prototype.setLimits=function(t,e){i&&r.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return c.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},y.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},y.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,h=p.neo(e),l=p.neo(r);this.m_rA=p.mulVec2(h,c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=p.mulVec2(l,c.sub(this.m_localAnchorB,this.m_localCenterB));var f=this.m_invMassA,m=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,v=d+y===0;if(this.m_mass.ex.x=f+m+this.m_rA.y*this.m_rA.y*d+this.m_rB.y*this.m_rB.y*y,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*d-this.m_rB.y*this.m_rB.x*y,this.m_mass.ez.x=-this.m_rA.y*d-this.m_rB.y*y,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=f+m+this.m_rA.x*this.m_rA.x*d+this.m_rB.x*this.m_rB.x*y,this.m_mass.ez.y=this.m_rA.x*d+this.m_rB.x*y,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=d+y,this.m_motorMass=d+y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||v)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==v){var g=r-e-this.m_referenceAngle;u.abs(this.m_upperAngle-this.m_lowerAngle)<2*a.angularSlop?this.m_limitState=3:g<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):g>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=_,this.m_impulse.z=0)}else this.m_limitState=_;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var b=c.neo(this.m_impulse.x,this.m_impulse.y);n.subMul(f,b),i-=d*(c.cross(this.m_rA,b)+this.m_motorImpulse+this.m_impulse.z),o.addMul(m,b),s+=y*(c.cross(this.m_rB,b)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,f=a+l===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==f){var p=r-n-this.m_motorSpeed,m=-this.m_motorMass*p,d=this.m_motorImpulse,y=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=u.clamp(this.m_motorImpulse+m,-y,y),n-=a*(m=this.m_motorImpulse-d),r+=l*m}if(this.m_enableLimit&&this.m_limitState!=_&&0==f){var v=c.zero();v.addCombine(1,i,1,c.cross(r,this.m_rB)),v.subCombine(1,e,1,c.cross(n,this.m_rA));var g=r-n;p=h(v.x,v.y,g),m=h.neg(this.m_mass.solve33(p));if(3==this.m_limitState)this.m_impulse.add(m);else if(1==this.m_limitState){if(this.m_impulse.z+m.z<0){var b=c.combine(-1,v,this.m_impulse.z,c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(b);m.x=x.x,m.y=x.y,m.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(m)}else if(2==this.m_limitState){if(this.m_impulse.z+m.z>0){b=c.combine(-1,v,this.m_impulse.z,c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(b);m.x=x.x,m.y=x.y,m.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(m)}var A=c.neo(m.x,m.y);e.subMul(o,A),n-=a*(c.cross(this.m_rA,A)+m.z),i.addMul(s,A),r+=l*(c.cross(this.m_rB,A)+m.z)}else{(p=c.zero()).addCombine(1,i,1,c.cross(r,this.m_rB)),p.subCombine(1,e,1,c.cross(n,this.m_rA));m=this.m_mass.solve22(c.neg(p));this.m_impulse.x+=m.x,this.m_impulse.y+=m.y,e.subMul(o,m),n-=a*c.cross(this.m_rA,m),i.addMul(s,m),r+=l*c.cross(this.m_rB,m)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},y.prototype.solvePositionConstraints=function(t){var e,n=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,s=p.neo(i),h=p.neo(o),f=0,m=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&this.m_limitState!=_&&0==m){var d=o-i-this.m_referenceAngle,y=0;if(3==this.m_limitState){var v=u.clamp(d-this.m_lowerAngle,-a.maxAngularCorrection,a.maxAngularCorrection);y=-this.m_motorMass*v,f=u.abs(v)}else if(1==this.m_limitState){f=-(v=d-this.m_lowerAngle),v=u.clamp(v+a.angularSlop,-a.maxAngularCorrection,0),y=-this.m_motorMass*v}else if(2==this.m_limitState){f=v=d-this.m_upperAngle,v=u.clamp(v-a.angularSlop,0,a.maxAngularCorrection),y=-this.m_motorMass*v}i-=this.m_invIA*y,o+=this.m_invIB*y}s.set(i),h.set(o);var g=p.mulVec2(s,c.sub(this.m_localAnchorA,this.m_localCenterA)),b=p.mulVec2(h,c.sub(this.m_localAnchorB,this.m_localCenterB));(v=c.zero()).addCombine(1,r,1,b),v.subCombine(1,n,1,g),e=v.length();var x=this.m_invMassA,A=this.m_invMassB,w=this.m_invIA,B=this.m_invIB,C=new l;C.ex.x=x+A+w*g.y*g.y+B*b.y*b.y,C.ex.y=-w*g.x*g.y-B*b.x*b.y,C.ey.x=C.ex.y,C.ey.y=x+A+w*g.x*g.x+B*b.x*b.x;var S=c.neg(C.solve(v));return n.subMul(x,S),i-=w*c.cross(g,S),r.addMul(A,S),o+=B*c.cross(b,S),this.m_bodyA.c_position.c.set(n),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=o,e<=a.linearSlop&&f<=a.angularSlop}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=y;var r=n(2),o=n(7),s=n(6),a=n(5),u=n(0),c=n(1),h=n(8),l=n(9),f=n(11),p=n(3),m=(n(10),n(4),n(12),n(13),n(15)),_=0;y.TYPE="prismatic-joint",y._super=m,y.prototype=s(y._super.prototype);var d={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function y(t,e,n,i,r){if(!(this instanceof y))return new y(t,e,n,i,r);t=o(t,d),m.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=y.TYPE,this.m_localAnchorA=i?e.getLocalPoint(i):t.localAnchorA||c.zero(),this.m_localAnchorB=i?n.getLocalPoint(i):t.localAnchorB||c.zero(),this.m_localXAxisA=r?e.getLocalVector(r):t.localAxisA||c.neo(1,0),this.m_localXAxisA.normalize(),this.m_localYAxisA=c.cross(1,this.m_localXAxisA),this.m_referenceAngle=u.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_impulse=h(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=_,this.m_axis=c.zero(),this.m_perp=c.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new f,this.m_motorMass}y.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},y.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},y.prototype.getLocalAxisA=function(){return this.m_localXAxisA},y.prototype.getReferenceAngle=function(){return this.m_referenceAngle},y.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),n=c.sub(e,t),i=this.m_bodyA.getWorldVector(this.m_localXAxisA);return c.dot(n,i)},y.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,n=p.mulVec2(t.m_xf.q,c.sub(this.m_localAnchorA,t.m_sweep.localCenter)),i=p.mulVec2(e.m_xf.q,c.sub(this.m_localAnchorB,e.m_sweep.localCenter)),r=c.add(t.m_sweep.c,n),o=c.add(e.m_sweep.c,i),s=c.sub(o,r),a=p.mulVec2(t.m_xf.q,this.m_localXAxisA),u=t.m_linearVelocity,h=e.m_linearVelocity,l=t.m_angularVelocity,f=e.m_angularVelocity;return c.dot(s,c.cross(l,a))+c.dot(a,c.sub(c.addCross(h,f,i),c.addCross(u,l,n)))},y.prototype.isLimitEnabled=function(){return this.m_enableLimit},y.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},y.prototype.getLowerLimit=function(){return this.m_lowerTranslation},y.prototype.getUpperLimit=function(){return this.m_upperTranslation},y.prototype.setLimits=function(t,e){i&&r.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},y.prototype.isMotorEnabled=function(){return this.m_enableMotor},y.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},y.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},y.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},y.prototype.getMotorSpeed=function(){return this.m_motorSpeed},y.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return c.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},y.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},y.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,f=p.neo(n),m=p.neo(s),d=p.mulVec2(f,c.sub(this.m_localAnchorA,this.m_localCenterA)),y=p.mulVec2(m,c.sub(this.m_localAnchorB,this.m_localCenterB)),v=c.zero();v.addCombine(1,o,1,y),v.subCombine(1,e,1,d);var g=this.m_invMassA,b=this.m_invMassB,x=this.m_invIA,A=this.m_invIB;this.m_axis=p.mulVec2(f,this.m_localXAxisA),this.m_a1=c.cross(c.add(v,d),this.m_axis),this.m_a2=c.cross(y,this.m_axis),this.m_motorMass=g+b+x*this.m_a1*this.m_a1+A*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=p.mulVec2(f,this.m_localYAxisA),this.m_s1=c.cross(c.add(v,d),this.m_perp),this.m_s2=c.cross(y,this.m_perp);c.cross(d,this.m_perp);var w=g+b+x*this.m_s1*this.m_s1+A*this.m_s2*this.m_s2,B=x*this.m_s1+A*this.m_s2,C=x*this.m_s1*this.m_a1+A*this.m_s2*this.m_a2,S=x+A;0==S&&(S=1);var E=x*this.m_a1+A*this.m_a2,M=g+b+x*this.m_a1*this.m_a1+A*this.m_a2*this.m_a2;if(this.m_K.ex.set(w,B,C),this.m_K.ey.set(B,S,E),this.m_K.ez.set(C,E,M),this.m_enableLimit){var T=c.dot(this.m_axis,v);u.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*a.linearSlop?this.m_limitState=3:T<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):T>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=_,this.m_impulse.z=0)}else this.m_limitState=_,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var P=c.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),k=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,I=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;i.subMul(g,P),r-=x*k,h.addMul(b,P),l+=A*I}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=l},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var f=c.dot(this.m_axis,c.sub(i,e))+this.m_a2*r-this.m_a1*n,p=this.m_motorMass*(this.m_motorSpeed-f),m=this.m_motorImpulse,d=t.dt*this.m_maxMotorForce;this.m_motorImpulse=u.clamp(this.m_motorImpulse+p,-d,d),p=this.m_motorImpulse-m;var y=c.mul(p,this.m_axis),v=p*this.m_a1,g=p*this.m_a2;e.subMul(o,y),n-=a*v,i.addMul(s,y),r+=l*g}var b=c.zero();if(b.x+=c.dot(this.m_perp,i)+this.m_s2*r,b.x-=c.dot(this.m_perp,e)+this.m_s1*n,b.y=r-n,this.m_enableLimit&&this.m_limitState!=_){var x=0;x+=c.dot(this.m_axis,i)+this.m_a2*r,x-=c.dot(this.m_axis,e)+this.m_a1*n;f=h(b.x,b.y,x);var A=h(this.m_impulse),w=this.m_K.solve33(h.neg(f));this.m_impulse.add(w),1==this.m_limitState?this.m_impulse.z=u.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=u.min(this.m_impulse.z,0));var B=c.combine(-1,b,-(this.m_impulse.z-A.z),c.neo(this.m_K.ez.x,this.m_K.ez.y)),C=c.add(this.m_K.solve22(B),c.neo(A.x,A.y));this.m_impulse.x=C.x,this.m_impulse.y=C.y,w=h.sub(this.m_impulse,A);y=c.combine(w.x,this.m_perp,w.z,this.m_axis),v=w.x*this.m_s1+w.y+w.z*this.m_a1,g=w.x*this.m_s2+w.y+w.z*this.m_a2;e.subMul(o,y),n-=a*v,i.addMul(s,y),r+=l*g}else{w=this.m_K.solve22(c.neg(b));this.m_impulse.x+=w.x,this.m_impulse.y+=w.y;y=c.mul(w.x,this.m_perp),v=w.x*this.m_s1+w.y,g=w.x*this.m_s2+w.y;e.subMul(o,y),n-=a*v,i.addMul(s,y),r+=l*g}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},y.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=p.neo(n),s=p.neo(r),m=this.m_invMassA,_=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,v=p.mulVec2(o,c.sub(this.m_localAnchorA,this.m_localCenterA)),g=p.mulVec2(s,c.sub(this.m_localAnchorB,this.m_localCenterB)),b=c.sub(c.add(i,g),c.add(e,v)),x=p.mulVec2(o,this.m_localXAxisA),A=c.cross(c.add(b,v),x),w=c.cross(g,x),B=p.mulVec2(o,this.m_localYAxisA),C=c.cross(c.add(b,v),B),S=c.cross(g,B),E=h(),M=c.zero();M.x=c.dot(B,b),M.y=r-n-this.m_referenceAngle;var T=u.abs(M.x),P=u.abs(M.y),k=a.linearSlop,I=a.maxLinearCorrection,R=!1,O=0;if(this.m_enableLimit){var F=c.dot(x,b);u.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*k?(O=u.clamp(F,-I,I),T=u.max(T,u.abs(F)),R=!0):F<=this.m_lowerTranslation?(O=u.clamp(F-this.m_lowerTranslation+k,-I,0),T=u.max(T,this.m_lowerTranslation-F),R=!0):F>=this.m_upperTranslation&&(O=u.clamp(F-this.m_upperTranslation-k,0,I),T=u.max(T,F-this.m_upperTranslation),R=!0)}if(R){var z=m+_+d*C*C+y*S*S,j=d*C+y*S,D=d*C*A+y*S*w;0==(U=d+y)&&(U=1);var L=d*A+y*w,V=m+_+d*A*A+y*w*w;(N=new f).ex.set(z,j,D),N.ey.set(j,U,L),N.ez.set(D,L,V);var q=h();q.x=M.x,q.y=M.y,q.z=O,E=N.solve33(h.neg(q))}else{var U,N;z=m+_+d*C*C+y*S*S,j=d*C+y*S;0==(U=d+y)&&(U=1),(N=new l).ex.set(z,j),N.ey.set(j,U);var Y=N.solve(c.neg(M));E.x=Y.x,E.y=Y.y,E.z=0}var W=c.combine(E.x,B,E.z,x),G=E.x*C+E.y+E.z*A,H=E.x*S+E.y+E.z*w;return e.subMul(m,W),n-=d*G,i.addMul(_,W),r+=y*H,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=i,this.m_bodyB.c_position.a=r,T<=a.linearSlop&&P<=a.angularSlop}},function(t,e){t.exports=p5},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hooks=void 0;var i=n(19),r=n(17);e.Hooks=function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.merge=function(t){var n=t.setup,i=t.beforeRender,r=t.afterRender;return e.mergeSetup(n),e.mergeBeforeRender(i),e.mergeAfterRender(r),e},this.mergeSetup=function(t){return e.setup=e.setup.concat(t),e},this.mergeBeforeRender=function(t){return e.beforeRender=e.beforeRender.concat(t),e},this.mergeAfterRender=function(t){return e.afterRender=e.afterRender.concat(t),e},this.runHooks=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.forEach(function(t){t.apply(void 0,n)})},this.runSetup=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e.runHooks.apply(e,[e.setup].concat(n))},this.runBeforeRender=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e.runHooks.apply(e,[e.beforeRender].concat(n))},this.runAfterRender=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e.runHooks.apply(e,[e.afterRender].concat(n))},this.addTo=function(t,e){(0,i.isFunction)(e)&&e!==r.NoopFunc&&t.push(e)},this.addToSetup=function(t){e.addTo(e.setup,t)},this.addToBeforeRender=function(t){e.addTo(e.beforeRender,t)},this.addToAfterRender=function(t){e.addTo(e.afterRender,t)},this.setup=[],this.beforeRender=[],this.afterRender=[]}},function(t,e,n){"use strict";var i={CREATE_STATE_ENTRY:null};(0,n(107).mirrorInPlace)(i);var r={WEB_SOCKET_PORT:"4001",WEB_SOCKET_SERVER:"http://localhost:4001",BindingActions:i};t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={Background:n(109).Background};e.default=i,t.exports=e.default},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,r=t.indexOf("["),o=t.indexOf("]");-1!=r&&-1!=o&&(t=t.substring(0,r)+t.substring(r,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},u=14;u--;)a[i[u]]=s[u]||"";return-1!=r&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(e){t.exports=function(t){return n&&e.Buffer.isBuffer(t)||i&&(t instanceof e.ArrayBuffer||r(t))};var n="function"==typeof e.Buffer&&"function"==typeof e.Buffer.isBuffer,i="function"==typeof e.ArrayBuffer,r=i&&"function"==typeof e.ArrayBuffer.isView?e.ArrayBuffer.isView:function(t){return t.buffer instanceof e.ArrayBuffer}}).call(this,n(14))},function(t,e,n){var i=n(123),r=n(74),o=n(25),s=n(47),a=n(75),u=n(76),c=n(37)("socket.io-client:manager"),h=n(73),l=n(142),f=Object.prototype.hasOwnProperty;function p(t,e){if(!(this instanceof p))return new p(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=p,p.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},p.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},p.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},o(p.prototype),p.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},p.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},p.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(t,e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",function(){r.onopen(),t&&t()}),s=a(n,"error",function(e){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u);var h=setTimeout(function(){c("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",u)},u);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(o),this.subs.push(s),this},p.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",u(this,"ondata"))),this.subs.push(a(t,"ping",u(this,"onping"))),this.subs.push(a(t,"pong",u(this,"onpong"))),this.subs.push(a(t,"error",u(this,"onerror"))),this.subs.push(a(t,"close",u(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(t){this.decoder.add(t)},p.prototype.ondecoded=function(t){this.emit("packet",t)},p.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},p.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new r(this,t,e),this.nsps[t]=n;var i=this;n.on("connecting",o),n.on("connect",function(){n.id=i.generateId(t)}),this.autoConnect&&o()}function o(){~h(i.connecting,n)||i.connecting.push(n)}return n},p.prototype.destroy=function(t){var e=h(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},p.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var i=0;i<n.length;i++)e.engine.write(n[i],t.options);e.encoding=!1,e.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},p.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){(function(t){var i=n(49),r=n(126),o=n(138),s=n(139);e.polling=function(e){var n=!1,s=!1,a=!1!==e.jsonp;if(t.location){var u="https:"===location.protocol,c=location.port;c||(c=u?443:80),n=e.hostname!==location.hostname||c!==e.port,s=e.secure!==u}if(e.xdomain=n,e.xscheme=s,"open"in new i(e)&&!e.forceJSONP)return new r(e);if(!a)throw new Error("JSONP disabled");return new o(e)},e.websocket=s}).call(this,n(14))},function(t,e,n){var i=n(50),r=n(38),o=n(26),s=n(39),a=n(72),u=n(40)("engine.io-client:polling");t.exports=h;var c=null!=new(n(49))({xdomain:!1}).responseType;function h(t){var e=t&&t.forceBase64;c&&!e||(this.supportsBinary=!1),i.call(this,t)}s(h,i),h.prototype.name="polling",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(u("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){u("pre-pause polling complete"),--i||n()})),this.writable||(u("we are currently writing - waiting to pause"),i++,this.once("drain",function(){u("pre-pause writing complete"),--i||n()}))}else n()},h.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},h.prototype.onData=function(t){var e=this;u("polling got data %s",t);o.decodePayload(t,this.socket.binaryType,function(t,n,i){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},h.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},h.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},h.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){(function(e){var i=n(48),r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.exports=function t(n){if(!n||"object"!=typeof n)return!1;if(i(n)){for(var r=0,a=n.length;r<a;r++)if(t(n[r]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||s&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&t(n[u]))return!0;return!1}}).call(this,n(128).Buffer)},function(t,e,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,u=0;function c(t){var e="";do{e=r[t%o]+e,t=Math.floor(t/o)}while(t>0);return e}function h(){var t=c(+new Date);return t!==i?(a=0,i=t):t+"."+c(a++)}for(;u<o;u++)s[r[u]]=u;h.encode=c,h.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*o+s[t.charAt(u)];return e},t.exports=h},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},function(t,e,n){var i=n(47),r=n(25),o=n(141),s=n(75),a=n(76),u=n(37)("socket.io-client:socket"),c=n(38),h=n(71);t.exports=p;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=r.prototype.emit;function p(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},p.prototype.emit=function(t){if(l.hasOwnProperty(t))return f.apply(this,arguments),this;var e=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:h(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},p.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},p.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},p.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===i.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},p.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},p.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=o(arguments);u("sending ack %j",r),e.packet({type:h(r)?i.BINARY_ACK:i.ACK,id:t,data:r})}}},p.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(t){return this.flags.compress=t,this},p.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(160));e.Events=(0,i.default)({ControlPointsAdded:null})},function(t,e,n){"use strict";var i=n(20),r=l(i),o=l(n(156)),s=l(n(158)),a=l(n(161)),u=l(n(163)),c=l(n(164)),h=l(n(166));function l(t){return t&&t.__esModule?t:{default:t}}var f={images:{img:u.default}},p=[o.default,c.default,h.default,s.default,a.default],m={assets:f,scene:(0,i.scene)(800,450)};r.default.with(p,m).init()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControllerOld=void 0;var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();r(n(52)),n(30),r(n(53)),n(35);function r(t){return t&&t.__esModule?t:{default:t}}e.ControllerOld=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hooks={beforeRender:[]}}return i(t,[{key:"setup",value:function(){}},{key:"skipRender",value:function(){return!1}},{key:"shouldScale",value:function(){return!1}},{key:"beforeRender",value:function(){}},{key:"afterRender",value:function(){}},{key:"destroy",value:function(){}}]),t}()},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=(n(5),n(2)),o=n(0),s=n(18),a=n(58);function u(){this.m_tree=new a,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}t.exports=u,u.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},u.prototype.testOverlap=function(t,e){var n=this.m_tree.getFatAABB(t),i=this.m_tree.getFatAABB(e);return s.testOverlap(n,i)},u.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},u.prototype.getProxyCount=function(){return this.m_proxyCount},u.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},u.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},u.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},u.prototype.query=function(t,e){this.m_tree.query(t,e)},u.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},u.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},u.prototype.createProxy=function(t,e){i&&r.assert(s.isValid(t));var n=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(n),n},u.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},u.prototype.moveProxy=function(t,e,n){i&&r.assert(s.isValid(e)),this.m_tree.moveProxy(t,e,n)&&this.bufferMove(t)},u.prototype.touchProxy=function(t){this.bufferMove(t)},u.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},u.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},u.prototype.updatePairs=function(t){for(i&&r.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},u.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=o.min(t,this.m_queryProxyId),n=o.max(t,this.m_queryProxyId),i=this.m_tree.getUserData(e),r=this.m_tree.getUserData(n);return this.m_callback(i,r),!0}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t){var e=[],n=t.max||1/0,i=t.create,r=t.allocate,o=t.release,s=t.discard,a=0,u=0,c=0,h=0;this.max=function(t){return"number"==typeof t?(n=t,this):n},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof i?i():{}),u++,"function"==typeof r&&r(t),t},this.release=function(t){e.length<n?(c++,"function"==typeof o&&o(t),e.push(t)):(h++,"function"==typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+u+" <"+c+" -"+h+" ="+e.length+"/"+n}}},function(t,e,n){var i="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=y,t.exports.TimeStep=d;var o=n(5),s=n(2),a=n(1),u=n(0),c=n(41),h=n(21),l=n(15),f=n(59),p=f.Input,m=f.Output,_=n(32);_.Input,_.Output,_.Proxy,_.Cache;function d(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function y(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}d.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},y.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},y.prototype.addBody=function(t){r&&s.assert(t instanceof c,"Not a Body!",t),this.m_bodies.push(t)},y.prototype.addContact=function(t){r&&s.assert(t instanceof h,"Not a Contact!",t),this.m_contacts.push(t)},y.prototype.addJoint=function(t){r&&s.assert(t instanceof l,"Not a Joint!",t),this.m_joints.push(t)},y.prototype.solveWorld=function(t){for(var e=this.m_world,n=e.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1;for(var i=e.m_contactList;i;i=i.m_next)i.m_islandFlag=!1;for(var o=e.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var a=this.m_stack,u=e.m_bodyList;u;u=u.m_next)if(0,!u.m_islandFlag&&0!=u.isAwake()&&0!=u.isActive()&&!u.isStatic()){for(this.clear(),a.push(u),u.m_islandFlag=!0;a.length>0;){n=a.pop();if(r&&s.assert(1==n.isActive()),this.addBody(n),n.setAwake(!0),!n.isStatic()){for(var c=n.m_contactList;c;c=c.next){var h=c.contact;if(!h.m_islandFlag&&(0!=h.isEnabled()&&0!=h.isTouching())){var l=h.m_fixtureA.m_isSensor,f=h.m_fixtureB.m_isSensor;if(!l&&!f)this.addContact(h),h.m_islandFlag=!0,(m=c.other).m_islandFlag||(a.push(m),m.m_islandFlag=!0)}}for(var p=n.m_jointList;p;p=p.next){var m;if(1!=p.joint.m_islandFlag)0!=(m=p.other).isActive()&&(this.addJoint(p.joint),p.joint.m_islandFlag=!0,m.m_islandFlag||(a.push(m),m.m_islandFlag=!0))}}}this.solveIsland(t);for(var _=0;_<this.m_bodies.length;++_){(n=this.m_bodies[_]).isStatic()&&(n.m_islandFlag=!1)}}},y.prototype.solveIsland=function(t){for(var e=this.m_world,n=e.m_gravity,r=e.m_allowSleep,s=t.dt,c=0;c<this.m_bodies.length;++c){var h=this.m_bodies[c],l=a.clone(h.m_sweep.c),f=h.m_sweep.a,p=a.clone(h.m_linearVelocity),m=h.m_angularVelocity;h.m_sweep.c0.set(h.m_sweep.c),h.m_sweep.a0=h.m_sweep.a,h.isDynamic()&&(p.addMul(s*h.m_gravityScale,n),p.addMul(s*h.m_invMass,h.m_force),m+=s*h.m_invI*h.m_torque,p.mul(1/(1+s*h.m_linearDamping)),m*=1/(1+s*h.m_angularDamping)),h.c_position.c=l,h.c_position.a=f,h.c_velocity.v=p,h.c_velocity.w=m}for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].initConstraint(t)}i&&this.printBodies("M: ");for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].initVelocityConstraint(t)}if(i&&this.printBodies("R: "),t.warmStarting)for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].warmStartConstraint(t)}i&&this.printBodies("Q: ");for(c=0;c<this.m_joints.length;++c){this.m_joints[c].initVelocityConstraints(t)}i&&this.printBodies("E: ");for(c=0;c<t.velocityIterations;++c){for(var _=0;_<this.m_joints.length;++_){this.m_joints[_].solveVelocityConstraints(t)}for(_=0;_<this.m_contacts.length;++_){this.m_contacts[_].solveVelocityConstraint(t)}}i&&this.printBodies("D: ");for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].storeConstraintImpulses(t)}i&&this.printBodies("C: ");for(c=0;c<this.m_bodies.length;++c){h=this.m_bodies[c],l=a.clone(h.c_position.c),f=h.c_position.a,p=a.clone(h.c_velocity.v),m=h.c_velocity.w;var d=a.mul(s,p);if(a.lengthSquared(d)>o.maxTranslationSquared){var y=o.maxTranslation/d.length();p.mul(y)}var v=s*m;if(v*v>o.maxRotationSquared)m*=y=o.maxRotation/u.abs(v);l.addMul(s,p),f+=s*m,h.c_position.c.set(l),h.c_position.a=f,h.c_velocity.v.set(p),h.c_velocity.w=m}i&&this.printBodies("B: ");var g=!1;for(c=0;c<t.positionIterations;++c){var b=0;for(_=0;_<this.m_contacts.length;++_){var x=this.m_contacts[_].solvePositionConstraint(t);b=u.min(b,x)}var A=b>=-3*o.linearSlop,w=!0;for(_=0;_<this.m_joints.length;++_){var B=this.m_joints[_].solvePositionConstraints(t);w=w&&B}if(A&&w){g=!0;break}}i&&this.printBodies("L: ");for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).m_sweep.c.set(h.c_position.c),h.m_sweep.a=h.c_position.a,h.m_linearVelocity.set(h.c_velocity.v),h.m_angularVelocity=h.c_velocity.w,h.synchronizeTransform()}if(this.postSolveIsland(),r){var C=1/0,S=o.linearSleepToleranceSqr,E=o.angularSleepToleranceSqr;for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).isStatic()||(0==h.m_autoSleepFlag||h.m_angularVelocity*h.m_angularVelocity>E||a.lengthSquared(h.m_linearVelocity)>S?(h.m_sleepTime=0,C=0):(h.m_sleepTime+=s,C=u.min(C,h.m_sleepTime)))}if(C>=o.timeToSleep&&g)for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).setAwake(!1)}}},y.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var n=this.m_bodies[e];s.debug(t,n.c_position.a,n.c_position.c.x,n.c_position.c.y,n.c_velocity.w,n.c_velocity.v.x,n.c_velocity.v.y)}};var v=new d;y.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var n=e.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1,n.m_sweep.alpha0=0;for(var a=e.m_contactList;a;a=a.m_next)a.m_toiFlag=!1,a.m_islandFlag=!1,a.m_toiCount=0,a.m_toi=1}for(;;){var c=null,h=1;for(a=e.m_contactList;a;a=a.m_next)if(0!=a.isEnabled()&&!(a.m_toiCount>o.maxSubSteps)){var l=1;if(a.m_toiFlag)l=a.m_toi;else{var _=a.getFixtureA(),d=a.getFixtureB();if(_.isSensor()||d.isSensor())continue;var y=_.getBody(),g=d.getBody();r&&s.assert(y.isDynamic()||g.isDynamic());var b=y.isAwake()&&!y.isStatic(),x=g.isAwake()&&!g.isStatic();if(0==b&&0==x)continue;var A=y.isBullet()||!y.isDynamic(),w=g.isBullet()||!g.isDynamic();if(0==A&&0==w)continue;var B=y.m_sweep.alpha0;y.m_sweep.alpha0<g.m_sweep.alpha0?(B=g.m_sweep.alpha0,y.m_sweep.advance(B)):g.m_sweep.alpha0<y.m_sweep.alpha0&&(B=y.m_sweep.alpha0,g.m_sweep.advance(B)),r&&s.assert(B<1);var C=a.getChildIndexA(),S=a.getChildIndexB(),E=(y.m_sweep,g.m_sweep,new p);E.proxyA.set(_.getShape(),C),E.proxyB.set(d.getShape(),S),E.sweepA.set(y.m_sweep),E.sweepB.set(g.m_sweep),E.tMax=1;var M=new m;f(M,E);var T=M.t;l=M.state==m.e_touching?u.min(B+(1-B)*T,1):1,a.m_toi=l,a.m_toiFlag=!0}l<h&&(c=a,h=l)}if(null==c||1-10*u.EPSILON<h){e.m_stepComplete=!0;break}_=c.getFixtureA(),d=c.getFixtureB(),y=_.getBody(),g=d.getBody();var P=y.m_sweep.clone(),k=g.m_sweep.clone();if(y.advance(h),g.advance(h),c.update(e),c.m_toiFlag=!1,++c.m_toiCount,0!=c.isEnabled()&&0!=c.isTouching()){y.setAwake(!0),g.setAwake(!0),this.clear(),this.addBody(y),this.addBody(g),this.addContact(c),y.m_islandFlag=!0,g.m_islandFlag=!0,c.m_islandFlag=!0;for(var I=[y,g],R=0;R<I.length;++R){if((V=I[R]).isDynamic())for(var O=V.m_contactList;O;O=O.next){var F=O.contact;if(!F.m_islandFlag){var z=O.other;if(!z.isDynamic()||V.isBullet()||z.isBullet()){var j=F.m_fixtureA.m_isSensor,D=F.m_fixtureB.m_isSensor;if(!j&&!D){var L=z.m_sweep.clone();0==z.m_islandFlag&&z.advance(h),F.update(e),0!=F.isEnabled()&&0!=F.isTouching()?(F.m_islandFlag=!0,this.addContact(F),z.m_islandFlag||(z.m_islandFlag=!0,z.isStatic()||z.setAwake(!0),this.addBody(z))):(z.m_sweep.set(L),z.synchronizeTransform())}}}}}v.reset((1-h)*t.dt),v.dtRatio=1,v.positionIterations=20,v.velocityIterations=t.velocityIterations,v.warmStarting=!1,this.solveIslandTOI(v,y,g);for(R=0;R<this.m_bodies.length;++R){var V;if((V=this.m_bodies[R]).m_islandFlag=!1,V.isDynamic()){V.synchronizeFixtures();for(O=V.m_contactList;O;O=O.next)O.contact.m_toiFlag=!1,O.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else c.setEnabled(!1),y.m_sweep.set(P),g.m_sweep.set(k),y.synchronizeTransform(),g.synchronizeTransform()}if(i)for(n=e.m_bodyList;n;n=n.m_next)a=n.m_sweep.c,n.m_sweep.a,n.m_linearVelocity,n.m_angularVelocity},y.prototype.solveIslandTOI=function(t,e,n){this.m_world;for(var i=0;i<this.m_bodies.length;++i){(l=this.m_bodies[i]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity}for(var i=0;i<this.m_contacts.length;++i){this.m_contacts[i].initConstraint(t)}for(i=0;i<t.positionIterations;++i){for(var r=0,s=0;s<this.m_contacts.length;++s){var c=this.m_contacts[s].solvePositionConstraintTOI(t,e,n);r=u.min(r,c)}if(r>=-1.5*o.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,n.m_sweep.c0.set(n.c_position.c),n.m_sweep.a0=n.c_position.a;for(i=0;i<this.m_contacts.length;++i){this.m_contacts[i].initVelocityConstraint(t)}for(i=0;i<t.velocityIterations;++i)for(s=0;s<this.m_contacts.length;++s){this.m_contacts[s].solveVelocityConstraint(t)}var h=t.dt;for(i=0;i<this.m_bodies.length;++i){var l=this.m_bodies[i],f=a.clone(l.c_position.c),p=l.c_position.a,m=a.clone(l.c_velocity.v),_=l.c_velocity.w,d=a.mul(h,m);if(a.dot(d,d)>o.maxTranslationSquared){var y=o.maxTranslation/d.length();m.mul(y)}var v=h*_;if(v*v>o.maxRotationSquared)_*=y=o.maxRotation/u.abs(v);f.addMul(h,m),p+=h*_,l.c_position.c=f,l.c_position.a=p,l.c_velocity.v=m,l.c_velocity.w=_,l.m_sweep.c=f,l.m_sweep.a=p,l.m_linearVelocity=m,l.m_angularVelocity=_,l.synchronizeTransform()}this.postSolveIsland()},y.prototype.postSolveIsland=function(){for(var t=new function(){this.normalImpulses=[],this.tangentImpulses=[]},e=0;e<this.m_contacts.length;++e){for(var n=this.m_contacts[e],i=0;i<n.v_points.length;++i)t.normalImpulses.push(n.v_points[i].normalImpulse),t.tangentImpulses.push(n.v_points[i].tangentImpulse);this.m_world.postSolve(n,t)}}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports.now=function(){return Date.now()},t.exports.diff=function(t){return Date.now()-t}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=o;n(2);var i=n(6),r=n(27);function o(t,e,n,i){if(!(this instanceof o))return new o(t,e,n,i);o._super.call(this),this._setAsBox(t,e,n,i)}o._super=r,o.prototype=i(o._super.prototype),o.TYPE="polygon"},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(2),o=(n(6),n(0),n(4)),s=n(1),a=(n(5),n(16),n(21)),u=n(22),c=n(33);function h(t,e,n,i,r){t.pointCount=0;var a=o.mulVec2(n,e.m_p),c=o.mulVec2(r,i.m_p),h=s.distanceSquared(c,a),l=e.m_radius+i.m_radius;h>l*l||(t.type=u.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex)}a.addType(c.TYPE,c.TYPE,function(t,e,n,o,s,a,u){i&&r.assert(n.getType()==c.TYPE),i&&r.assert(a.getType()==c.TYPE),h(t,n.getShape(),e,a.getShape(),s)}),e.CollideCircles=h},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(2),o=(n(6),n(0),n(4)),s=n(1),a=(n(3),n(5),n(16),n(21)),u=n(22),c=n(34),h=n(43),l=n(33);function f(t,e,n,a,c){t.pointCount=0;var h=o.mulTVec2(n,o.mulVec2(c,a.m_p)),l=e.m_vertex1,f=e.m_vertex2,p=s.sub(f,l),m=s.dot(p,s.sub(f,h)),_=s.dot(p,s.sub(h,l)),d=e.m_radius+a.m_radius;if(_<=0){var y=s.clone(l),v=s.sub(h,y);if(s.dot(v,v)>d*d)return;if(e.m_hasVertex0){var g=e.m_vertex0,b=l,x=s.sub(b,g);if(s.dot(x,s.sub(b,h))>0)return}return t.type=u.e_circles,t.localNormal.setZero(),t.localPoint.set(y),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex)}if(m<=0){y=s.clone(f),v=s.sub(h,y);if(s.dot(v,v)>d*d)return;if(e.m_hasVertex3){var A=e.m_vertex3,w=f,B=s.sub(A,w);if(s.dot(B,s.sub(h,w))>0)return}return t.type=u.e_circles,t.localNormal.setZero(),t.localPoint.set(y),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex)}var C=s.dot(p,p);i&&r.assert(C>0);y=s.combine(m/C,l,_/C,f),v=s.sub(h,y);if(!(s.dot(v,v)>d*d)){var S=s.neo(-p.y,p.x);s.dot(S,s.sub(h,l))<0&&S.set(-S.x,-S.y),S.normalize(),t.type=u.e_faceA,t.localNormal=S,t.localPoint.set(l),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}}a.addType(c.TYPE,l.TYPE,function(t,e,n,o,s,a,u){i&&r.assert(n.getType()==c.TYPE),i&&r.assert(a.getType()==l.TYPE);var h=n.getShape(),p=a.getShape();f(t,h,e,p,s)}),a.addType(h.TYPE,l.TYPE,function(t,e,n,o,s,a,u){i&&r.assert(n.getType()==h.TYPE),i&&r.assert(a.getType()==l.TYPE);var p=n.getShape(),m=new c;p.getChildEdge(m,o);var _=m,d=a.getShape();f(t,_,e,d,s)})},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(2),o=(n(0),n(4)),s=n(3),a=n(1),u=(n(18),n(5)),c=n(22),h=n(21),l=(n(16),n(27));function f(t,e,n,i){for(var r=t.m_count,u=n.m_count,c=t.m_normals,h=t.m_vertices,l=n.m_vertices,p=o.mulTXf(i,e),m=0,_=-1/0,d=0;d<r;++d){for(var y=s.mulVec2(p.q,c[d]),v=o.mulVec2(p,h[d]),g=1/0,b=0;b<u;++b){var x=a.dot(y,l[b])-a.dot(y,v);x<g&&(g=x)}g>_&&(_=g,m=d)}f._maxSeparation=_,f._bestIndex=m}function p(t,e,n,h,l){t.pointCount=0;var p=e.m_radius+h.m_radius;f(e,n,h,l);var m=f._bestIndex,_=f._maxSeparation;if(!(_>p)){f(h,l,e,n);var d=f._bestIndex,y=f._maxSeparation;if(!(y>p)){var v,g,b,x,A,w;y>_+.1*u.linearSlop?(v=h,g=e,b=l,x=n,A=d,t.type=c.e_faceB,w=1):(v=e,g=h,b=n,x=l,A=m,t.type=c.e_faceA,w=0);var B=[new c.clipVertex,new c.clipVertex];!function(t,e,n,u,h,l){var f=e.m_normals,p=h.m_count,m=h.m_vertices,_=h.m_normals;i&&r.assert(0<=u&&u<e.m_count);for(var d=s.mulT(l.q,s.mulVec2(n.q,f[u])),y=0,v=1/0,g=0;g<p;++g){var b=a.dot(d,_[g]);b<v&&(v=b,y=g)}var x=y,A=x+1<p?x+1:0;t[0].v=o.mulVec2(l,m[x]),t[0].id.cf.indexA=u,t[0].id.cf.indexB=x,t[0].id.cf.typeA=c.e_face,t[0].id.cf.typeB=c.e_vertex,t[1].v=o.mulVec2(l,m[A]),t[1].id.cf.indexA=u,t[1].id.cf.indexB=A,t[1].id.cf.typeA=c.e_face,t[1].id.cf.typeB=c.e_vertex}(B,v,b,A,g,x);var C=v.m_count,S=v.m_vertices,E=A,M=A+1<C?A+1:0,T=S[E],P=S[M],k=a.sub(P,T);k.normalize();var I=a.cross(k,1),R=a.combine(.5,T,.5,P),O=s.mulVec2(b.q,k),F=a.cross(O,1);T=o.mulVec2(b,T),P=o.mulVec2(b,P);var z=a.dot(F,T),j=-a.dot(O,T)+p,D=a.dot(O,P)+p,L=[new c.clipVertex,new c.clipVertex],V=[new c.clipVertex,new c.clipVertex];if(!(c.clipSegmentToLine(L,B,a.neg(O),j,E)<2||c.clipSegmentToLine(V,L,O,D,M)<2)){t.localNormal=I,t.localPoint=R;for(var q=0,U=0;U<V.length;++U){if(a.dot(F,V[U].v)-z<=p){var N=t.points[q];if(N.localPoint.set(o.mulTVec2(x,V[U].v)),N.id=V[U].id,w){var Y=N.id.cf,W=Y.indexA,G=Y.indexB,H=Y.typeA,J=Y.typeB;Y.indexA=G,Y.indexB=W,Y.typeA=J,Y.typeB=H}++q}}t.pointCount=q}}}}t.exports=p,h.addType(l.TYPE,l.TYPE,function(t,e,n,o,s,a,u){i&&r.assert(n.getType()==l.TYPE),i&&r.assert(a.getType()==l.TYPE),p(t,n.getShape(),e,a.getShape(),s)})},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(2),o=n(0),s=n(4),a=(n(3),n(1)),u=(n(18),n(5),n(22)),c=n(21),h=(n(16),n(33)),l=n(27);c.addType(l.TYPE,h.TYPE,function(t,e,n,c,f,p,m){i&&r.assert(n.getType()==l.TYPE),i&&r.assert(p.getType()==h.TYPE),function(t,e,n,i,r){t.pointCount=0;for(var c=s.mulVec2(r,i.m_p),h=s.mulTVec2(n,c),l=0,f=-1/0,p=e.m_radius+i.m_radius,m=e.m_count,_=e.m_vertices,d=e.m_normals,y=0;y<m;++y){var v=a.dot(d[y],a.sub(h,_[y]));if(v>p)return;v>f&&(f=v,l=y)}var g=l,b=g+1<m?g+1:0,x=_[g],A=_[b];if(f<o.EPSILON)return t.pointCount=1,t.type=u.e_faceA,t.localNormal.set(d[l]),t.localPoint.setCombine(.5,x,.5,A),t.points[0].localPoint=i.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex);var w=a.dot(a.sub(h,x),a.sub(A,x)),B=a.dot(a.sub(h,A),a.sub(x,A));if(w<=0){if(a.distanceSquared(h,x)>p*p)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.setCombine(1,h,-1,x),t.localNormal.normalize(),t.localPoint=x,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}else if(B<=0){if(a.distanceSquared(h,A)>p*p)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.setCombine(1,h,-1,A),t.localNormal.normalize(),t.localPoint.set(A),t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}else{var C=a.mid(x,A),f=a.dot(h,d[g])-a.dot(C,d[g]);if(f>p)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.set(d[g]),t.localPoint.set(C),t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}}(t,n.getShape(),e,p.getShape(),f)})},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,r=n(2),o=(n(6),n(0)),s=n(4),a=n(1),u=n(3),c=n(5),h=(n(16),n(21)),l=n(22),f=n(34),p=n(43),m=n(27);h.addType(f.TYPE,m.TYPE,function(t,e,n,o,s,a,u){i&&r.assert(n.getType()==f.TYPE),i&&r.assert(a.getType()==m.TYPE),w(t,n.getShape(),e,a.getShape(),s)}),h.addType(p.TYPE,m.TYPE,function(t,e,n,o,s,a,u){i&&r.assert(n.getType()==p.TYPE),i&&r.assert(a.getType()==m.TYPE);var c=n.getShape(),h=new f;c.getChildEdge(h,o),w(t,h,e,a.getShape(),s)});var _=-1,d=1,y=2;function v(){this.type,this.index,this.separation}var g=new v,b=new v,x=new function(){this.vertices=[],this.normals=[],this.count=0},A=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=a.zero(),this.sideNormal1=a.zero(),this.sideOffset1,this.sideNormal2=a.zero(),this.sideOffset2};function w(t,e,n,i,r){var h=s.mulTXf(n,r),f=s.mulVec2(h,i.m_centroid),p=e.m_vertex0,m=e.m_vertex1,v=e.m_vertex2,w=e.m_vertex3,B=e.m_hasVertex0,C=e.m_hasVertex3,S=a.sub(v,m);S.normalize();var E,M=a.neo(S.y,-S.x),T=a.dot(M,a.sub(f,m)),P=0,k=0,I=!1,R=!1;if(B){var O=a.sub(m,p);O.normalize();var F=a.neo(O.y,-O.x);I=a.cross(O,S)>=0,P=a.dot(F,f)-a.dot(F,p)}if(C){var z=a.sub(w,v);z.normalize();var j=a.neo(z.y,-z.x);R=a.cross(S,z)>0,k=a.dot(j,f)-a.dot(j,v)}var D=a.zero(),L=a.zero(),V=a.zero();B&&C?I&&R?(E=P>=0||T>=0||k>=0)?(D.set(M),L.set(F),V.set(j)):(D.setMul(-1,M),L.setMul(-1,M),V.setMul(-1,M)):I?(E=P>=0||T>=0&&k>=0)?(D.set(M),L.set(F),V.set(M)):(D.setMul(-1,M),L.setMul(-1,j),V.setMul(-1,M)):R?(E=k>=0||P>=0&&T>=0)?(D.set(M),L.set(M),V.set(j)):(D.setMul(-1,M),L.setMul(-1,M),V.setMul(-1,F)):(E=P>=0&&T>=0&&k>=0)?(D.set(M),L.set(M),V.set(M)):(D.setMul(-1,M),L.setMul(-1,j),V.setMul(-1,F)):B?I?(E=P>=0||T>=0)?(D.set(M),L.set(F),V.setMul(-1,M)):(D.setMul(-1,M),L.set(M),V.setMul(-1,M)):(E=P>=0&&T>=0)?(D.set(M),L.set(M),V.setMul(-1,M)):(D.setMul(-1,M),L.set(M),V.setMul(-1,F)):C?R?(E=T>=0||k>=0)?(D.set(M),L.setMul(-1,M),V.set(j)):(D.setMul(-1,M),L.setMul(-1,M),V.set(M)):(E=T>=0&&k>=0)?(D.set(M),L.setMul(-1,M),V.set(M)):(D.setMul(-1,M),L.setMul(-1,j),V.set(M)):(E=T>=0)?(D.set(M),L.setMul(-1,M),V.setMul(-1,M)):(D.setMul(-1,M),L.set(M),V.set(M)),x.count=i.m_count;for(var q=0;q<i.m_count;++q)x.vertices[q]=s.mulVec2(h,i.m_vertices[q]),x.normals[q]=u.mulVec2(h.q,i.m_normals[q]);var U=2*c.polygonRadius;t.pointCount=0,g.type=d,g.index=E?0:1,g.separation=1/0;for(q=0;q<x.count;++q){(Y=a.dot(D,a.sub(x.vertices[q],m)))<g.separation&&(g.separation=Y)}if(g.type!=_&&!(g.separation>U)){b.type=_,b.index=-1,b.separation=-1/0;var N=a.neo(-D.y,D.x);for(q=0;q<x.count;++q){var Y,W=a.neg(x.normals[q]),G=a.dot(W,a.sub(x.vertices[q],m)),H=a.dot(W,a.sub(x.vertices[q],v));if((Y=o.min(G,H))>U){b.type=y,b.index=q,b.separation=Y;break}if(a.dot(W,N)>=0){if(a.dot(a.sub(W,V),D)<-c.angularSlop)continue}else if(a.dot(a.sub(W,L),D)<-c.angularSlop)continue;Y>b.separation&&(b.type=y,b.index=q,b.separation=Y)}if(!(b.type!=_&&b.separation>U)){var J;J=b.type==_?g:b.separation>.98*g.separation+.001?b:g;var X=[new l.clipVertex,new l.clipVertex];if(J.type==d){t.type=l.e_faceA;var Z=0,K=a.dot(D,x.normals[0]);for(q=1;q<x.count;++q){var $=a.dot(D,x.normals[q]);$<K&&(K=$,Z=q)}var Q=Z,tt=Q+1<x.count?Q+1:0;X[0].v=x.vertices[Q],X[0].id.cf.indexA=0,X[0].id.cf.indexB=Q,X[0].id.cf.typeA=l.e_face,X[0].id.cf.typeB=l.e_vertex,X[1].v=x.vertices[tt],X[1].id.cf.indexA=0,X[1].id.cf.indexB=tt,X[1].id.cf.typeA=l.e_face,X[1].id.cf.typeB=l.e_vertex,E?(A.i1=0,A.i2=1,A.v1=m,A.v2=v,A.normal.set(M)):(A.i1=1,A.i2=0,A.v1=v,A.v2=m,A.normal.setMul(-1,M))}else t.type=l.e_faceB,X[0].v=m,X[0].id.cf.indexA=0,X[0].id.cf.indexB=J.index,X[0].id.cf.typeA=l.e_vertex,X[0].id.cf.typeB=l.e_face,X[1].v=v,X[1].id.cf.indexA=0,X[1].id.cf.indexB=J.index,X[1].id.cf.typeA=l.e_vertex,X[1].id.cf.typeB=l.e_face,A.i1=J.index,A.i2=A.i1+1<x.count?A.i1+1:0,A.v1=x.vertices[A.i1],A.v2=x.vertices[A.i2],A.normal.set(x.normals[A.i1]);A.sideNormal1.set(A.normal.y,-A.normal.x),A.sideNormal2.setMul(-1,A.sideNormal1),A.sideOffset1=a.dot(A.sideNormal1,A.v1),A.sideOffset2=a.dot(A.sideNormal2,A.v2);var et=[new l.clipVertex,new l.clipVertex],nt=[new l.clipVertex,new l.clipVertex];if(!(l.clipSegmentToLine(et,X,A.sideNormal1,A.sideOffset1,A.i1)<c.maxManifoldPoints||l.clipSegmentToLine(nt,et,A.sideNormal2,A.sideOffset2,A.i2)<c.maxManifoldPoints)){J.type==d?(t.localNormal=a.clone(A.normal),t.localPoint=a.clone(A.v1)):(t.localNormal=a.clone(i.m_normals[A.i1]),t.localPoint=a.clone(i.m_vertices[A.i1]));var it=0;for(q=0;q<c.maxManifoldPoints;++q){if(a.dot(A.normal,a.sub(nt[q].v,A.v1))<=U){var rt=t.points[it];J.type==d?(rt.localPoint=s.mulT(h,nt[q].v),rt.id=nt[q].id):(rt.localPoint=nt[q].v,rt.id.cf.typeA=nt[q].id.cf.typeB,rt.id.cf.typeB=nt[q].id.cf.typeA,rt.id.cf.indexA=nt[q].id.cf.indexB,rt.id.cf.indexB=nt[q].id.cf.indexA),++it}}t.pointCount=it}}}}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var i=n(7),r=n(6),o=n(5),s=n(0),a=n(1),u=(n(8),n(9),n(11),n(3)),c=(n(10),n(4),n(12),n(13),n(15));l.TYPE="distance-joint",l._super=c,l.prototype=r(l._super.prototype);var h={frequencyHz:0,dampingRatio:0};function l(t,e,n,r,o){if(!(this instanceof l))return new l(t,e,n,r,o);if(n&&r&&"m_type"in r&&"x"in n&&"y"in n){var u=n;n=r,r=u}t=i(t,h),c.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=l.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||a.zero(),this.m_localAnchorB=o?n.getLocalPoint(o):t.localAnchorB||a.zero(),this.m_length=s.isFinite(t.length)?t.length:a.distance(e.getWorldPoint(this.m_localAnchorA),n.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}l.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},l.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},l.prototype.setLength=function(t){this.m_length=t},l.prototype.getLength=function(){return this.m_length},l.prototype.setFrequency=function(t){this.m_frequencyHz=t},l.prototype.getFrequency=function(){return this.m_frequencyHz},l.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},l.prototype.getDampingRatio=function(){return this.m_dampingRatio},l.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},l.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},l.prototype.getReactionForce=function(t){return a.mul(this.m_impulse,this.m_u).mul(t)},l.prototype.getReactionTorque=function(t){return 0},l.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,f=this.m_bodyB.c_velocity.w,p=u.neo(n),m=u.neo(h);this.m_rA=u.mulVec2(p,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=u.mulVec2(m,a.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=a.sub(a.add(c,this.m_rB),a.add(e,this.m_rA));var _=this.m_u.length();_>o.linearSlop?this.m_u.mul(1/_):this.m_u.set(0,0);var d=a.cross(this.m_rA,this.m_u),y=a.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=0!=v?1/v:0,this.m_frequencyHz>0){var g=_-this.m_length,b=2*s.PI*this.m_frequencyHz,x=2*this.m_mass*this.m_dampingRatio*b,A=this.m_mass*b*b,w=t.dt;this.m_gamma=w*(x+w*A),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=g*w*A*this.m_gamma,v+=this.m_gamma,this.m_mass=0!=v?1/v:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var B=a.mul(this.m_impulse,this.m_u);i.subMul(this.m_invMassA,B),r-=this.m_invIA*a.cross(this.m_rA,B),l.addMul(this.m_invMassB,B),f+=this.m_invIB*a.cross(this.m_rB,B)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(l),this.m_bodyB.c_velocity.w=f},l.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=a.add(e,a.cross(n,this.m_rA)),s=a.add(i,a.cross(r,this.m_rB)),u=a.dot(this.m_u,s)-a.dot(this.m_u,o),c=-this.m_mass*(u+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=c;var h=a.mul(c,this.m_u);e.subMul(this.m_invMassA,h),n-=this.m_invIA*a.cross(this.m_rA,h),i.addMul(this.m_invMassB,h),r+=this.m_invIB*a.cross(this.m_rB,h),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(i),this.m_bodyB.c_velocity.w=r},l.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,c=u.neo(n),h=u.neo(r),l=u.mulSub(c,this.m_localAnchorA,this.m_localCenterA),f=u.mulSub(h,this.m_localAnchorB,this.m_localCenterB),p=a.sub(a.add(i,f),a.add(e,l)),m=p.normalize()-this.m_length;m=s.clamp(m,-o.maxLinearCorrection,o.maxLinearCorrection);var _=-this.m_mass*m,d=a.mul(_,p);return e.subMul(this.m_invMassA,d),n-=this.m_invIA*a.cross(l,d),i.addMul(this.m_invMassB,d),r+=this.m_invIB*a.cross(f,d),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,s.abs(m)<o.linearSlop}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var r=n(2),o=n(7),s=n(6),a=(n(5),n(0)),u=n(1),c=(n(8),n(9)),h=(n(11),n(3)),l=(n(10),n(4),n(12),n(13),n(15));p.TYPE="friction-joint",p._super=l,p.prototype=s(p._super.prototype);var f={maxForce:0,maxTorque:0};function p(t,e,n,i){if(!(this instanceof p))return new p(t,e,n,i);t=o(t,f),l.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=p.TYPE,this.m_localAnchorA=i?e.getLocalPoint(i):t.localAnchorA||u.zero(),this.m_localAnchorB=i?n.getLocalPoint(i):t.localAnchorB||u.zero(),this.m_linearImpulse=u.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}p.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},p.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},p.prototype.setMaxForce=function(t){i&&r.assert(a.isFinite(t)&&t>=0),this.m_maxForce=t},p.prototype.getMaxForce=function(){return this.m_maxForce},p.prototype.setMaxTorque=function(t){i&&r.assert(a.isFinite(t)&&t>=0),this.m_maxTorque=t},p.prototype.getMaxTorque=function(){return this.m_maxTorque},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return u.mul(t,this.m_linearImpulse)},p.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=h.neo(e),l=h.neo(r);this.m_rA=h.mulVec2(a,u.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mulVec2(l,u.sub(this.m_localAnchorB,this.m_localCenterB));var f=this.m_invMassA,p=this.m_invMassB,m=this.m_invIA,_=this.m_invIB,d=new c;if(d.ex.x=f+p+m*this.m_rA.y*this.m_rA.y+_*this.m_rB.y*this.m_rB.y,d.ex.y=-m*this.m_rA.x*this.m_rA.y-_*this.m_rB.x*this.m_rB.y,d.ey.x=d.ex.y,d.ey.y=f+p+m*this.m_rA.x*this.m_rA.x+_*this.m_rB.x*this.m_rB.x,this.m_linearMass=d.getInverse(),this.m_angularMass=m+_,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var y=u.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.subMul(f,y),i-=m*(u.cross(this.m_rA,y)+this.m_angularImpulse),o.addMul(p,y),s+=_*(u.cross(this.m_rB,y)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB,f=t.dt,p=r-n,m=-this.m_angularMass*p,_=this.m_angularImpulse,d=f*this.m_maxTorque;this.m_angularImpulse=a.clamp(this.m_angularImpulse+m,-d,d),n-=h*(m=this.m_angularImpulse-_),r+=l*m;p=u.sub(u.add(i,u.cross(r,this.m_rB)),u.add(e,u.cross(n,this.m_rA))),m=u.neg(c.mulVec2(this.m_linearMass,p)),_=this.m_linearImpulse;this.m_linearImpulse.add(m);d=f*this.m_maxForce;this.m_linearImpulse.lengthSquared()>d*d&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(d)),m=u.sub(this.m_linearImpulse,_),e.subMul(o,m),n-=h*u.cross(this.m_rA,m),i.addMul(s,m),r+=l*u.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},p.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var r=n(2),o=n(7),s=n(6),a=n(5),u=n(0),c=n(1),h=(n(8),n(9),n(11),n(3)),l=(n(10),n(4),n(12),n(13),n(15)),f=n(60),p=n(61);_.TYPE="gear-joint",_._super=l,_.prototype=s(_._super.prototype);var m={ratio:1};function _(t,e,n,s,a,d){if(!(this instanceof _))return new _(t,e,n,s,a,d);var y,v;t=o(t,m),l.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=_.TYPE,i&&r.assert(s.m_type===f.TYPE||s.m_type===p.TYPE),i&&r.assert(a.m_type===f.TYPE||a.m_type===p.TYPE),this.m_joint1=s||t.joint1,this.m_joint2=a||t.joint2,this.m_ratio=u.isFinite(d)?d:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var g=this.m_bodyA.m_xf,b=this.m_bodyA.m_sweep.a,x=this.m_bodyC.m_xf,A=this.m_bodyC.m_sweep.a;if(this.m_type1===f.TYPE){var w=this.m_joint1;this.m_localAnchorC=w.m_localAnchorA,this.m_localAnchorA=w.m_localAnchorB,this.m_referenceAngleA=w.m_referenceAngle,this.m_localAxisC=c.zero(),y=b-A-this.m_referenceAngleA}else{var B=this.m_joint1;this.m_localAnchorC=B.m_localAnchorA,this.m_localAnchorA=B.m_localAnchorB,this.m_referenceAngleA=B.m_referenceAngle,this.m_localAxisC=B.m_localXAxisA;var C=this.m_localAnchorC,S=h.mulTVec2(x.q,c.add(h.mul(g.q,this.m_localAnchorA),c.sub(g.p,x.p)));y=c.dot(S,this.m_localAxisC)-c.dot(C,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var E=this.m_bodyB.m_xf,M=this.m_bodyB.m_sweep.a,T=this.m_bodyD.m_xf,P=this.m_bodyD.m_sweep.a;if(this.m_type2===f.TYPE){w=this.m_joint2;this.m_localAnchorD=w.m_localAnchorA,this.m_localAnchorB=w.m_localAnchorB,this.m_referenceAngleB=w.m_referenceAngle,this.m_localAxisD=c.zero(),v=M-P-this.m_referenceAngleB}else{B=this.m_joint2;this.m_localAnchorD=B.m_localAnchorA,this.m_localAnchorB=B.m_localAnchorB,this.m_referenceAngleB=B.m_referenceAngle,this.m_localAxisD=B.m_localXAxisA;var k=this.m_localAnchorD,I=h.mulTVec2(T.q,c.add(h.mul(E.q,this.m_localAnchorB),c.sub(E.p,T.p)));v=c.dot(I,this.m_localAxisD)-c.dot(k,this.m_localAxisD)}this.m_constant=y+this.m_ratio*v,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}_.prototype.getJoint1=function(){return this.m_joint1},_.prototype.getJoint2=function(){return this.m_joint2},_.prototype.setRatio=function(t){i&&r.assert(u.isFinite(t)),this.m_ratio=t},_.prototype.getRatio=function(){return this.m_ratio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(t){return c.mul(this.m_impulse,this.m_JvAC).mul(t)},_.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},_.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,u=this.m_bodyC.c_velocity.v,l=this.m_bodyC.c_velocity.w,p=this.m_bodyD.c_position.a,m=this.m_bodyD.c_velocity.v,_=this.m_bodyD.c_velocity.w,d=h.neo(e),y=h.neo(r),v=h.neo(a),g=h.neo(p);if(this.m_mass=0,this.m_type1==f.TYPE)this.m_JvAC=c.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var b=h.mulVec2(v,this.m_localAxisC),x=h.mulSub(v,this.m_localAnchorC,this.m_lcC),A=h.mulSub(d,this.m_localAnchorA,this.m_lcA);this.m_JvAC=b,this.m_JwC=c.cross(x,b),this.m_JwA=c.cross(A,b),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==f.TYPE)this.m_JvBD=c.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{b=h.mulVec2(g,this.m_localAxisD);var w=h.mulSub(g,this.m_localAnchorD,this.m_lcD),B=h.mulSub(y,this.m_localAnchorB,this.m_lcB);this.m_JvBD=c.mul(this.m_ratio,b),this.m_JwD=this.m_ratio*c.cross(w,b),this.m_JwB=this.m_ratio*c.cross(B,b),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(n.addMul(this.m_mA*this.m_impulse,this.m_JvAC),i+=this.m_iA*this.m_impulse*this.m_JwA,o.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,u.subMul(this.m_mC*this.m_impulse,this.m_JvAC),l-=this.m_iC*this.m_impulse*this.m_JwC,m.subMul(this.m_mD*this.m_impulse,this.m_JvBD),_-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(o),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(u),this.m_bodyC.c_velocity.w=l,this.m_bodyD.c_velocity.v.set(m),this.m_bodyD.c_velocity.w=_},_.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,u=this.m_bodyD.c_velocity.w,h=c.dot(this.m_JvAC,e)-c.dot(this.m_JvAC,o)+c.dot(this.m_JvBD,i)-c.dot(this.m_JvBD,a);h+=this.m_JwA*n-this.m_JwC*s+(this.m_JwB*r-this.m_JwD*u);var l=-this.m_mass*h;this.m_impulse+=l,e.addMul(this.m_mA*l,this.m_JvAC),n+=this.m_iA*l*this.m_JwA,i.addMul(this.m_mB*l,this.m_JvBD),r+=this.m_iB*l*this.m_JwB,o.subMul(this.m_mC*l,this.m_JvAC),s-=this.m_iC*l*this.m_JwC,a.subMul(this.m_mD*l,this.m_JvBD),u-=this.m_iD*l*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(i),this.m_bodyB.c_velocity.w=r,this.m_bodyC.c_velocity.v.set(o),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=u},_.prototype.solvePositionConstraints=function(t){var e,n,i,r,o,s,u,l,p=this.m_bodyA.c_position.c,m=this.m_bodyA.c_position.a,_=this.m_bodyB.c_position.c,d=this.m_bodyB.c_position.a,y=this.m_bodyC.c_position.c,v=this.m_bodyC.c_position.a,g=this.m_bodyD.c_position.c,b=this.m_bodyD.c_position.a,x=h.neo(m),A=h.neo(d),w=h.neo(v),B=h.neo(b),C=0;if(this.m_type1==f.TYPE)i=c.zero(),o=1,u=1,C+=this.m_iA+this.m_iC,e=m-v-this.m_referenceAngleA;else{var S=h.mulVec2(w,this.m_localAxisC),E=h.mulSub(w,this.m_localAnchorC,this.m_lcC),M=h.mulSub(x,this.m_localAnchorA,this.m_lcA);i=S,u=c.cross(E,S),o=c.cross(M,S),C+=this.m_mC+this.m_mA+this.m_iC*u*u+this.m_iA*o*o;var T=c.sub(this.m_localAnchorC,this.m_lcC),P=h.mulTVec2(w,c.add(M,c.sub(p,y)));e=c.dot(c.sub(P,T),this.m_localAxisC)}if(this.m_type2==f.TYPE)r=c.zero(),s=this.m_ratio,l=this.m_ratio,C+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),n=d-b-this.m_referenceAngleB;else{S=h.mulVec2(B,this.m_localAxisD);var k=h.mulSub(B,this.m_localAnchorD,this.m_lcD),I=h.mulSub(A,this.m_localAnchorB,this.m_lcB);r=c.mul(this.m_ratio,S),l=this.m_ratio*c.cross(k,S),s=this.m_ratio*c.cross(I,S),C+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var R=c.sub(this.m_localAnchorD,this.m_lcD),O=h.mulTVec2(B,c.add(I,c.sub(_,g)));n=c.dot(O,this.m_localAxisD)-c.dot(R,this.m_localAxisD)}var F=e+this.m_ratio*n-this.m_constant,z=0;return C>0&&(z=-F/C),p.addMul(this.m_mA*z,i),m+=this.m_iA*z*o,_.addMul(this.m_mB*z,r),d+=this.m_iB*z*s,y.subMul(this.m_mC*z,i),v-=this.m_iC*z*u,g.subMul(this.m_mD*z,r),b-=this.m_iD*z*l,this.m_bodyA.c_position.c.set(p),this.m_bodyA.c_position.a=m,this.m_bodyB.c_position.c.set(_),this.m_bodyB.c_position.a=d,this.m_bodyC.c_position.c.set(y),this.m_bodyC.c_position.a=v,this.m_bodyD.c_position.c.set(g),this.m_bodyD.c_position.a=b,0<a.linearSlop}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var r=n(2),o=n(7),s=n(6),a=(n(5),n(0)),u=n(1),c=(n(8),n(9)),h=(n(11),n(3)),l=(n(10),n(4),n(12),n(13),n(15));p.TYPE="motor-joint",p._super=l,p.prototype=s(p._super.prototype);var f={maxForce:1,maxTorque:1,correctionFactor:.3};function p(t,e,n){if(!(this instanceof p))return new p(t,e,n);t=o(t,f),l.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=p.TYPE,this.m_linearOffset=t.linearOffset?t.linearOffset:e.getLocalPoint(n.getPosition());var i=e.getAngle(),r=n.getAngle();this.m_angularOffset=r-i,this.m_linearImpulse=u.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}p.prototype.setMaxForce=function(t){i&&r.assert(a.isFinite(t)&&t>=0),this.m_maxForce=t},p.prototype.getMaxForce=function(){return this.m_maxForce},p.prototype.setMaxTorque=function(t){i&&r.assert(a.isFinite(t)&&t>=0),this.m_maxTorque=t},p.prototype.getMaxTorque=function(){return this.m_maxTorque},p.prototype.setCorrectionFactor=function(t){i&&r.assert(a.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},p.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},p.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},p.prototype.getLinearOffset=function(){return this.m_linearOffset},p.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},p.prototype.getAngularOffset=function(){return this.m_angularOffset},p.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},p.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},p.prototype.getReactionForce=function(t){return u.mul(t,this.m_linearImpulse)},p.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,f=h.neo(n),p=h.neo(s);this.m_rA=h.mulVec2(f,u.neg(this.m_localCenterA)),this.m_rB=h.mulVec2(p,u.neg(this.m_localCenterB));var m=this.m_invMassA,_=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,v=new c;if(v.ex.x=m+_+d*this.m_rA.y*this.m_rA.y+y*this.m_rB.y*this.m_rB.y,v.ex.y=-d*this.m_rA.x*this.m_rA.y-y*this.m_rB.x*this.m_rB.y,v.ey.x=v.ex.y,v.ey.y=m+_+d*this.m_rA.x*this.m_rA.x+y*this.m_rB.x*this.m_rB.x,this.m_linearMass=v.getInverse(),this.m_angularMass=d+y,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=u.zero(),this.m_linearError.addCombine(1,o,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(h.mulVec2(f,this.m_linearOffset)),this.m_angularError=s-n-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var g=u.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(m,g),r-=d*(u.cross(this.m_rA,g)+this.m_angularImpulse),a.addMul(_,g),l+=y*(u.cross(this.m_rB,g)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB,f=t.dt,p=t.inv_dt,m=r-n+p*this.m_correctionFactor*this.m_angularError,_=-this.m_angularMass*m,d=this.m_angularImpulse,y=f*this.m_maxTorque;this.m_angularImpulse=a.clamp(this.m_angularImpulse+_,-y,y),n-=h*(_=this.m_angularImpulse-d),r+=l*_,(m=u.zero()).addCombine(1,i,1,u.cross(r,this.m_rB)),m.subCombine(1,e,1,u.cross(n,this.m_rA)),m.addMul(p*this.m_correctionFactor,this.m_linearError);_=u.neg(c.mulVec2(this.m_linearMass,m)),d=u.clone(this.m_linearImpulse);this.m_linearImpulse.add(_);y=f*this.m_maxForce;this.m_linearImpulse.clamp(y),_=u.sub(this.m_linearImpulse,d),e.subMul(o,_),n-=h*u.cross(this.m_rA,_),i.addMul(s,_),r+=l*u.cross(this.m_rB,_),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},p.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var r=n(2),o=n(7),s=n(6),a=n(0),u=n(1),c=(n(8),n(9)),h=(n(11),n(3)),l=(n(10),n(4)),f=(n(12),n(13),n(15));m.TYPE="mouse-joint",m._super=f,m.prototype=s(m._super.prototype);var p={maxForce:0,frequencyHz:5,dampingRatio:.7};function m(t,e,n,s){if(!(this instanceof m))return new m(t,e,n,s);t=o(t,p),f.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=m.TYPE,i&&r.assert(a.isFinite(t.maxForce)&&t.maxForce>=0),i&&r.assert(a.isFinite(t.frequencyHz)&&t.frequencyHz>=0),i&&r.assert(a.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=s?u.clone(s):t.target||u.zero(),this.m_localAnchorB=l.mulTVec2(n.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=u.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=u.zero(),this.m_localCenterB=u.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new c,this.m_C=u.zero()}m.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=u.clone(t)},m.prototype.getTarget=function(){return this.m_targetA},m.prototype.setMaxForce=function(t){this.m_maxForce=t},m.getMaxForce=function(){return this.m_maxForce},m.prototype.setFrequency=function(t){this.m_frequencyHz=t},m.prototype.getFrequency=function(){return this.m_frequencyHz},m.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},m.prototype.getDampingRatio=function(){return this.m_dampingRatio},m.prototype.getAnchorA=function(){return u.clone(this.m_targetA)},m.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},m.prototype.getReactionForce=function(t){return u.mul(t,this.m_impulse)},m.prototype.getReactionTorque=function(t){return 0*t},m.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},m.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,n=this.m_bodyB.c_velocity,o=e.c,s=e.a,l=n.v,f=n.w,p=h.neo(s),m=this.m_bodyB.getMass(),_=2*a.PI*this.m_frequencyHz,d=2*m*this.m_dampingRatio*_,y=m*(_*_),v=t.dt;i&&r.assert(d+v*y>a.EPSILON),this.m_gamma=v*(d+v*y),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=v*y*this.m_gamma,this.m_rB=h.mulVec2(p,u.sub(this.m_localAnchorB,this.m_localCenterB));var g=new c;g.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,g.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,g.ey.x=g.ex.y,g.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=g.getInverse(),this.m_C.set(o),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),f*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),l.addMul(this.m_invMassB,this.m_impulse),f+=this.m_invIB*u.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),n.v.set(l),n.w=f},m.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,n=u.clone(e.v),i=e.w,r=u.cross(i,this.m_rB);r.add(n),r.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),r.neg();var o=c.mulVec2(this.m_mass,r),s=u.clone(this.m_impulse);this.m_impulse.add(o);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),o=u.sub(this.m_impulse,s),n.addMul(this.m_invMassB,o),i+=this.m_invIB*u.cross(this.m_rB,o),e.v.set(n),e.w=i},m.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var r=n(2),o=n(7),s=n(6),a=n(5),u=n(0),c=n(1),h=(n(8),n(9),n(11),n(3)),l=(n(10),n(4),n(12),n(13),n(15));p.TYPE="pulley-joint",p.MIN_PULLEY_LENGTH=2,p._super=l,p.prototype=s(p._super.prototype);var f={collideConnected:!0};function p(t,e,n,s,a,h,m,_){if(!(this instanceof p))return new p(t,e,n,s,a,h,m,_);t=o(t,f),l.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=p.TYPE,this.m_groundAnchorA=s||(t.groundAnchorA||c.neo(-1,1)),this.m_groundAnchorB=a||(t.groundAnchorB||c.neo(1,1)),this.m_localAnchorA=h?e.getLocalPoint(h):t.localAnchorA||c.neo(-1,0),this.m_localAnchorB=m?n.getLocalPoint(m):t.localAnchorB||c.neo(1,0),this.m_lengthA=u.isFinite(t.lengthA)?t.lengthA:c.distance(h,s),this.m_lengthB=u.isFinite(t.lengthB)?t.lengthB:c.distance(m,a),this.m_ratio=u.isFinite(_)?_:t.ratio,i&&r.assert(_>u.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}p.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},p.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},p.prototype.getLengthA=function(){return this.m_lengthA},p.prototype.getLengthB=function(){return this.m_lengthB},p.prototype.getRatio=function(){return this.m_ratio},p.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return c.distance(t,e)},p.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return c.distance(t,e)},p.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return c.mul(this.m_impulse,this.m_uB).mul(t)},p.prototype.getReactionTorque=function(t){return 0},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,f=h.neo(n),p=h.neo(s);this.m_rA=h.mulVec2(f,c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mulVec2(p,c.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=c.sub(c.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=c.sub(c.add(o,this.m_rB),this.m_groundAnchorB);var m=this.m_uA.length(),_=this.m_uB.length();m>10*a.linearSlop?this.m_uA.mul(1/m):this.m_uA.setZero(),_>10*a.linearSlop?this.m_uB.mul(1/_):this.m_uB.setZero();var d=c.cross(this.m_rA,this.m_uA),y=c.cross(this.m_rB,this.m_uB),v=this.m_invMassA+this.m_invIA*d*d,g=this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=v+this.m_ratio*this.m_ratio*g,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var b=c.mul(-this.m_impulse,this.m_uA),x=c.mul(-this.m_ratio*this.m_impulse,this.m_uB);i.addMul(this.m_invMassA,b),r+=this.m_invIA*c.cross(this.m_rA,b),u.addMul(this.m_invMassB,x),l+=this.m_invIB*c.cross(this.m_rB,x)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=u,this.m_bodyB.c_velocity.w=l},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=c.add(e,c.cross(n,this.m_rA)),s=c.add(i,c.cross(r,this.m_rB)),a=-c.dot(this.m_uA,o)-this.m_ratio*c.dot(this.m_uB,s),u=-this.m_mass*a;this.m_impulse+=u;var h=c.mul(-u,this.m_uA),l=c.mul(-this.m_ratio*u,this.m_uB);e.addMul(this.m_invMassA,h),n+=this.m_invIA*c.cross(this.m_rA,h),i.addMul(this.m_invMassB,l),r+=this.m_invIB*c.cross(this.m_rB,l),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},p.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=h.neo(n),s=h.neo(r),l=h.mulVec2(o,c.sub(this.m_localAnchorA,this.m_localCenterA)),f=h.mulVec2(s,c.sub(this.m_localAnchorB,this.m_localCenterB)),p=c.sub(c.add(e,this.m_rA),this.m_groundAnchorA),m=c.sub(c.add(i,this.m_rB),this.m_groundAnchorB),_=p.length(),d=m.length();_>10*a.linearSlop?p.mul(1/_):p.setZero(),d>10*a.linearSlop?m.mul(1/d):m.setZero();var y=c.cross(l,p),v=c.cross(f,m),g=this.m_invMassA+this.m_invIA*y*y,b=this.m_invMassB+this.m_invIB*v*v,x=g+this.m_ratio*this.m_ratio*b;x>0&&(x=1/x);var A=this.m_constant-_-this.m_ratio*d,w=u.abs(A),B=-x*A,C=c.mul(-B,p),S=c.mul(-this.m_ratio*B,m);return e.addMul(this.m_invMassA,C),n+=this.m_invIA*c.cross(l,C),i.addMul(this.m_invMassB,S),r+=this.m_invIB*c.cross(f,S),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=i,this.m_bodyB.c_position.a=r,w<a.linearSlop}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var i=n(7),r=n(6),o=n(5),s=n(0),a=n(1),u=(n(8),n(9),n(11),n(3)),c=(n(10),n(4),n(12),n(13),n(15)),h=0;f.TYPE="rope-joint",f._super=c,f.prototype=r(f._super.prototype);var l={maxLength:0};function f(t,e,n,r){if(!(this instanceof f))return new f(t,e,n,r);t=i(t,l),c.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=f.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||a.neo(-1,0),this.m_localAnchorB=r?n.getLocalPoint(r):t.localAnchorB||a.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=h,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}f.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},f.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},f.prototype.setMaxLength=function(t){this.m_maxLength=t},f.prototype.getMaxLength=function(){return this.m_maxLength},f.prototype.getLimitState=function(){return this.m_state},f.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},f.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},f.prototype.getReactionForce=function(t){return a.mul(this.m_impulse,this.m_u).mul(t)},f.prototype.getReactionTorque=function(t){return 0},f.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,f=this.m_bodyB.c_velocity.w,p=u.neo(n),m=u.neo(c);this.m_rA=u.mulSub(p,this.m_localAnchorA,this.m_localCenterA),this.m_rB=u.mulSub(m,this.m_localAnchorB,this.m_localCenterB),this.m_u=a.zero(),this.m_u.addCombine(1,s,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var _=this.m_length-this.m_maxLength;if(this.m_state=_>0?2:h,!(this.m_length>o.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var d=a.cross(this.m_rA,this.m_u),y=a.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=0!=v?1/v:0,t.warmStarting){this.m_impulse*=t.dtRatio;var g=a.mul(this.m_impulse,this.m_u);i.subMul(this.m_invMassA,g),r-=this.m_invIA*a.cross(this.m_rA,g),l.addMul(this.m_invMassB,g),f+=this.m_invIB*a.cross(this.m_rB,g)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(l),this.m_bodyB.c_velocity.w=f},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=a.addCross(e,n,this.m_rA),u=a.addCross(i,r,this.m_rB),c=this.m_length-this.m_maxLength,h=a.dot(this.m_u,a.sub(u,o));c<0&&(h+=t.inv_dt*c);var l=-this.m_mass*h,f=this.m_impulse;this.m_impulse=s.min(0,this.m_impulse+l),l=this.m_impulse-f;var p=a.mul(l,this.m_u);e.subMul(this.m_invMassA,p),n-=this.m_invIA*a.cross(this.m_rA,p),i.addMul(this.m_invMassB,p),r+=this.m_invIB*a.cross(this.m_rB,p),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},f.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,c=u.neo(n),h=u.neo(r),l=u.mulSub(c,this.m_localAnchorA,this.m_localCenterA),f=u.mulSub(h,this.m_localAnchorB,this.m_localCenterB),p=a.zero();p.addCombine(1,i,1,f),p.subCombine(1,e,1,l);var m=p.normalize(),_=m-this.m_maxLength;_=s.clamp(_,0,o.maxLinearCorrection);var d=-this.m_mass*_,y=a.mul(d,p);return e.subMul(this.m_invMassA,y),n-=this.m_invIA*a.cross(l,y),i.addMul(this.m_invMassB,y),r+=this.m_invIB*a.cross(f,y),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,m-this.m_maxLength<o.linearSlop}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var i=n(7),r=n(6),o=n(5),s=n(0),a=n(1),u=n(8),c=(n(9),n(11)),h=n(3),l=(n(10),n(4),n(12),n(13),n(15));p.TYPE="weld-joint",p._super=l,p.prototype=r(p._super.prototype);var f={frequencyHz:0,dampingRatio:0};function p(t,e,n,r){if(!(this instanceof p))return new p(t,e,n,r);t=i(t,f),l.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=p.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||a.zero(),this.m_localAnchorB=r?n.getLocalPoint(r):t.localAnchorB||a.zero(),this.m_referenceAngle=s.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=u(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new c}p.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},p.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},p.prototype.getReferenceAngle=function(){return this.m_referenceAngle},p.prototype.setFrequency=function(t){this.m_frequencyHz=t},p.prototype.getFrequency=function(){return this.m_frequencyHz},p.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},p.prototype.getDampingRatio=function(){return this.m_dampingRatio},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return a.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},p.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,u=this.m_bodyB.c_velocity.w,l=h.neo(e),f=h.neo(r);this.m_rA=h.mulVec2(l,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mulVec2(f,a.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,m=this.m_invMassB,_=this.m_invIA,d=this.m_invIB,y=new c;if(y.ex.x=p+m+this.m_rA.y*this.m_rA.y*_+this.m_rB.y*this.m_rB.y*d,y.ey.x=-this.m_rA.y*this.m_rA.x*_-this.m_rB.y*this.m_rB.x*d,y.ez.x=-this.m_rA.y*_-this.m_rB.y*d,y.ex.y=y.ey.x,y.ey.y=p+m+this.m_rA.x*this.m_rA.x*_+this.m_rB.x*this.m_rB.x*d,y.ez.y=this.m_rA.x*_+this.m_rB.x*d,y.ex.z=y.ez.x,y.ey.z=y.ez.y,y.ez.z=_+d,this.m_frequencyHz>0){y.getInverse22(this.m_mass);var v=_+d,g=v>0?1/v:0,b=r-e-this.m_referenceAngle,x=2*s.PI*this.m_frequencyHz,A=2*g*this.m_dampingRatio*x,w=g*x*x,B=t.dt;this.m_gamma=B*(A+B*w),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=b*B*w*this.m_gamma,v+=this.m_gamma,this.m_mass.ez.z=0!=v?1/v:0}else 0==y.ez.z?(y.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(y.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var C=a.neo(this.m_impulse.x,this.m_impulse.y);n.subMul(p,C),i-=_*(a.cross(this.m_rA,C)+this.m_impulse.z),o.addMul(m,C),u+=d*(a.cross(this.m_rB,C)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=u},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var f=r-n,p=-this.m_mass.ez.z*(f+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=p,n-=h*p,r+=l*p,(d=a.zero()).addCombine(1,i,1,a.cross(r,this.m_rB)),d.subCombine(1,e,1,a.cross(n,this.m_rA));var m=a.neg(c.mulVec2(this.m_mass,d));this.m_impulse.x+=m.x,this.m_impulse.y+=m.y;var _=a.clone(m);e.subMul(o,_),n-=h*a.cross(this.m_rA,_),i.addMul(s,_),r+=l*a.cross(this.m_rB,_)}else{var d;(d=a.zero()).addCombine(1,i,1,a.cross(r,this.m_rB)),d.subCombine(1,e,1,a.cross(n,this.m_rA));f=r-n;var y=u(d.x,d.y,f),v=u.neg(c.mulVec3(this.m_mass,y));this.m_impulse.add(v);_=a.neo(v.x,v.y);e.subMul(o,_),n-=h*(a.cross(this.m_rA,_)+v.z),i.addMul(s,_),r+=l*(a.cross(this.m_rB,_)+v.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},p.prototype.solvePositionConstraints=function(t){var e,n,i=this.m_bodyA.c_position.c,r=this.m_bodyA.c_position.a,l=this.m_bodyB.c_position.c,f=this.m_bodyB.c_position.a,p=h.neo(r),m=h.neo(f),_=this.m_invMassA,d=this.m_invMassB,y=this.m_invIA,v=this.m_invIB,g=h.mulVec2(p,a.sub(this.m_localAnchorA,this.m_localCenterA)),b=h.mulVec2(m,a.sub(this.m_localAnchorB,this.m_localCenterB)),x=new c;if(x.ex.x=_+d+g.y*g.y*y+b.y*b.y*v,x.ey.x=-g.y*g.x*y-b.y*b.x*v,x.ez.x=-g.y*y-b.y*v,x.ex.y=x.ey.x,x.ey.y=_+d+g.x*g.x*y+b.x*b.x*v,x.ez.y=g.x*y+b.x*v,x.ex.z=x.ez.x,x.ey.z=x.ez.y,x.ez.z=y+v,this.m_frequencyHz>0){(w=a.zero()).addCombine(1,l,1,b),w.subCombine(1,i,1,g),e=w.length(),n=0;var A=a.neg(x.solve22(w));i.subMul(_,A),r-=y*a.cross(g,A),l.addMul(d,A),f+=v*a.cross(b,A)}else{var w;(w=a.zero()).addCombine(1,l,1,b),w.subCombine(1,i,1,g);var B=f-r-this.m_referenceAngle;e=w.length(),n=s.abs(B);var C=u(w.x,w.y,B),S=u();if(x.ez.z>0)S=u.neg(x.solve33(C));else{var E=a.neg(x.solve22(w));S.set(E.x,E.y,0)}A=a.neo(S.x,S.y);i.subMul(_,A),r-=y*(a.cross(g,A)+S.z),l.addMul(d,A),f+=v*(a.cross(b,A)+S.z)}return this.m_bodyA.c_position.c=i,this.m_bodyA.c_position.a=r,this.m_bodyB.c_position.c=l,this.m_bodyB.c_position.a=f,e<=o.linearSlop&&n<=o.angularSlop}},function(t,e,n){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var i=n(7),r=n(6),o=n(5),s=n(0),a=n(1),u=(n(8),n(9),n(11),n(3)),c=(n(10),n(4),n(12),n(13),n(15));l.TYPE="wheel-joint",l._super=c,l.prototype=r(l._super.prototype);var h={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function l(t,e,n,r,o){if(!(this instanceof l))return new l(t,e,n,r,o);t=i(t,h),c.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=l.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||a.zero(),this.m_localAnchorB=r?n.getLocalPoint(r):t.localAnchorB||a.zero(),this.m_localAxis=o?e.getLocalVector(o):t.localAxisA||a.neo(1,0),this.m_localXAxisA=this.m_localAxis,this.m_localYAxisA=a.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=a.zero(),this.m_ay=a.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}l.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},l.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},l.prototype.getLocalAxisA=function(){return this.m_localXAxisA},l.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.getWorldPoint(this.m_localAnchorA),i=e.getWorldPoint(this.m_localAnchorB),r=a.sub(i,n),o=t.getWorldVector(this.m_localXAxisA);return a.dot(r,o)},l.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},l.prototype.isMotorEnabled=function(){return this.m_enableMotor},l.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},l.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},l.prototype.getMotorSpeed=function(){return this.m_motorSpeed},l.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},l.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},l.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},l.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},l.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},l.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},l.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},l.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},l.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},l.prototype.getReactionForce=function(t){return a.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},l.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},l.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,n=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_position.c,c=this.m_bodyA.c_position.a,h=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,f=this.m_bodyB.c_position.c,p=this.m_bodyB.c_position.a,m=this.m_bodyB.c_velocity.v,_=this.m_bodyB.c_velocity.w,d=u.neo(c),y=u.neo(p),v=u.mulVec2(d,a.sub(this.m_localAnchorA,this.m_localCenterA)),g=u.mulVec2(y,a.sub(this.m_localAnchorB,this.m_localCenterB));if((w=a.zero()).addCombine(1,f,1,g),w.subCombine(1,o,1,v),this.m_ay=u.mulVec2(d,this.m_localYAxisA),this.m_sAy=a.cross(a.add(w,v),this.m_ay),this.m_sBy=a.cross(g,this.m_ay),this.m_mass=e+n+i*this.m_sAy*this.m_sAy+r*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=u.mulVec2(d,this.m_localXAxisA),this.m_sAx=a.cross(a.add(w,v),this.m_ax),this.m_sBx=a.cross(g,this.m_ax);var b=e+n+i*this.m_sAx*this.m_sAx+r*this.m_sBx*this.m_sBx;if(b>0){this.m_springMass=1/b;var x=a.dot(w,this.m_ax),A=2*s.PI*this.m_frequencyHz,w=2*this.m_springMass*this.m_dampingRatio*A,B=this.m_springMass*A*A,C=t.dt;this.m_gamma=C*(w+C*B),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=x*C*B*this.m_gamma,this.m_springMass=b+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=i+r,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var S=a.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),E=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,M=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;h.subMul(this.m_invMassA,S),l-=this.m_invIA*E,m.addMul(this.m_invMassB,S),_+=this.m_invIB*M}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(h),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(m),this.m_bodyB.c_velocity.w=_},l.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,n=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_velocity.v,u=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_velocity.v,h=this.m_bodyB.c_velocity.w,l=a.dot(this.m_ax,c)-a.dot(this.m_ax,o)+this.m_sBx*h-this.m_sAx*u,f=-this.m_springMass*(l+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=f;var p=a.mul(f,this.m_ax),m=f*this.m_sAx,_=f*this.m_sBx;o.subMul(e,p),u-=i*m,c.addMul(n,p);l=(h+=r*_)-u-this.m_motorSpeed,f=-this.m_motorMass*l;var d=this.m_motorImpulse,y=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=s.clamp(this.m_motorImpulse+f,-y,y),u-=i*(f=this.m_motorImpulse-d),h+=r*f;l=a.dot(this.m_ay,c)-a.dot(this.m_ay,o)+this.m_sBy*h-this.m_sAy*u,f=-this.m_mass*l;this.m_impulse+=f;p=a.mul(f,this.m_ay),m=f*this.m_sAy,_=f*this.m_sBy;o.subMul(e,p),u-=i*m,c.addMul(n,p),h+=r*_,this.m_bodyA.c_velocity.v.set(o),this.m_bodyA.c_velocity.w=u,this.m_bodyB.c_velocity.v.set(c),this.m_bodyB.c_velocity.w=h},l.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,c=u.neo(n),h=u.neo(r),l=u.mulVec2(c,a.sub(this.m_localAnchorA,this.m_localCenterA)),f=u.mulVec2(h,a.sub(this.m_localAnchorB,this.m_localCenterB)),p=a.zero();p.addCombine(1,i,1,f),p.subCombine(1,e,1,l);var m,_=u.mulVec2(c,this.m_localYAxisA),d=a.cross(a.add(p,l),_),y=a.cross(f,_),v=a.dot(p,_),g=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;m=0!=g?-v/g:0;var b=a.mul(m,_),x=m*d,A=m*y;return e.subMul(this.m_invMassA,b),n-=this.m_invIA*x,i.addMul(this.m_invMassB,b),r+=this.m_invIB*A,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,s.abs(v)<=o.linearSlop}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bindHandlers=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(102));var r=i.default.CONTACT_BEGIN,o=i.default.CONTACT_END,s=function(t,e){var n=function(t){return t===r?"onBegin":t===o?"onEnd":null}(e);if(n){var i=t.getFixtureA().getBody(),s=t.getFixtureB().getBody(),a=i.getUserData(),u=s.getUserData(),c=a.type,h=a.events,l=void 0===h?{}:h,f=u.type,p=u.events,m=void 0===p?{}:p;if(l[f]){var _=l[f][n];_&&_(s)}if(m[c]){var d=m[c][n];d&&d(i)}}},a=function(t){t.on("pre-solve",function(t){!function(t){var e=Math.abs,n=t.getFixtureA().getBody(),i=t.getFixtureB().getBody(),r=n.getUserData().oneWayCollisions,o=i.getUserData().oneWayCollisions;if(r&&i.getLinearVelocity().y<20){var s=t.getFixtureB().getAABB(0),a=s.lowerBound.y,u=s.upperBound.y;t.setEnabled(i.getPosition().y+.5*e(a-u)<=n.getPosition().y)}if(o&&n.getLinearVelocity().y<20){var c=t.getFixtureA().getAABB(0),h=c.lowerBound.y,l=c.upperBound.y;t.setEnabled(n.getPosition().y+.5*e(h-l)<=i.getPosition().y)}}(t)})};e.bindHandlers=function(t){(function(t){t.on("begin-contact",function(t){s(t,i.default.CONTACT_BEGIN)})})(t),function(t){t.on("end-contact",function(t){s(t,i.default.CONTACT_END)})}(t),a(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(0,function(t){return t&&t.__esModule?t:{default:t}}(n(44)).default)({CONTACT_BEGIN:null,CONTACT_END:null});e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhysicsConstants=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(44));e.PhysicsConstants=(0,i.default)({GROUND_TYPE:null})},function(t,e,n){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="__lodash_hash_undefined__",h=500,l="__lodash_placeholder__",f=1,p=2,m=4,_=1,d=2,y=1,v=2,g=4,b=8,x=16,A=32,w=64,B=128,C=256,S=512,E=30,M="...",T=800,P=16,k=1,I=2,R=1/0,O=9007199254740991,F=1.7976931348623157e308,z=NaN,j=4294967295,D=j-1,L=j>>>1,V=[["ary",B],["bind",y],["bindKey",v],["curry",b],["curryRight",x],["flip",S],["partial",A],["partialRight",w],["rearg",C]],q="[object Arguments]",U="[object Array]",N="[object AsyncFunction]",Y="[object Boolean]",W="[object Date]",G="[object DOMException]",H="[object Error]",J="[object Function]",X="[object GeneratorFunction]",Z="[object Map]",K="[object Number]",$="[object Null]",Q="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",it="[object String]",rt="[object Symbol]",ot="[object Undefined]",st="[object WeakMap]",at="[object WeakSet]",ut="[object ArrayBuffer]",ct="[object DataView]",ht="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",pt="[object Int16Array]",mt="[object Int32Array]",_t="[object Uint8Array]",dt="[object Uint8ClampedArray]",yt="[object Uint16Array]",vt="[object Uint32Array]",gt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,At=/&(?:amp|lt|gt|quot|#39);/g,wt=/[&<>"']/g,Bt=RegExp(At.source),Ct=RegExp(wt.source),St=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(It.source),Ot=/^\s+|\s+$/g,Ft=/^\s+/,zt=/\s+$/,jt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Vt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,Yt=/^[-+]0x[0-9a-f]+$/i,Wt=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,Ht=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,$t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Qt+"]",ne="["+$t+"]",ie="\\d+",re="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",se="[^\\ud800-\\udfff"+Qt+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ae="\\ud83c[\\udffb-\\udfff]",ue="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",he="[\\ud800-\\udbff][\\udc00-\\udfff]",le="[A-Z\\xc0-\\xd6\\xd8-\\xde]",fe="(?:"+oe+"|"+se+")",pe="(?:"+le+"|"+se+")",me="(?:"+ne+"|"+ae+")"+"?",_e="[\\ufe0e\\ufe0f]?"+me+("(?:\\u200d(?:"+[ue,ce,he].join("|")+")[\\ufe0e\\ufe0f]?"+me+")*"),de="(?:"+[re,ce,he].join("|")+")"+_e,ye="(?:"+[ue+ne+"?",ne,ce,he,te].join("|")+")",ve=RegExp("['’]","g"),ge=RegExp(ne,"g"),be=RegExp(ae+"(?="+ae+")|"+ye+_e,"g"),xe=RegExp([le+"?"+oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,le,"$"].join("|")+")",pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,le+fe,"$"].join("|")+")",le+"?"+fe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",le+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,de].join("|"),"g"),Ae=RegExp("[\\u200d\\ud800-\\udfff"+$t+"\\ufe0e\\ufe0f]"),we=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Be=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ce=-1,Se={};Se[ht]=Se[lt]=Se[ft]=Se[pt]=Se[mt]=Se[_t]=Se[dt]=Se[yt]=Se[vt]=!0,Se[q]=Se[U]=Se[ut]=Se[Y]=Se[ct]=Se[W]=Se[H]=Se[J]=Se[Z]=Se[K]=Se[Q]=Se[et]=Se[nt]=Se[it]=Se[st]=!1;var Ee={};Ee[q]=Ee[U]=Ee[ut]=Ee[ct]=Ee[Y]=Ee[W]=Ee[ht]=Ee[lt]=Ee[ft]=Ee[pt]=Ee[mt]=Ee[Z]=Ee[K]=Ee[Q]=Ee[et]=Ee[nt]=Ee[it]=Ee[rt]=Ee[_t]=Ee[dt]=Ee[yt]=Ee[vt]=!0,Ee[H]=Ee[J]=Ee[st]=!1;var Me={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Te=parseFloat,Pe=parseInt,ke="object"==typeof t&&t&&t.Object===Object&&t,Ie="object"==typeof self&&self&&self.Object===Object&&self,Re=ke||Ie||Function("return this")(),Oe="object"==typeof e&&e&&!e.nodeType&&e,Fe=Oe&&"object"==typeof i&&i&&!i.nodeType&&i,ze=Fe&&Fe.exports===Oe,je=ze&&ke.process,De=function(){try{var t=Fe&&Fe.require&&Fe.require("util").types;return t||je&&je.binding&&je.binding("util")}catch(t){}}(),Le=De&&De.isArrayBuffer,Ve=De&&De.isDate,qe=De&&De.isMap,Ue=De&&De.isRegExp,Ne=De&&De.isSet,Ye=De&&De.isTypedArray;function We(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ge(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function He(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Je(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Ze(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function Ke(t,e){return!!(null==t?0:t.length)&&un(t,e,0)>-1}function $e(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Qe(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function tn(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function en(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function nn(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function rn(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var on=fn("length");function sn(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function an(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function un(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):an(t,hn,n)}function cn(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function hn(t){return t!=t}function ln(t,e){var n=null==t?0:t.length;return n?_n(t,e)/n:z}function fn(t){return function(e){return null==e?o:e[t]}}function pn(t){return function(e){return null==t?o:t[e]}}function mn(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function _n(t,e){for(var n,i=-1,r=t.length;++i<r;){var s=e(t[i]);s!==o&&(n=n===o?s:n+s)}return n}function dn(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function yn(t){return function(e){return t(e)}}function vn(t,e){return Qe(e,function(e){return t[e]})}function gn(t,e){return t.has(e)}function bn(t,e){for(var n=-1,i=t.length;++n<i&&un(e,t[n],0)>-1;);return n}function xn(t,e){for(var n=t.length;n--&&un(e,t[n],0)>-1;);return n}var An=pn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),wn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bn(t){return"\\"+Me[t]}function Cn(t){return Ae.test(t)}function Sn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function En(t,e){return function(n){return t(e(n))}}function Mn(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==l||(t[n]=l,o[r++]=n)}return o}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function kn(t){return Cn(t)?function(t){var e=be.lastIndex=0;for(;be.test(t);)++e;return e}(t):on(t)}function In(t){return Cn(t)?function(t){return t.match(be)||[]}(t):function(t){return t.split("")}(t)}var Rn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var On=function t(e){var n=(e=null==e?Re:On.defaults(Re.Object(),e,On.pick(Re,Be))).Array,i=e.Date,r=e.Error,$t=e.Function,Qt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,ie=e.TypeError,re=n.prototype,oe=$t.prototype,se=te.prototype,ae=e["__core-js_shared__"],ue=oe.toString,ce=se.hasOwnProperty,he=0,le=function(){var t=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fe=se.toString,pe=ue.call(te),me=Re._,_e=ee("^"+ue.call(ce).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),de=ze?e.Buffer:o,ye=e.Symbol,be=e.Uint8Array,Ae=de?de.allocUnsafe:o,Me=En(te.getPrototypeOf,te),ke=te.create,Ie=se.propertyIsEnumerable,Oe=re.splice,Fe=ye?ye.isConcatSpreadable:o,je=ye?ye.iterator:o,De=ye?ye.toStringTag:o,on=function(){try{var t=Do(te,"defineProperty");return t({},"",{}),t}catch(t){}}(),pn=e.clearTimeout!==Re.clearTimeout&&e.clearTimeout,Fn=i&&i.now!==Re.Date.now&&i.now,zn=e.setTimeout!==Re.setTimeout&&e.setTimeout,jn=Qt.ceil,Dn=Qt.floor,Ln=te.getOwnPropertySymbols,Vn=de?de.isBuffer:o,qn=e.isFinite,Un=re.join,Nn=En(te.keys,te),Yn=Qt.max,Wn=Qt.min,Gn=i.now,Hn=e.parseInt,Jn=Qt.random,Xn=re.reverse,Zn=Do(e,"DataView"),Kn=Do(e,"Map"),$n=Do(e,"Promise"),Qn=Do(e,"Set"),ti=Do(e,"WeakMap"),ei=Do(te,"create"),ni=ti&&new ti,ii={},ri=hs(Zn),oi=hs(Kn),si=hs($n),ai=hs(Qn),ui=hs(ti),ci=ye?ye.prototype:o,hi=ci?ci.valueOf:o,li=ci?ci.toString:o;function fi(t){if(Ea(t)&&!da(t)&&!(t instanceof di)){if(t instanceof _i)return t;if(ce.call(t,"__wrapped__"))return ls(t)}return new _i(t)}var pi=function(){function t(){}return function(e){if(!Sa(e))return{};if(ke)return ke(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function mi(){}function _i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function di(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function yi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function vi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function gi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new gi;++e<n;)this.add(t[e])}function xi(t){var e=this.__data__=new vi(t);this.size=e.size}function Ai(t,e){var n=da(t),i=!n&&_a(t),r=!n&&!i&&ba(t),o=!n&&!i&&!r&&Fa(t),s=n||i||r||o,a=s?dn(t.length,ne):[],u=a.length;for(var c in t)!e&&!ce.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Wo(c,u))||a.push(c);return a}function wi(t){var e=t.length;return e?t[br(0,e-1)]:o}function Bi(t,e){return as(eo(t),Ri(e,0,t.length))}function Ci(t){return as(eo(t))}function Si(t,e,n){(n===o||fa(t[e],n))&&(n!==o||e in t)||ki(t,e,n)}function Ei(t,e,n){var i=t[e];ce.call(t,e)&&fa(i,n)&&(n!==o||e in t)||ki(t,e,n)}function Mi(t,e){for(var n=t.length;n--;)if(fa(t[n][0],e))return n;return-1}function Ti(t,e,n,i){return Di(t,function(t,r,o){e(i,t,n(t),o)}),i}function Pi(t,e){return t&&no(e,iu(e),t)}function ki(t,e,n){"__proto__"==e&&on?on(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ii(t,e){for(var i=-1,r=e.length,s=n(r),a=null==t;++i<r;)s[i]=a?o:$a(t,e[i]);return s}function Ri(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Oi(t,e,n,i,r,s){var a,u=e&f,c=e&p,h=e&m;if(n&&(a=r?n(t,i,r,s):n(t)),a!==o)return a;if(!Sa(t))return t;var l=da(t);if(l){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return eo(t,a)}else{var _=qo(t),d=_==J||_==X;if(ba(t))return Xr(t,u);if(_==Q||_==q||d&&!r){if(a=c||d?{}:No(t),!u)return c?function(t,e){return no(t,Vo(t),e)}(t,function(t,e){return t&&no(e,ru(e),t)}(a,t)):function(t,e){return no(t,Lo(t),e)}(t,Pi(a,t))}else{if(!Ee[_])return r?t:{};a=function(t,e,n){var i=t.constructor;switch(e){case ut:return Zr(t);case Y:case W:return new i(+t);case ct:return function(t,e){var n=e?Zr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ht:case lt:case ft:case pt:case mt:case _t:case dt:case yt:case vt:return Kr(t,n);case Z:return new i;case K:case it:return new i(t);case et:return function(t){var e=new t.constructor(t.source,Nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case rt:return function(t){return hi?te(hi.call(t)):{}}(t)}}(t,_,u)}}s||(s=new xi);var y=s.get(t);if(y)return y;if(s.set(t,a),Ia(t))return t.forEach(function(i){a.add(Oi(i,e,n,i,t,s))}),a;if(Ma(t))return t.forEach(function(i,r){a.set(r,Oi(i,e,n,r,t,s))}),a;var v=l?o:(h?c?ko:Po:c?ru:iu)(t);return He(v||t,function(i,r){v&&(i=t[r=i]),Ei(a,r,Oi(i,e,n,r,t,s))}),a}function Fi(t,e,n){var i=n.length;if(null==t)return!i;for(t=te(t);i--;){var r=n[i],s=e[r],a=t[r];if(a===o&&!(r in t)||!s(a))return!1}return!0}function zi(t,e,n){if("function"!=typeof t)throw new ie(u);return is(function(){t.apply(o,n)},e)}function ji(t,e,n,i){var r=-1,o=Ke,a=!0,u=t.length,c=[],h=e.length;if(!u)return c;n&&(e=Qe(e,yn(n))),i?(o=$e,a=!1):e.length>=s&&(o=gn,a=!1,e=new bi(e));t:for(;++r<u;){var l=t[r],f=null==n?l:n(l);if(l=i||0!==l?l:0,a&&f==f){for(var p=h;p--;)if(e[p]===f)continue t;c.push(l)}else o(e,f,i)||c.push(l)}return c}fi.templateSettings={escape:St,evaluate:Et,interpolate:Mt,variable:"",imports:{_:fi}},fi.prototype=mi.prototype,fi.prototype.constructor=fi,_i.prototype=pi(mi.prototype),_i.prototype.constructor=_i,di.prototype=pi(mi.prototype),di.prototype.constructor=di,yi.prototype.clear=function(){this.__data__=ei?ei(null):{},this.size=0},yi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yi.prototype.get=function(t){var e=this.__data__;if(ei){var n=e[t];return n===c?o:n}return ce.call(e,t)?e[t]:o},yi.prototype.has=function(t){var e=this.__data__;return ei?e[t]!==o:ce.call(e,t)},yi.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ei&&e===o?c:e,this},vi.prototype.clear=function(){this.__data__=[],this.size=0},vi.prototype.delete=function(t){var e=this.__data__,n=Mi(e,t);return!(n<0||(n==e.length-1?e.pop():Oe.call(e,n,1),--this.size,0))},vi.prototype.get=function(t){var e=this.__data__,n=Mi(e,t);return n<0?o:e[n][1]},vi.prototype.has=function(t){return Mi(this.__data__,t)>-1},vi.prototype.set=function(t,e){var n=this.__data__,i=Mi(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},gi.prototype.clear=function(){this.size=0,this.__data__={hash:new yi,map:new(Kn||vi),string:new yi}},gi.prototype.delete=function(t){var e=zo(this,t).delete(t);return this.size-=e?1:0,e},gi.prototype.get=function(t){return zo(this,t).get(t)},gi.prototype.has=function(t){return zo(this,t).has(t)},gi.prototype.set=function(t,e){var n=zo(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},bi.prototype.add=bi.prototype.push=function(t){return this.__data__.set(t,c),this},bi.prototype.has=function(t){return this.__data__.has(t)},xi.prototype.clear=function(){this.__data__=new vi,this.size=0},xi.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xi.prototype.get=function(t){return this.__data__.get(t)},xi.prototype.has=function(t){return this.__data__.has(t)},xi.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vi){var i=n.__data__;if(!Kn||i.length<s-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new gi(i)}return n.set(t,e),this.size=n.size,this};var Di=oo(Gi),Li=oo(Hi,!0);function Vi(t,e){var n=!0;return Di(t,function(t,i,r){return n=!!e(t,i,r)}),n}function qi(t,e,n){for(var i=-1,r=t.length;++i<r;){var s=t[i],a=e(s);if(null!=a&&(u===o?a==a&&!Oa(a):n(a,u)))var u=a,c=s}return c}function Ui(t,e){var n=[];return Di(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Ni(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=Yo),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Ni(a,e-1,n,i,r):tn(r,a):i||(r[r.length]=a)}return r}var Yi=so(),Wi=so(!0);function Gi(t,e){return t&&Yi(t,e,iu)}function Hi(t,e){return t&&Wi(t,e,iu)}function Ji(t,e){return Ze(e,function(e){return wa(t[e])})}function Xi(t,e){for(var n=0,i=(e=Wr(e,t)).length;null!=t&&n<i;)t=t[cs(e[n++])];return n&&n==i?t:o}function Zi(t,e,n){var i=e(t);return da(t)?i:tn(i,n(t))}function Ki(t){return null==t?t===o?ot:$:De&&De in te(t)?function(t){var e=ce.call(t,De),n=t[De];try{t[De]=o;var i=!0}catch(t){}var r=fe.call(t);return i&&(e?t[De]=n:delete t[De]),r}(t):function(t){return fe.call(t)}(t)}function $i(t,e){return t>e}function Qi(t,e){return null!=t&&ce.call(t,e)}function tr(t,e){return null!=t&&e in te(t)}function er(t,e,i){for(var r=i?$e:Ke,s=t[0].length,a=t.length,u=a,c=n(a),h=1/0,l=[];u--;){var f=t[u];u&&e&&(f=Qe(f,yn(e))),h=Wn(f.length,h),c[u]=!i&&(e||s>=120&&f.length>=120)?new bi(u&&f):o}f=t[0];var p=-1,m=c[0];t:for(;++p<s&&l.length<h;){var _=f[p],d=e?e(_):_;if(_=i||0!==_?_:0,!(m?gn(m,d):r(l,d,i))){for(u=a;--u;){var y=c[u];if(!(y?gn(y,d):r(t[u],d,i)))continue t}m&&m.push(d),l.push(_)}}return l}function nr(t,e,n){var i=null==(t=ts(t,e=Wr(e,t)))?t:t[cs(As(e))];return null==i?o:We(i,t,n)}function ir(t){return Ea(t)&&Ki(t)==q}function rr(t,e,n,i,r){return t===e||(null==t||null==e||!Ea(t)&&!Ea(e)?t!=t&&e!=e:function(t,e,n,i,r,s){var a=da(t),u=da(e),c=a?U:qo(t),h=u?U:qo(e),l=(c=c==q?Q:c)==Q,f=(h=h==q?Q:h)==Q,p=c==h;if(p&&ba(t)){if(!ba(e))return!1;a=!0,l=!1}if(p&&!l)return s||(s=new xi),a||Fa(t)?Mo(t,e,n,i,r,s):function(t,e,n,i,r,o,s){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ut:return!(t.byteLength!=e.byteLength||!o(new be(t),new be(e)));case Y:case W:case K:return fa(+t,+e);case H:return t.name==e.name&&t.message==e.message;case et:case it:return t==e+"";case Z:var a=Sn;case nt:var u=i&_;if(a||(a=Tn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;i|=d,s.set(t,e);var h=Mo(a(t),a(e),i,r,o,s);return s.delete(t),h;case rt:if(hi)return hi.call(t)==hi.call(e)}return!1}(t,e,c,n,i,r,s);if(!(n&_)){var m=l&&ce.call(t,"__wrapped__"),y=f&&ce.call(e,"__wrapped__");if(m||y){var v=m?t.value():t,g=y?e.value():e;return s||(s=new xi),r(v,g,n,i,s)}}return!!p&&(s||(s=new xi),function(t,e,n,i,r,s){var a=n&_,u=Po(t),c=u.length,h=Po(e).length;if(c!=h&&!a)return!1;for(var l=c;l--;){var f=u[l];if(!(a?f in e:ce.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var m=!0;s.set(t,e),s.set(e,t);for(var d=a;++l<c;){f=u[l];var y=t[f],v=e[f];if(i)var g=a?i(v,y,f,e,t,s):i(y,v,f,t,e,s);if(!(g===o?y===v||r(y,v,n,i,s):g)){m=!1;break}d||(d="constructor"==f)}if(m&&!d){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(m=!1)}return s.delete(t),s.delete(e),m}(t,e,n,i,r,s))}(t,e,n,i,rr,r))}function or(t,e,n,i){var r=n.length,s=r,a=!i;if(null==t)return!s;for(t=te(t);r--;){var u=n[r];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++r<s;){var c=(u=n[r])[0],h=t[c],l=u[1];if(a&&u[2]){if(h===o&&!(c in t))return!1}else{var f=new xi;if(i)var p=i(h,l,c,t,e,f);if(!(p===o?rr(l,h,_|d,i,f):p))return!1}}return!0}function sr(t){return!(!Sa(t)||function(t){return!!le&&le in t}(t))&&(wa(t)?_e:Gt).test(hs(t))}function ar(t){return"function"==typeof t?t:null==t?Tu:"object"==typeof t?da(t)?pr(t[0],t[1]):fr(t):Du(t)}function ur(t){if(!Zo(t))return Nn(t);var e=[];for(var n in te(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function cr(t){if(!Sa(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Zo(t),n=[];for(var i in t)("constructor"!=i||!e&&ce.call(t,i))&&n.push(i);return n}function hr(t,e){return t<e}function lr(t,e){var i=-1,r=va(t)?n(t.length):[];return Di(t,function(t,n,o){r[++i]=e(t,n,o)}),r}function fr(t){var e=jo(t);return 1==e.length&&e[0][2]?$o(e[0][0],e[0][1]):function(n){return n===t||or(n,t,e)}}function pr(t,e){return Ho(t)&&Ko(e)?$o(cs(t),e):function(n){var i=$a(n,t);return i===o&&i===e?Qa(n,t):rr(e,i,_|d)}}function mr(t,e,n,i,r){t!==e&&Yi(e,function(s,a){if(Sa(s))r||(r=new xi),function(t,e,n,i,r,s,a){var u=es(t,n),c=es(e,n),h=a.get(c);if(h)Si(t,n,h);else{var l=s?s(u,c,n+"",t,e,a):o,f=l===o;if(f){var p=da(c),m=!p&&ba(c),_=!p&&!m&&Fa(c);l=c,p||m||_?da(u)?l=u:ga(u)?l=eo(u):m?(f=!1,l=Xr(c,!0)):_?(f=!1,l=Kr(c,!0)):l=[]:Pa(c)||_a(c)?(l=u,_a(u)?l=Na(u):Sa(u)&&!wa(u)||(l=No(c))):f=!1}f&&(a.set(c,l),r(l,c,i,s,a),a.delete(c)),Si(t,n,l)}}(t,e,a,n,mr,i,r);else{var u=i?i(es(t,a),s,a+"",t,e,r):o;u===o&&(u=s),Si(t,a,u)}},ru)}function _r(t,e){var n=t.length;if(n)return Wo(e+=e<0?n:0,n)?t[e]:o}function dr(t,e,n){var i=-1;return e=Qe(e.length?e:[Tu],yn(Fo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(lr(t,function(t,n,r){return{criteria:Qe(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=$r(r[i],o[i]);if(u){if(i>=a)return u;var c=n[i];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function yr(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=Xi(t,s);n(a,s)&&Cr(o,Wr(s,t),a)}return o}function vr(t,e,n,i){var r=i?cn:un,o=-1,s=e.length,a=t;for(t===e&&(e=eo(e)),n&&(a=Qe(t,yn(n)));++o<s;)for(var u=0,c=e[o],h=n?n(c):c;(u=r(a,h,u,i))>-1;)a!==t&&Oe.call(a,u,1),Oe.call(t,u,1);return t}function gr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Wo(r)?Oe.call(t,r,1):jr(t,r)}}return t}function br(t,e){return t+Dn(Jn()*(e-t+1))}function xr(t,e){var n="";if(!t||e<1||e>O)return n;do{e%2&&(n+=t),(e=Dn(e/2))&&(t+=t)}while(e);return n}function Ar(t,e){return rs(Qo(t,e,Tu),t+"")}function wr(t){return wi(fu(t))}function Br(t,e){var n=fu(t);return as(n,Ri(e,0,n.length))}function Cr(t,e,n,i){if(!Sa(t))return t;for(var r=-1,s=(e=Wr(e,t)).length,a=s-1,u=t;null!=u&&++r<s;){var c=cs(e[r]),h=n;if(r!=a){var l=u[c];(h=i?i(l,c,u):o)===o&&(h=Sa(l)?l:Wo(e[r+1])?[]:{})}Ei(u,c,h),u=u[c]}return t}var Sr=ni?function(t,e){return ni.set(t,e),t}:Tu,Er=on?function(t,e){return on(t,"toString",{configurable:!0,enumerable:!1,value:Su(e),writable:!0})}:Tu;function Mr(t){return as(fu(t))}function Tr(t,e,i){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var s=n(o);++r<o;)s[r]=t[r+e];return s}function Pr(t,e){var n;return Di(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function kr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=L){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!Oa(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return Ir(t,e,Tu,n)}function Ir(t,e,n,i){e=n(e);for(var r=0,s=null==t?0:t.length,a=e!=e,u=null===e,c=Oa(e),h=e===o;r<s;){var l=Dn((r+s)/2),f=n(t[l]),p=f!==o,m=null===f,_=f==f,d=Oa(f);if(a)var y=i||_;else y=h?_&&(i||p):u?_&&p&&(i||!m):c?_&&p&&!m&&(i||!d):!m&&!d&&(i?f<=e:f<e);y?r=l+1:s=l}return Wn(s,D)}function Rr(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!fa(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function Or(t){return"number"==typeof t?t:Oa(t)?z:+t}function Fr(t){if("string"==typeof t)return t;if(da(t))return Qe(t,Fr)+"";if(Oa(t))return li?li.call(t):"";var e=t+"";return"0"==e&&1/t==-R?"-0":e}function zr(t,e,n){var i=-1,r=Ke,o=t.length,a=!0,u=[],c=u;if(n)a=!1,r=$e;else if(o>=s){var h=e?null:Ao(t);if(h)return Tn(h);a=!1,r=gn,c=new bi}else c=e?[]:u;t:for(;++i<o;){var l=t[i],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue t;e&&c.push(f),u.push(l)}else r(c,f,n)||(c!==u&&c.push(f),u.push(l))}return u}function jr(t,e){return null==(t=ts(t,e=Wr(e,t)))||delete t[cs(As(e))]}function Dr(t,e,n,i){return Cr(t,e,n(Xi(t,e)),i)}function Lr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Tr(t,i?0:o,i?o+1:r):Tr(t,i?o+1:0,i?r:o)}function Vr(t,e){var n=t;return n instanceof di&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function qr(t,e,i){var r=t.length;if(r<2)return r?zr(t[0]):[];for(var o=-1,s=n(r);++o<r;)for(var a=t[o],u=-1;++u<r;)u!=o&&(s[o]=ji(s[o]||a,t[u],e,i));return zr(Ni(s,1),e,i)}function Ur(t,e,n){for(var i=-1,r=t.length,s=e.length,a={};++i<r;){var u=i<s?e[i]:o;n(a,t[i],u)}return a}function Nr(t){return ga(t)?t:[]}function Yr(t){return"function"==typeof t?t:Tu}function Wr(t,e){return da(t)?t:Ho(t,e)?[t]:us(Ya(t))}var Gr=Ar;function Hr(t,e,n){var i=t.length;return n=n===o?i:n,!e&&n>=i?t:Tr(t,e,n)}var Jr=pn||function(t){return Re.clearTimeout(t)};function Xr(t,e){if(e)return t.slice();var n=t.length,i=Ae?Ae(n):new t.constructor(n);return t.copy(i),i}function Zr(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Kr(t,e){var n=e?Zr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function $r(t,e){if(t!==e){var n=t!==o,i=null===t,r=t==t,s=Oa(t),a=e!==o,u=null===e,c=e==e,h=Oa(e);if(!u&&!h&&!s&&t>e||s&&a&&c&&!u&&!h||i&&a&&c||!n&&c||!r)return 1;if(!i&&!s&&!h&&t<e||h&&n&&r&&!i&&!s||u&&n&&r||!a&&r||!c)return-1}return 0}function Qr(t,e,i,r){for(var o=-1,s=t.length,a=i.length,u=-1,c=e.length,h=Yn(s-a,0),l=n(c+h),f=!r;++u<c;)l[u]=e[u];for(;++o<a;)(f||o<s)&&(l[i[o]]=t[o]);for(;h--;)l[u++]=t[o++];return l}function to(t,e,i,r){for(var o=-1,s=t.length,a=-1,u=i.length,c=-1,h=e.length,l=Yn(s-u,0),f=n(l+h),p=!r;++o<l;)f[o]=t[o];for(var m=o;++c<h;)f[m+c]=e[c];for(;++a<u;)(p||o<s)&&(f[m+i[a]]=t[o++]);return f}function eo(t,e){var i=-1,r=t.length;for(e||(e=n(r));++i<r;)e[i]=t[i];return e}function no(t,e,n,i){var r=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=i?i(n[u],t[u],u,n,t):o;c===o&&(c=t[u]),r?ki(n,u,c):Ei(n,u,c)}return n}function io(t,e){return function(n,i){var r=da(n)?Ge:Ti,o=e?e():{};return r(n,t,Fo(i,2),o)}}function ro(t){return Ar(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:o,a=r>2?n[2]:o;for(s=t.length>3&&"function"==typeof s?(r--,s):o,a&&Go(n[0],n[1],a)&&(s=r<3?o:s,r=1),e=te(e);++i<r;){var u=n[i];u&&t(e,u,i,s)}return e})}function oo(t,e){return function(n,i){if(null==n)return n;if(!va(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=te(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function so(t){return function(e,n,i){for(var r=-1,o=te(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}function ao(t){return function(e){var n=Cn(e=Ya(e))?In(e):o,i=n?n[0]:e.charAt(0),r=n?Hr(n,1).join(""):e.slice(1);return i[t]()+r}}function uo(t){return function(e){return en(wu(_u(e).replace(ve,"")),t,"")}}function co(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pi(t.prototype),i=t.apply(n,e);return Sa(i)?i:n}}function ho(t){return function(e,n,i){var r=te(e);if(!va(e)){var s=Fo(n,3);e=iu(e),n=function(t){return s(r[t],t,r)}}var a=t(e,n,i);return a>-1?r[s?e[a]:a]:o}}function lo(t){return To(function(e){var n=e.length,i=n,r=_i.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new ie(u);if(r&&!a&&"wrapper"==Ro(s))var a=new _i([],!0)}for(i=a?i:n;++i<n;){var c=Ro(s=e[i]),h="wrapper"==c?Io(s):o;a=h&&Jo(h[0])&&h[1]==(B|b|A|C)&&!h[4].length&&1==h[9]?a[Ro(h[0])].apply(a,h[3]):1==s.length&&Jo(s)?a[c]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&da(i))return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function fo(t,e,i,r,s,a,u,c,h,l){var f=e&B,p=e&y,m=e&v,_=e&(b|x),d=e&S,g=m?o:co(t);return function y(){for(var v=arguments.length,b=n(v),x=v;x--;)b[x]=arguments[x];if(_)var A=Oo(y),w=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(b,A);if(r&&(b=Qr(b,r,s,_)),a&&(b=to(b,a,u,_)),v-=w,_&&v<l){var B=Mn(b,A);return bo(t,e,fo,y.placeholder,i,b,B,c,h,l-v)}var C=p?i:this,S=m?C[t]:t;return v=b.length,c?b=function(t,e){for(var n=t.length,i=Wn(e.length,n),r=eo(t);i--;){var s=e[i];t[i]=Wo(s,n)?r[s]:o}return t}(b,c):d&&v>1&&b.reverse(),f&&h<v&&(b.length=h),this&&this!==Re&&this instanceof y&&(S=g||co(S)),S.apply(C,b)}}function po(t,e){return function(n,i){return function(t,e,n,i){return Gi(t,function(t,r,o){e(i,n(t),r,o)}),i}(n,t,e(i),{})}}function mo(t,e){return function(n,i){var r;if(n===o&&i===o)return e;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=Fr(n),i=Fr(i)):(n=Or(n),i=Or(i)),r=t(n,i)}return r}}function _o(t){return To(function(e){return e=Qe(e,yn(Fo())),Ar(function(n){var i=this;return t(e,function(t){return We(t,i,n)})})})}function yo(t,e){var n=(e=e===o?" ":Fr(e)).length;if(n<2)return n?xr(e,t):e;var i=xr(e,jn(t/kn(e)));return Cn(e)?Hr(In(i),0,t).join(""):i.slice(0,t)}function vo(t){return function(e,i,r){return r&&"number"!=typeof r&&Go(e,i,r)&&(i=r=o),e=La(e),i===o?(i=e,e=0):i=La(i),function(t,e,i,r){for(var o=-1,s=Yn(jn((e-t)/(i||1)),0),a=n(s);s--;)a[r?s:++o]=t,t+=i;return a}(e,i,r=r===o?e<i?1:-1:La(r),t)}}function go(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ua(e),n=Ua(n)),t(e,n)}}function bo(t,e,n,i,r,s,a,u,c,h){var l=e&b;e|=l?A:w,(e&=~(l?w:A))&g||(e&=~(y|v));var f=[t,e,r,l?s:o,l?a:o,l?o:s,l?o:a,u,c,h],p=n.apply(o,f);return Jo(t)&&ns(p,f),p.placeholder=i,os(p,t,e)}function xo(t){var e=Qt[t];return function(t,n){if(t=Ua(t),n=null==n?0:Wn(Va(n),292)){var i=(Ya(t)+"e").split("e");return+((i=(Ya(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Ao=Qn&&1/Tn(new Qn([,-0]))[1]==R?function(t){return new Qn(t)}:Ou;function wo(t){return function(e){var n=qo(e);return n==Z?Sn(e):n==nt?Pn(e):function(t,e){return Qe(e,function(e){return[e,t[e]]})}(e,t(e))}}function Bo(t,e,i,r,s,a,c,h){var f=e&v;if(!f&&"function"!=typeof t)throw new ie(u);var p=r?r.length:0;if(p||(e&=~(A|w),r=s=o),c=c===o?c:Yn(Va(c),0),h=h===o?h:Va(h),p-=s?s.length:0,e&w){var m=r,_=s;r=s=o}var d=f?o:Io(t),S=[t,e,i,r,s,m,_,a,c,h];if(d&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<(y|v|B),s=i==B&&n==b||i==B&&n==C&&t[7].length<=e[8]||i==(B|C)&&e[7].length<=e[8]&&n==b;if(!o&&!s)return t;i&y&&(t[2]=e[2],r|=n&y?0:g);var a=e[3];if(a){var u=t[3];t[3]=u?Qr(u,a,e[4]):a,t[4]=u?Mn(t[3],l):e[4]}(a=e[5])&&(u=t[5],t[5]=u?to(u,a,e[6]):a,t[6]=u?Mn(t[5],l):e[6]),(a=e[7])&&(t[7]=a),i&B&&(t[8]=null==t[8]?e[8]:Wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(S,d),t=S[0],e=S[1],i=S[2],r=S[3],s=S[4],!(h=S[9]=S[9]===o?f?0:t.length:Yn(S[9]-p,0))&&e&(b|x)&&(e&=~(b|x)),e&&e!=y)E=e==b||e==x?function(t,e,i){var r=co(t);return function s(){for(var a=arguments.length,u=n(a),c=a,h=Oo(s);c--;)u[c]=arguments[c];var l=a<3&&u[0]!==h&&u[a-1]!==h?[]:Mn(u,h);return(a-=l.length)<i?bo(t,e,fo,s.placeholder,o,u,l,o,o,i-a):We(this&&this!==Re&&this instanceof s?r:t,this,u)}}(t,e,h):e!=A&&e!=(y|A)||s.length?fo.apply(o,S):function(t,e,i,r){var o=e&y,s=co(t);return function e(){for(var a=-1,u=arguments.length,c=-1,h=r.length,l=n(h+u),f=this&&this!==Re&&this instanceof e?s:t;++c<h;)l[c]=r[c];for(;u--;)l[c++]=arguments[++a];return We(f,o?i:this,l)}}(t,e,i,r);else var E=function(t,e,n){var i=e&y,r=co(t);return function e(){return(this&&this!==Re&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,i);return os((d?Sr:ns)(E,S),t,e)}function Co(t,e,n,i){return t===o||fa(t,se[n])&&!ce.call(i,n)?e:t}function So(t,e,n,i,r,s){return Sa(t)&&Sa(e)&&(s.set(e,t),mr(t,e,o,So,s),s.delete(e)),t}function Eo(t){return Pa(t)?o:t}function Mo(t,e,n,i,r,s){var a=n&_,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var l=-1,f=!0,p=n&d?new bi:o;for(s.set(t,e),s.set(e,t);++l<u;){var m=t[l],y=e[l];if(i)var v=a?i(y,m,l,e,t,s):i(m,y,l,t,e,s);if(v!==o){if(v)continue;f=!1;break}if(p){if(!rn(e,function(t,e){if(!gn(p,e)&&(m===t||r(m,t,n,i,s)))return p.push(e)})){f=!1;break}}else if(m!==y&&!r(m,y,n,i,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function To(t){return rs(Qo(t,o,ys),t+"")}function Po(t){return Zi(t,iu,Lo)}function ko(t){return Zi(t,ru,Vo)}var Io=ni?function(t){return ni.get(t)}:Ou;function Ro(t){for(var e=t.name+"",n=ii[e],i=ce.call(ii,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Oo(t){return(ce.call(fi,"placeholder")?fi:t).placeholder}function Fo(){var t=fi.iteratee||Pu;return t=t===Pu?ar:t,arguments.length?t(arguments[0],arguments[1]):t}function zo(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function jo(t){for(var e=iu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ko(r)]}return e}function Do(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return sr(n)?n:o}var Lo=Ln?function(t){return null==t?[]:(t=te(t),Ze(Ln(t),function(e){return Ie.call(t,e)}))}:qu,Vo=Ln?function(t){for(var e=[];t;)tn(e,Lo(t)),t=Me(t);return e}:qu,qo=Ki;function Uo(t,e,n){for(var i=-1,r=(e=Wr(e,t)).length,o=!1;++i<r;){var s=cs(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Ca(r)&&Wo(s,r)&&(da(t)||_a(t))}function No(t){return"function"!=typeof t.constructor||Zo(t)?{}:pi(Me(t))}function Yo(t){return da(t)||_a(t)||!!(Fe&&t&&t[Fe])}function Wo(t,e){var n=typeof t;return!!(e=null==e?O:e)&&("number"==n||"symbol"!=n&&Jt.test(t))&&t>-1&&t%1==0&&t<e}function Go(t,e,n){if(!Sa(n))return!1;var i=typeof e;return!!("number"==i?va(n)&&Wo(e,n.length):"string"==i&&e in n)&&fa(n[e],t)}function Ho(t,e){if(da(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Oa(t))||Pt.test(t)||!Tt.test(t)||null!=e&&t in te(e)}function Jo(t){var e=Ro(t),n=fi[e];if("function"!=typeof n||!(e in di.prototype))return!1;if(t===n)return!0;var i=Io(n);return!!i&&t===i[0]}(Zn&&qo(new Zn(new ArrayBuffer(1)))!=ct||Kn&&qo(new Kn)!=Z||$n&&"[object Promise]"!=qo($n.resolve())||Qn&&qo(new Qn)!=nt||ti&&qo(new ti)!=st)&&(qo=function(t){var e=Ki(t),n=e==Q?t.constructor:o,i=n?hs(n):"";if(i)switch(i){case ri:return ct;case oi:return Z;case si:return"[object Promise]";case ai:return nt;case ui:return st}return e});var Xo=ae?wa:Uu;function Zo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Ko(t){return t==t&&!Sa(t)}function $o(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in te(n))}}function Qo(t,e,i){return e=Yn(e===o?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=Yn(r.length-e,0),a=n(s);++o<s;)a[o]=r[e+o];o=-1;for(var u=n(e+1);++o<e;)u[o]=r[o];return u[e]=i(a),We(t,this,u)}}function ts(t,e){return e.length<2?t:Xi(t,Tr(e,0,-1))}function es(t,e){if("__proto__"!=e)return t[e]}var ns=ss(Sr),is=zn||function(t,e){return Re.setTimeout(t,e)},rs=ss(Er);function os(t,e,n){var i=e+"";return rs(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(jt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return He(V,function(n){var i="_."+n[0];e&n[1]&&!Ke(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(Dt);return e?e[1].split(Lt):[]}(i),n)))}function ss(t){var e=0,n=0;return function(){var i=Gn(),r=P-(i-n);if(n=i,r>0){if(++e>=T)return arguments[0]}else e=0;return t.apply(o,arguments)}}function as(t,e){var n=-1,i=t.length,r=i-1;for(e=e===o?i:e;++n<e;){var s=br(n,r),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var us=function(t){var e=sa(t,function(t){return n.size===h&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(kt,function(t,n,i,r){e.push(i?r.replace(qt,"$1"):n||t)}),e});function cs(t){if("string"==typeof t||Oa(t))return t;var e=t+"";return"0"==e&&1/t==-R?"-0":e}function hs(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ls(t){if(t instanceof di)return t.clone();var e=new _i(t.__wrapped__,t.__chain__);return e.__actions__=eo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fs=Ar(function(t,e){return ga(t)?ji(t,Ni(e,1,ga,!0)):[]}),ps=Ar(function(t,e){var n=As(e);return ga(n)&&(n=o),ga(t)?ji(t,Ni(e,1,ga,!0),Fo(n,2)):[]}),ms=Ar(function(t,e){var n=As(e);return ga(n)&&(n=o),ga(t)?ji(t,Ni(e,1,ga,!0),o,n):[]});function _s(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Va(n);return r<0&&(r=Yn(i+r,0)),an(t,Fo(e,3),r)}function ds(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==o&&(r=Va(n),r=n<0?Yn(i+r,0):Wn(r,i-1)),an(t,Fo(e,3),r,!0)}function ys(t){return null!=t&&t.length?Ni(t,1):[]}function vs(t){return t&&t.length?t[0]:o}var gs=Ar(function(t){var e=Qe(t,Nr);return e.length&&e[0]===t[0]?er(e):[]}),bs=Ar(function(t){var e=As(t),n=Qe(t,Nr);return e===As(n)?e=o:n.pop(),n.length&&n[0]===t[0]?er(n,Fo(e,2)):[]}),xs=Ar(function(t){var e=As(t),n=Qe(t,Nr);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?er(n,o,e):[]});function As(t){var e=null==t?0:t.length;return e?t[e-1]:o}var ws=Ar(Bs);function Bs(t,e){return t&&t.length&&e&&e.length?vr(t,e):t}var Cs=To(function(t,e){var n=null==t?0:t.length,i=Ii(t,e);return gr(t,Qe(e,function(t){return Wo(t,n)?+t:t}).sort($r)),i});function Ss(t){return null==t?t:Xn.call(t)}var Es=Ar(function(t){return zr(Ni(t,1,ga,!0))}),Ms=Ar(function(t){var e=As(t);return ga(e)&&(e=o),zr(Ni(t,1,ga,!0),Fo(e,2))}),Ts=Ar(function(t){var e=As(t);return e="function"==typeof e?e:o,zr(Ni(t,1,ga,!0),o,e)});function Ps(t){if(!t||!t.length)return[];var e=0;return t=Ze(t,function(t){if(ga(t))return e=Yn(t.length,e),!0}),dn(e,function(e){return Qe(t,fn(e))})}function ks(t,e){if(!t||!t.length)return[];var n=Ps(t);return null==e?n:Qe(n,function(t){return We(e,o,t)})}var Is=Ar(function(t,e){return ga(t)?ji(t,e):[]}),Rs=Ar(function(t){return qr(Ze(t,ga))}),Os=Ar(function(t){var e=As(t);return ga(e)&&(e=o),qr(Ze(t,ga),Fo(e,2))}),Fs=Ar(function(t){var e=As(t);return e="function"==typeof e?e:o,qr(Ze(t,ga),o,e)}),zs=Ar(Ps);var js=Ar(function(t){var e=t.length,n=e>1?t[e-1]:o;return ks(t,n="function"==typeof n?(t.pop(),n):o)});function Ds(t){var e=fi(t);return e.__chain__=!0,e}function Ls(t,e){return e(t)}var Vs=To(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Ii(e,t)};return!(e>1||this.__actions__.length)&&i instanceof di&&Wo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Ls,args:[r],thisArg:o}),new _i(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(r)});var qs=io(function(t,e,n){ce.call(t,n)?++t[n]:ki(t,n,1)});var Us=ho(_s),Ns=ho(ds);function Ys(t,e){return(da(t)?He:Di)(t,Fo(e,3))}function Ws(t,e){return(da(t)?Je:Li)(t,Fo(e,3))}var Gs=io(function(t,e,n){ce.call(t,n)?t[n].push(e):ki(t,n,[e])});var Hs=Ar(function(t,e,i){var r=-1,o="function"==typeof e,s=va(t)?n(t.length):[];return Di(t,function(t){s[++r]=o?We(e,t,i):nr(t,e,i)}),s}),Js=io(function(t,e,n){ki(t,n,e)});function Xs(t,e){return(da(t)?Qe:lr)(t,Fo(e,3))}var Zs=io(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ks=Ar(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Go(t,e[0],e[1])?e=[]:n>2&&Go(e[0],e[1],e[2])&&(e=[e[0]]),dr(t,Ni(e,1),[])}),$s=Fn||function(){return Re.Date.now()};function Qs(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Bo(t,B,o,o,o,o,e)}function ta(t,e){var n;if("function"!=typeof e)throw new ie(u);return t=Va(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var ea=Ar(function(t,e,n){var i=y;if(n.length){var r=Mn(n,Oo(ea));i|=A}return Bo(t,i,e,n,r)}),na=Ar(function(t,e,n){var i=y|v;if(n.length){var r=Mn(n,Oo(na));i|=A}return Bo(e,i,t,n,r)});function ia(t,e,n){var i,r,s,a,c,h,l=0,f=!1,p=!1,m=!0;if("function"!=typeof t)throw new ie(u);function _(e){var n=i,s=r;return i=r=o,l=e,a=t.apply(s,n)}function d(t){var n=t-h;return h===o||n>=e||n<0||p&&t-l>=s}function y(){var t=$s();if(d(t))return v(t);c=is(y,function(t){var n=e-(t-h);return p?Wn(n,s-(t-l)):n}(t))}function v(t){return c=o,m&&i?_(t):(i=r=o,a)}function g(){var t=$s(),n=d(t);if(i=arguments,r=this,h=t,n){if(c===o)return function(t){return l=t,c=is(y,e),f?_(t):a}(h);if(p)return c=is(y,e),_(h)}return c===o&&(c=is(y,e)),a}return e=Ua(e)||0,Sa(n)&&(f=!!n.leading,s=(p="maxWait"in n)?Yn(Ua(n.maxWait)||0,e):s,m="trailing"in n?!!n.trailing:m),g.cancel=function(){c!==o&&Jr(c),l=0,i=h=r=c=o},g.flush=function(){return c===o?a:v($s())},g}var ra=Ar(function(t,e){return zi(t,1,e)}),oa=Ar(function(t,e,n){return zi(t,Ua(e)||0,n)});function sa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(u);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(sa.Cache||gi),n}function aa(t){if("function"!=typeof t)throw new ie(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}sa.Cache=gi;var ua=Gr(function(t,e){var n=(e=1==e.length&&da(e[0])?Qe(e[0],yn(Fo())):Qe(Ni(e,1),yn(Fo()))).length;return Ar(function(i){for(var r=-1,o=Wn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return We(t,this,i)})}),ca=Ar(function(t,e){var n=Mn(e,Oo(ca));return Bo(t,A,o,e,n)}),ha=Ar(function(t,e){var n=Mn(e,Oo(ha));return Bo(t,w,o,e,n)}),la=To(function(t,e){return Bo(t,C,o,o,o,e)});function fa(t,e){return t===e||t!=t&&e!=e}var pa=go($i),ma=go(function(t,e){return t>=e}),_a=ir(function(){return arguments}())?ir:function(t){return Ea(t)&&ce.call(t,"callee")&&!Ie.call(t,"callee")},da=n.isArray,ya=Le?yn(Le):function(t){return Ea(t)&&Ki(t)==ut};function va(t){return null!=t&&Ca(t.length)&&!wa(t)}function ga(t){return Ea(t)&&va(t)}var ba=Vn||Uu,xa=Ve?yn(Ve):function(t){return Ea(t)&&Ki(t)==W};function Aa(t){if(!Ea(t))return!1;var e=Ki(t);return e==H||e==G||"string"==typeof t.message&&"string"==typeof t.name&&!Pa(t)}function wa(t){if(!Sa(t))return!1;var e=Ki(t);return e==J||e==X||e==N||e==tt}function Ba(t){return"number"==typeof t&&t==Va(t)}function Ca(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=O}function Sa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ea(t){return null!=t&&"object"==typeof t}var Ma=qe?yn(qe):function(t){return Ea(t)&&qo(t)==Z};function Ta(t){return"number"==typeof t||Ea(t)&&Ki(t)==K}function Pa(t){if(!Ea(t)||Ki(t)!=Q)return!1;var e=Me(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==pe}var ka=Ue?yn(Ue):function(t){return Ea(t)&&Ki(t)==et};var Ia=Ne?yn(Ne):function(t){return Ea(t)&&qo(t)==nt};function Ra(t){return"string"==typeof t||!da(t)&&Ea(t)&&Ki(t)==it}function Oa(t){return"symbol"==typeof t||Ea(t)&&Ki(t)==rt}var Fa=Ye?yn(Ye):function(t){return Ea(t)&&Ca(t.length)&&!!Se[Ki(t)]};var za=go(hr),ja=go(function(t,e){return t<=e});function Da(t){if(!t)return[];if(va(t))return Ra(t)?In(t):eo(t);if(je&&t[je])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[je]());var e=qo(t);return(e==Z?Sn:e==nt?Tn:fu)(t)}function La(t){return t?(t=Ua(t))===R||t===-R?(t<0?-1:1)*F:t==t?t:0:0===t?t:0}function Va(t){var e=La(t),n=e%1;return e==e?n?e-n:e:0}function qa(t){return t?Ri(Va(t),0,j):0}function Ua(t){if("number"==typeof t)return t;if(Oa(t))return z;if(Sa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Sa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ot,"");var n=Wt.test(t);return n||Ht.test(t)?Pe(t.slice(2),n?2:8):Yt.test(t)?z:+t}function Na(t){return no(t,ru(t))}function Ya(t){return null==t?"":Fr(t)}var Wa=ro(function(t,e){if(Zo(e)||va(e))no(e,iu(e),t);else for(var n in e)ce.call(e,n)&&Ei(t,n,e[n])}),Ga=ro(function(t,e){no(e,ru(e),t)}),Ha=ro(function(t,e,n,i){no(e,ru(e),t,i)}),Ja=ro(function(t,e,n,i){no(e,iu(e),t,i)}),Xa=To(Ii);var Za=Ar(function(t,e){t=te(t);var n=-1,i=e.length,r=i>2?e[2]:o;for(r&&Go(e[0],e[1],r)&&(i=1);++n<i;)for(var s=e[n],a=ru(s),u=-1,c=a.length;++u<c;){var h=a[u],l=t[h];(l===o||fa(l,se[h])&&!ce.call(t,h))&&(t[h]=s[h])}return t}),Ka=Ar(function(t){return t.push(o,So),We(su,o,t)});function $a(t,e,n){var i=null==t?o:Xi(t,e);return i===o?n:i}function Qa(t,e){return null!=t&&Uo(t,e,tr)}var tu=po(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n},Su(Tu)),eu=po(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]},Fo),nu=Ar(nr);function iu(t){return va(t)?Ai(t):ur(t)}function ru(t){return va(t)?Ai(t,!0):cr(t)}var ou=ro(function(t,e,n){mr(t,e,n)}),su=ro(function(t,e,n,i){mr(t,e,n,i)}),au=To(function(t,e){var n={};if(null==t)return n;var i=!1;e=Qe(e,function(e){return e=Wr(e,t),i||(i=e.length>1),e}),no(t,ko(t),n),i&&(n=Oi(n,f|p|m,Eo));for(var r=e.length;r--;)jr(n,e[r]);return n});var uu=To(function(t,e){return null==t?{}:function(t,e){return yr(t,e,function(e,n){return Qa(t,n)})}(t,e)});function cu(t,e){if(null==t)return{};var n=Qe(ko(t),function(t){return[t]});return e=Fo(e),yr(t,n,function(t,n){return e(t,n[0])})}var hu=wo(iu),lu=wo(ru);function fu(t){return null==t?[]:vn(t,iu(t))}var pu=uo(function(t,e,n){return e=e.toLowerCase(),t+(n?mu(e):e)});function mu(t){return Au(Ya(t).toLowerCase())}function _u(t){return(t=Ya(t))&&t.replace(Xt,An).replace(ge,"")}var du=uo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),yu=uo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),vu=ao("toLowerCase");var gu=uo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var bu=uo(function(t,e,n){return t+(n?" ":"")+Au(e)});var xu=uo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Au=ao("toUpperCase");function wu(t,e,n){return t=Ya(t),(e=n?o:e)===o?function(t){return we.test(t)}(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.match(Vt)||[]}(t):t.match(e)||[]}var Bu=Ar(function(t,e){try{return We(t,o,e)}catch(t){return Aa(t)?t:new r(t)}}),Cu=To(function(t,e){return He(e,function(e){e=cs(e),ki(t,e,ea(t[e],t))}),t});function Su(t){return function(){return t}}var Eu=lo(),Mu=lo(!0);function Tu(t){return t}function Pu(t){return ar("function"==typeof t?t:Oi(t,f))}var ku=Ar(function(t,e){return function(n){return nr(n,t,e)}}),Iu=Ar(function(t,e){return function(n){return nr(t,n,e)}});function Ru(t,e,n){var i=iu(e),r=Ji(e,i);null!=n||Sa(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Ji(e,iu(e)));var o=!(Sa(n)&&"chain"in n&&!n.chain),s=wa(t);return He(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=eo(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,tn([this.value()],arguments))})}),t}function Ou(){}var Fu=_o(Qe),zu=_o(Xe),ju=_o(rn);function Du(t){return Ho(t)?fn(cs(t)):function(t){return function(e){return Xi(e,t)}}(t)}var Lu=vo(),Vu=vo(!0);function qu(){return[]}function Uu(){return!1}var Nu=mo(function(t,e){return t+e},0),Yu=xo("ceil"),Wu=mo(function(t,e){return t/e},1),Gu=xo("floor");var Hu=mo(function(t,e){return t*e},1),Ju=xo("round"),Xu=mo(function(t,e){return t-e},0);return fi.after=function(t,e){if("function"!=typeof e)throw new ie(u);return t=Va(t),function(){if(--t<1)return e.apply(this,arguments)}},fi.ary=Qs,fi.assign=Wa,fi.assignIn=Ga,fi.assignInWith=Ha,fi.assignWith=Ja,fi.at=Xa,fi.before=ta,fi.bind=ea,fi.bindAll=Cu,fi.bindKey=na,fi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return da(t)?t:[t]},fi.chain=Ds,fi.chunk=function(t,e,i){e=(i?Go(t,e,i):e===o)?1:Yn(Va(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var s=0,a=0,u=n(jn(r/e));s<r;)u[a++]=Tr(t,s,s+=e);return u},fi.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},fi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return tn(da(i)?eo(i):[i],Ni(e,1))},fi.cond=function(t){var e=null==t?0:t.length,n=Fo();return t=e?Qe(t,function(t){if("function"!=typeof t[1])throw new ie(u);return[n(t[0]),t[1]]}):[],Ar(function(n){for(var i=-1;++i<e;){var r=t[i];if(We(r[0],this,n))return We(r[1],this,n)}})},fi.conforms=function(t){return function(t){var e=iu(t);return function(n){return Fi(n,t,e)}}(Oi(t,f))},fi.constant=Su,fi.countBy=qs,fi.create=function(t,e){var n=pi(t);return null==e?n:Pi(n,e)},fi.curry=function t(e,n,i){var r=Bo(e,b,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},fi.curryRight=function t(e,n,i){var r=Bo(e,x,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},fi.debounce=ia,fi.defaults=Za,fi.defaultsDeep=Ka,fi.defer=ra,fi.delay=oa,fi.difference=fs,fi.differenceBy=ps,fi.differenceWith=ms,fi.drop=function(t,e,n){var i=null==t?0:t.length;return i?Tr(t,(e=n||e===o?1:Va(e))<0?0:e,i):[]},fi.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Tr(t,0,(e=i-(e=n||e===o?1:Va(e)))<0?0:e):[]},fi.dropRightWhile=function(t,e){return t&&t.length?Lr(t,Fo(e,3),!0,!0):[]},fi.dropWhile=function(t,e){return t&&t.length?Lr(t,Fo(e,3),!0):[]},fi.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Go(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=Va(n))<0&&(n=-n>r?0:r+n),(i=i===o||i>r?r:Va(i))<0&&(i+=r),i=n>i?0:qa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},fi.filter=function(t,e){return(da(t)?Ze:Ui)(t,Fo(e,3))},fi.flatMap=function(t,e){return Ni(Xs(t,e),1)},fi.flatMapDeep=function(t,e){return Ni(Xs(t,e),R)},fi.flatMapDepth=function(t,e,n){return n=n===o?1:Va(n),Ni(Xs(t,e),n)},fi.flatten=ys,fi.flattenDeep=function(t){return null!=t&&t.length?Ni(t,R):[]},fi.flattenDepth=function(t,e){return null!=t&&t.length?Ni(t,e=e===o?1:Va(e)):[]},fi.flip=function(t){return Bo(t,S)},fi.flow=Eu,fi.flowRight=Mu,fi.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},fi.functions=function(t){return null==t?[]:Ji(t,iu(t))},fi.functionsIn=function(t){return null==t?[]:Ji(t,ru(t))},fi.groupBy=Gs,fi.initial=function(t){return null!=t&&t.length?Tr(t,0,-1):[]},fi.intersection=gs,fi.intersectionBy=bs,fi.intersectionWith=xs,fi.invert=tu,fi.invertBy=eu,fi.invokeMap=Hs,fi.iteratee=Pu,fi.keyBy=Js,fi.keys=iu,fi.keysIn=ru,fi.map=Xs,fi.mapKeys=function(t,e){var n={};return e=Fo(e,3),Gi(t,function(t,i,r){ki(n,e(t,i,r),t)}),n},fi.mapValues=function(t,e){var n={};return e=Fo(e,3),Gi(t,function(t,i,r){ki(n,i,e(t,i,r))}),n},fi.matches=function(t){return fr(Oi(t,f))},fi.matchesProperty=function(t,e){return pr(t,Oi(e,f))},fi.memoize=sa,fi.merge=ou,fi.mergeWith=su,fi.method=ku,fi.methodOf=Iu,fi.mixin=Ru,fi.negate=aa,fi.nthArg=function(t){return t=Va(t),Ar(function(e){return _r(e,t)})},fi.omit=au,fi.omitBy=function(t,e){return cu(t,aa(Fo(e)))},fi.once=function(t){return ta(2,t)},fi.orderBy=function(t,e,n,i){return null==t?[]:(da(e)||(e=null==e?[]:[e]),da(n=i?o:n)||(n=null==n?[]:[n]),dr(t,e,n))},fi.over=Fu,fi.overArgs=ua,fi.overEvery=zu,fi.overSome=ju,fi.partial=ca,fi.partialRight=ha,fi.partition=Zs,fi.pick=uu,fi.pickBy=cu,fi.property=Du,fi.propertyOf=function(t){return function(e){return null==t?o:Xi(t,e)}},fi.pull=ws,fi.pullAll=Bs,fi.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?vr(t,e,Fo(n,2)):t},fi.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?vr(t,e,o,n):t},fi.pullAt=Cs,fi.range=Lu,fi.rangeRight=Vu,fi.rearg=la,fi.reject=function(t,e){return(da(t)?Ze:Ui)(t,aa(Fo(e,3)))},fi.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Fo(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return gr(t,r),n},fi.rest=function(t,e){if("function"!=typeof t)throw new ie(u);return Ar(t,e=e===o?e:Va(e))},fi.reverse=Ss,fi.sampleSize=function(t,e,n){return e=(n?Go(t,e,n):e===o)?1:Va(e),(da(t)?Bi:Br)(t,e)},fi.set=function(t,e,n){return null==t?t:Cr(t,e,n)},fi.setWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Cr(t,e,n,i)},fi.shuffle=function(t){return(da(t)?Ci:Mr)(t)},fi.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Go(t,e,n)?(e=0,n=i):(e=null==e?0:Va(e),n=n===o?i:Va(n)),Tr(t,e,n)):[]},fi.sortBy=Ks,fi.sortedUniq=function(t){return t&&t.length?Rr(t):[]},fi.sortedUniqBy=function(t,e){return t&&t.length?Rr(t,Fo(e,2)):[]},fi.split=function(t,e,n){return n&&"number"!=typeof n&&Go(t,e,n)&&(e=n=o),(n=n===o?j:n>>>0)?(t=Ya(t))&&("string"==typeof e||null!=e&&!ka(e))&&!(e=Fr(e))&&Cn(t)?Hr(In(t),0,n):t.split(e,n):[]},fi.spread=function(t,e){if("function"!=typeof t)throw new ie(u);return e=null==e?0:Yn(Va(e),0),Ar(function(n){var i=n[e],r=Hr(n,0,e);return i&&tn(r,i),We(t,this,r)})},fi.tail=function(t){var e=null==t?0:t.length;return e?Tr(t,1,e):[]},fi.take=function(t,e,n){return t&&t.length?Tr(t,0,(e=n||e===o?1:Va(e))<0?0:e):[]},fi.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Tr(t,(e=i-(e=n||e===o?1:Va(e)))<0?0:e,i):[]},fi.takeRightWhile=function(t,e){return t&&t.length?Lr(t,Fo(e,3),!1,!0):[]},fi.takeWhile=function(t,e){return t&&t.length?Lr(t,Fo(e,3)):[]},fi.tap=function(t,e){return e(t),t},fi.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new ie(u);return Sa(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ia(t,e,{leading:i,maxWait:e,trailing:r})},fi.thru=Ls,fi.toArray=Da,fi.toPairs=hu,fi.toPairsIn=lu,fi.toPath=function(t){return da(t)?Qe(t,cs):Oa(t)?[t]:eo(us(Ya(t)))},fi.toPlainObject=Na,fi.transform=function(t,e,n){var i=da(t),r=i||ba(t)||Fa(t);if(e=Fo(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:Sa(t)&&wa(o)?pi(Me(t)):{}}return(r?He:Gi)(t,function(t,i,r){return e(n,t,i,r)}),n},fi.unary=function(t){return Qs(t,1)},fi.union=Es,fi.unionBy=Ms,fi.unionWith=Ts,fi.uniq=function(t){return t&&t.length?zr(t):[]},fi.uniqBy=function(t,e){return t&&t.length?zr(t,Fo(e,2)):[]},fi.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?zr(t,o,e):[]},fi.unset=function(t,e){return null==t||jr(t,e)},fi.unzip=Ps,fi.unzipWith=ks,fi.update=function(t,e,n){return null==t?t:Dr(t,e,Yr(n))},fi.updateWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Dr(t,e,Yr(n),i)},fi.values=fu,fi.valuesIn=function(t){return null==t?[]:vn(t,ru(t))},fi.without=Is,fi.words=wu,fi.wrap=function(t,e){return ca(Yr(e),t)},fi.xor=Rs,fi.xorBy=Os,fi.xorWith=Fs,fi.zip=zs,fi.zipObject=function(t,e){return Ur(t||[],e||[],Ei)},fi.zipObjectDeep=function(t,e){return Ur(t||[],e||[],Cr)},fi.zipWith=js,fi.entries=hu,fi.entriesIn=lu,fi.extend=Ga,fi.extendWith=Ha,Ru(fi,fi),fi.add=Nu,fi.attempt=Bu,fi.camelCase=pu,fi.capitalize=mu,fi.ceil=Yu,fi.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=Ua(n))==n?n:0),e!==o&&(e=(e=Ua(e))==e?e:0),Ri(Ua(t),e,n)},fi.clone=function(t){return Oi(t,m)},fi.cloneDeep=function(t){return Oi(t,f|m)},fi.cloneDeepWith=function(t,e){return Oi(t,f|m,e="function"==typeof e?e:o)},fi.cloneWith=function(t,e){return Oi(t,m,e="function"==typeof e?e:o)},fi.conformsTo=function(t,e){return null==e||Fi(t,e,iu(e))},fi.deburr=_u,fi.defaultTo=function(t,e){return null==t||t!=t?e:t},fi.divide=Wu,fi.endsWith=function(t,e,n){t=Ya(t),e=Fr(e);var i=t.length,r=n=n===o?i:Ri(Va(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},fi.eq=fa,fi.escape=function(t){return(t=Ya(t))&&Ct.test(t)?t.replace(wt,wn):t},fi.escapeRegExp=function(t){return(t=Ya(t))&&Rt.test(t)?t.replace(It,"\\$&"):t},fi.every=function(t,e,n){var i=da(t)?Xe:Vi;return n&&Go(t,e,n)&&(e=o),i(t,Fo(e,3))},fi.find=Us,fi.findIndex=_s,fi.findKey=function(t,e){return sn(t,Fo(e,3),Gi)},fi.findLast=Ns,fi.findLastIndex=ds,fi.findLastKey=function(t,e){return sn(t,Fo(e,3),Hi)},fi.floor=Gu,fi.forEach=Ys,fi.forEachRight=Ws,fi.forIn=function(t,e){return null==t?t:Yi(t,Fo(e,3),ru)},fi.forInRight=function(t,e){return null==t?t:Wi(t,Fo(e,3),ru)},fi.forOwn=function(t,e){return t&&Gi(t,Fo(e,3))},fi.forOwnRight=function(t,e){return t&&Hi(t,Fo(e,3))},fi.get=$a,fi.gt=pa,fi.gte=ma,fi.has=function(t,e){return null!=t&&Uo(t,e,Qi)},fi.hasIn=Qa,fi.head=vs,fi.identity=Tu,fi.includes=function(t,e,n,i){t=va(t)?t:fu(t),n=n&&!i?Va(n):0;var r=t.length;return n<0&&(n=Yn(r+n,0)),Ra(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&un(t,e,n)>-1},fi.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Va(n);return r<0&&(r=Yn(i+r,0)),un(t,e,r)},fi.inRange=function(t,e,n){return e=La(e),n===o?(n=e,e=0):n=La(n),function(t,e,n){return t>=Wn(e,n)&&t<Yn(e,n)}(t=Ua(t),e,n)},fi.invoke=nu,fi.isArguments=_a,fi.isArray=da,fi.isArrayBuffer=ya,fi.isArrayLike=va,fi.isArrayLikeObject=ga,fi.isBoolean=function(t){return!0===t||!1===t||Ea(t)&&Ki(t)==Y},fi.isBuffer=ba,fi.isDate=xa,fi.isElement=function(t){return Ea(t)&&1===t.nodeType&&!Pa(t)},fi.isEmpty=function(t){if(null==t)return!0;if(va(t)&&(da(t)||"string"==typeof t||"function"==typeof t.splice||ba(t)||Fa(t)||_a(t)))return!t.length;var e=qo(t);if(e==Z||e==nt)return!t.size;if(Zo(t))return!ur(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},fi.isEqual=function(t,e){return rr(t,e)},fi.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:o)?n(t,e):o;return i===o?rr(t,e,o,n):!!i},fi.isError=Aa,fi.isFinite=function(t){return"number"==typeof t&&qn(t)},fi.isFunction=wa,fi.isInteger=Ba,fi.isLength=Ca,fi.isMap=Ma,fi.isMatch=function(t,e){return t===e||or(t,e,jo(e))},fi.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,or(t,e,jo(e),n)},fi.isNaN=function(t){return Ta(t)&&t!=+t},fi.isNative=function(t){if(Xo(t))throw new r(a);return sr(t)},fi.isNil=function(t){return null==t},fi.isNull=function(t){return null===t},fi.isNumber=Ta,fi.isObject=Sa,fi.isObjectLike=Ea,fi.isPlainObject=Pa,fi.isRegExp=ka,fi.isSafeInteger=function(t){return Ba(t)&&t>=-O&&t<=O},fi.isSet=Ia,fi.isString=Ra,fi.isSymbol=Oa,fi.isTypedArray=Fa,fi.isUndefined=function(t){return t===o},fi.isWeakMap=function(t){return Ea(t)&&qo(t)==st},fi.isWeakSet=function(t){return Ea(t)&&Ki(t)==at},fi.join=function(t,e){return null==t?"":Un.call(t,e)},fi.kebabCase=du,fi.last=As,fi.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==o&&(r=(r=Va(n))<0?Yn(i+r,0):Wn(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):an(t,hn,r,!0)},fi.lowerCase=yu,fi.lowerFirst=vu,fi.lt=za,fi.lte=ja,fi.max=function(t){return t&&t.length?qi(t,Tu,$i):o},fi.maxBy=function(t,e){return t&&t.length?qi(t,Fo(e,2),$i):o},fi.mean=function(t){return ln(t,Tu)},fi.meanBy=function(t,e){return ln(t,Fo(e,2))},fi.min=function(t){return t&&t.length?qi(t,Tu,hr):o},fi.minBy=function(t,e){return t&&t.length?qi(t,Fo(e,2),hr):o},fi.stubArray=qu,fi.stubFalse=Uu,fi.stubObject=function(){return{}},fi.stubString=function(){return""},fi.stubTrue=function(){return!0},fi.multiply=Hu,fi.nth=function(t,e){return t&&t.length?_r(t,Va(e)):o},fi.noConflict=function(){return Re._===this&&(Re._=me),this},fi.noop=Ou,fi.now=$s,fi.pad=function(t,e,n){t=Ya(t);var i=(e=Va(e))?kn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return yo(Dn(r),n)+t+yo(jn(r),n)},fi.padEnd=function(t,e,n){t=Ya(t);var i=(e=Va(e))?kn(t):0;return e&&i<e?t+yo(e-i,n):t},fi.padStart=function(t,e,n){t=Ya(t);var i=(e=Va(e))?kn(t):0;return e&&i<e?yo(e-i,n)+t:t},fi.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Hn(Ya(t).replace(Ft,""),e||0)},fi.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Go(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=La(t),e===o?(e=t,t=0):e=La(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Jn();return Wn(t+r*(e-t+Te("1e-"+((r+"").length-1))),e)}return br(t,e)},fi.reduce=function(t,e,n){var i=da(t)?en:mn,r=arguments.length<3;return i(t,Fo(e,4),n,r,Di)},fi.reduceRight=function(t,e,n){var i=da(t)?nn:mn,r=arguments.length<3;return i(t,Fo(e,4),n,r,Li)},fi.repeat=function(t,e,n){return e=(n?Go(t,e,n):e===o)?1:Va(e),xr(Ya(t),e)},fi.replace=function(){var t=arguments,e=Ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},fi.result=function(t,e,n){var i=-1,r=(e=Wr(e,t)).length;for(r||(r=1,t=o);++i<r;){var s=null==t?o:t[cs(e[i])];s===o&&(i=r,s=n),t=wa(s)?s.call(t):s}return t},fi.round=Ju,fi.runInContext=t,fi.sample=function(t){return(da(t)?wi:wr)(t)},fi.size=function(t){if(null==t)return 0;if(va(t))return Ra(t)?kn(t):t.length;var e=qo(t);return e==Z||e==nt?t.size:ur(t).length},fi.snakeCase=gu,fi.some=function(t,e,n){var i=da(t)?rn:Pr;return n&&Go(t,e,n)&&(e=o),i(t,Fo(e,3))},fi.sortedIndex=function(t,e){return kr(t,e)},fi.sortedIndexBy=function(t,e,n){return Ir(t,e,Fo(n,2))},fi.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=kr(t,e);if(i<n&&fa(t[i],e))return i}return-1},fi.sortedLastIndex=function(t,e){return kr(t,e,!0)},fi.sortedLastIndexBy=function(t,e,n){return Ir(t,e,Fo(n,2),!0)},fi.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=kr(t,e,!0)-1;if(fa(t[n],e))return n}return-1},fi.startCase=bu,fi.startsWith=function(t,e,n){return t=Ya(t),n=null==n?0:Ri(Va(n),0,t.length),e=Fr(e),t.slice(n,n+e.length)==e},fi.subtract=Xu,fi.sum=function(t){return t&&t.length?_n(t,Tu):0},fi.sumBy=function(t,e){return t&&t.length?_n(t,Fo(e,2)):0},fi.template=function(t,e,n){var i=fi.templateSettings;n&&Go(t,e,n)&&(e=o),t=Ya(t),e=Ha({},e,i,Co);var r,s,a=Ha({},e.imports,i.imports,Co),u=iu(a),c=vn(a,u),h=0,l=e.interpolate||Zt,f="__p += '",p=ee((e.escape||Zt).source+"|"+l.source+"|"+(l===Mt?Ut:Zt).source+"|"+(e.evaluate||Zt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ce+"]")+"\n";t.replace(p,function(e,n,i,o,a,u){return i||(i=o),f+=t.slice(h,u).replace(Kt,Bn),n&&(r=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),f+="';\n";var _=e.variable;_||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(gt,""):f).replace(bt,"$1").replace(xt,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var d=Bu(function(){return $t(u,m+"return "+f).apply(o,c)});if(d.source=f,Aa(d))throw d;return d},fi.times=function(t,e){if((t=Va(t))<1||t>O)return[];var n=j,i=Wn(t,j);e=Fo(e),t-=j;for(var r=dn(i,e);++n<t;)e(n);return r},fi.toFinite=La,fi.toInteger=Va,fi.toLength=qa,fi.toLower=function(t){return Ya(t).toLowerCase()},fi.toNumber=Ua,fi.toSafeInteger=function(t){return t?Ri(Va(t),-O,O):0===t?t:0},fi.toString=Ya,fi.toUpper=function(t){return Ya(t).toUpperCase()},fi.trim=function(t,e,n){if((t=Ya(t))&&(n||e===o))return t.replace(Ot,"");if(!t||!(e=Fr(e)))return t;var i=In(t),r=In(e);return Hr(i,bn(i,r),xn(i,r)+1).join("")},fi.trimEnd=function(t,e,n){if((t=Ya(t))&&(n||e===o))return t.replace(zt,"");if(!t||!(e=Fr(e)))return t;var i=In(t);return Hr(i,0,xn(i,In(e))+1).join("")},fi.trimStart=function(t,e,n){if((t=Ya(t))&&(n||e===o))return t.replace(Ft,"");if(!t||!(e=Fr(e)))return t;var i=In(t);return Hr(i,bn(i,In(e))).join("")},fi.truncate=function(t,e){var n=E,i=M;if(Sa(e)){var r="separator"in e?e.separator:r;n="length"in e?Va(e.length):n,i="omission"in e?Fr(e.omission):i}var s=(t=Ya(t)).length;if(Cn(t)){var a=In(t);s=a.length}if(n>=s)return t;var u=n-kn(i);if(u<1)return i;var c=a?Hr(a,0,u).join(""):t.slice(0,u);if(r===o)return c+i;if(a&&(u+=c.length-u),ka(r)){if(t.slice(u).search(r)){var h,l=c;for(r.global||(r=ee(r.source,Ya(Nt.exec(r))+"g")),r.lastIndex=0;h=r.exec(l);)var f=h.index;c=c.slice(0,f===o?u:f)}}else if(t.indexOf(Fr(r),u)!=u){var p=c.lastIndexOf(r);p>-1&&(c=c.slice(0,p))}return c+i},fi.unescape=function(t){return(t=Ya(t))&&Bt.test(t)?t.replace(At,Rn):t},fi.uniqueId=function(t){var e=++he;return Ya(t)+e},fi.upperCase=xu,fi.upperFirst=Au,fi.each=Ys,fi.eachRight=Ws,fi.first=vs,Ru(fi,function(){var t={};return Gi(fi,function(e,n){ce.call(fi.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),fi.VERSION="4.17.11",He(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){fi[t].placeholder=fi}),He(["drop","take"],function(t,e){di.prototype[t]=function(n){n=n===o?1:Yn(Va(n),0);var i=this.__filtered__&&!e?new di(this):this.clone();return i.__filtered__?i.__takeCount__=Wn(n,i.__takeCount__):i.__views__.push({size:Wn(n,j),type:t+(i.__dir__<0?"Right":"")}),i},di.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),He(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==k||3==n;di.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Fo(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),He(["head","last"],function(t,e){var n="take"+(e?"Right":"");di.prototype[t]=function(){return this[n](1).value()[0]}}),He(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");di.prototype[t]=function(){return this.__filtered__?new di(this):this[n](1)}}),di.prototype.compact=function(){return this.filter(Tu)},di.prototype.find=function(t){return this.filter(t).head()},di.prototype.findLast=function(t){return this.reverse().find(t)},di.prototype.invokeMap=Ar(function(t,e){return"function"==typeof t?new di(this):this.map(function(n){return nr(n,t,e)})}),di.prototype.reject=function(t){return this.filter(aa(Fo(t)))},di.prototype.slice=function(t,e){t=Va(t);var n=this;return n.__filtered__&&(t>0||e<0)?new di(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=Va(e))<0?n.dropRight(-e):n.take(e-t)),n)},di.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},di.prototype.toArray=function(){return this.take(j)},Gi(di.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=fi[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);r&&(fi.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,u=e instanceof di,c=a[0],h=u||da(e),l=function(t){var e=r.apply(fi,tn([t],a));return i&&f?e[0]:e};h&&n&&"function"==typeof c&&1!=c.length&&(u=h=!1);var f=this.__chain__,p=!!this.__actions__.length,m=s&&!f,_=u&&!p;if(!s&&h){e=_?e:new di(this);var d=t.apply(e,a);return d.__actions__.push({func:Ls,args:[l],thisArg:o}),new _i(d,f)}return m&&_?t.apply(this,a):(d=this.thru(l),m?i?d.value()[0]:d.value():d)})}),He(["pop","push","shift","sort","splice","unshift"],function(t){var e=re[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);fi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(da(r)?r:[],t)}return this[n](function(n){return e.apply(da(n)?n:[],t)})}}),Gi(di.prototype,function(t,e){var n=fi[e];if(n){var i=n.name+"";(ii[i]||(ii[i]=[])).push({name:e,func:n})}}),ii[fo(o,v).name]=[{name:"wrapper",func:o}],di.prototype.clone=function(){var t=new di(this.__wrapped__);return t.__actions__=eo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=eo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=eo(this.__views__),t},di.prototype.reverse=function(){if(this.__filtered__){var t=new di(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},di.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=da(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Wn(e,t+s);break;case"takeRight":t=Yn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,u=a-s,c=i?a:s-1,h=this.__iteratees__,l=h.length,f=0,p=Wn(u,this.__takeCount__);if(!n||!i&&r==u&&p==u)return Vr(t,this.__actions__);var m=[];t:for(;u--&&f<p;){for(var _=-1,d=t[c+=e];++_<l;){var y=h[_],v=y.iteratee,g=y.type,b=v(d);if(g==I)d=b;else if(!b){if(g==k)continue t;break t}}m[f++]=d}return m},fi.prototype.at=Vs,fi.prototype.chain=function(){return Ds(this)},fi.prototype.commit=function(){return new _i(this.value(),this.__chain__)},fi.prototype.next=function(){this.__values__===o&&(this.__values__=Da(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},fi.prototype.plant=function(t){for(var e,n=this;n instanceof mi;){var i=ls(n);i.__index__=0,i.__values__=o,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},fi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof di){var e=t;return this.__actions__.length&&(e=new di(this)),(e=e.reverse()).__actions__.push({func:Ls,args:[Ss],thisArg:o}),new _i(e,this.__chain__)}return this.thru(Ss)},fi.prototype.toJSON=fi.prototype.valueOf=fi.prototype.value=function(){return Vr(this.__wrapped__,this.__actions__)},fi.prototype.first=fi.prototype.head,je&&(fi.prototype[je]=function(){return this}),fi}();Re._=On,(r=function(){return On}.call(e,n,e,i))===o||(i.exports=r)}).call(this)}).call(this,n(14),n(105)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicPlatform=void 0;var r=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=h(n(36)),s=n(31),a=h(n(28)),u=h(n(45)),c=h(n(24));function h(t){return t&&t.__esModule?t:{default:t}}e.DynamicPlatform=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),s=t.x,a=t.y,u=t.w,c=t.h;return o.x=s+u/2,o.y=a,o.w=u/2,o.h=c/2,o.resolve=n,o.layerDescriptor=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"layer",value:function(){return this.layerDescriptor?this.layerDescriptor:{layerName:c.default.DEFAULT_LAYER}}},{key:"physics",value:function(t){var e=t.shape,n=t.position,i=t.isGround,r=t.oneWayCollisions,o=this.x,a=this.y,u=this.w,c=this.h;e(function(t){return t.Box((0,s.pixelToWorld)(u),(0,s.pixelToWorld)(2))}),n({x:o,y:a-c}),r(),i()}},{key:"initialize",value:function(t,e){this.texture=this.resolve(e),this.texture&&(this.img=u.default.fillRepeat({p:t,width:2*this.w,height:2*this.h,asset:this.texture,repeat:a.default.RepeatDirections.REPEAT_X}))}},{key:"render",value:function(t){this.img&&(t.imageMode(t.CENTER),t.image(this.img,0,0))}}]),e}()},function(t,e,n){"use strict";var i=n(19).isFunction;t.exports={mirrorInPlace:function(t,e){Object.keys(t).forEach(function(n){t[n]=e&&i(e)?e(n):n})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Sprites={createAnimation:function(t,e){var n=e.p,i=e.cols,r=void 0===i?1:i,o=e.time,s=void 0===o?200:o,a=t.width,u=t.height,c=a/r,h=u,l=0,f=0,p=Math.floor(s/20);return{run:function(e){e&&(l=(e-1)*c),n.image(t,0,0,c,h,l,0,c,h),e||0==(f=++f%Number.MAX_SAFE_INTEGER)%p&&(l+=c,l%=a)},reset:function(){l=0,f=0}}}}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;var r=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=c(n(36)),s=n(28),a=c(s),u=c(n(45));function c(t){return t&&t.__esModule?t:{default:t}}var h=a.default.BackgroundTranslate;e.Background=function(t){function e(t){var n=t.parallaxOffset,r=void 0===n?{x:0,y:0}:n,o=t.translate,s=void 0===o?h.BOTH:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.parallaxOffset=r,a.translateDirection=s,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"resolveAsset",value:function(){}},{key:"initialize",value:function(t,e){var n=Math.ceil,i=Math.max,r=this.resolveAsset(e),o=r.width,a=r.height,c=t.width,l=t.height;this.offscreenWidth=n(i(c,o)/o)*o,this.offscreenHeight=n(i(l,a)/a)*a;var f=void 0,p=void 0,m=void 0;switch(this.translateDirection){case h.HORIZONTAL:m=s.RepeatDirections.REPEAT_X,f=3,p=1;break;case h.VERTICAL:m=s.RepeatDirections.REPEAT_Y,f=1,p=3;break;default:m=s.RepeatDirections.REPEAT_BOTH,f=3,p=3}this.offscreen=u.default.fillRepeat({p:t,width:f*this.offscreenWidth,height:p*this.offscreenHeight,repeat:m,asset:r}),this.posOffset=t.createVector()}},{key:"setPositionOffset",value:function(t){var e=t.x,n=t.y;this.posOffset={x:e+this.parallaxOffset.x,y:n+this.parallaxOffset.y}}},{key:"render",value:function(t){var e=this.posOffset,n=e.x,i=e.y,r=t.width,o=t.height;switch(n%=this.offscreenWidth,i%=this.offscreenHeight,this.translateDirection){case h.HORIZONTAL:n+=this.offscreenWidth;break;case h.VERTICAL:i+=this.offscreenHeight;break;default:n+=this.offscreenWidth,i+=this.offscreenHeight}t.image(this.offscreen,0,0,r,o,n,i,r,o)}}]),e}()},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.Parallax=void 0;var r=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(23),s=u(n(65)),a=u(n(24));function u(t){return t&&t.__esModule?t:{default:t}}var c=u(n(28)).default.BackgroundTranslate.BOTH;e.Parallax={from:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.camera,u=e.layer,h=e.offset,l=e.translate,f=void 0===l?c:l,p=e.fixLastLayer,m=[];t.reverse();var _=function(t){return function(){return new(function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,s.default.Background),r(n,[{key:"layer",value:function(){return u||{layerName:a.default.DEFAULT_LAYER}}},{key:"resolveAsset",value:function(e){return e[t]}}]),n}())({translate:f,parallaxOffset:h})}};return t.forEach(function(e,i){var r=void 0!==p&&p&&i===t.length-1,s=_(e);n&&(s=(0,o.compose)([n({isLastLayer:r})])(s)),m.push(s)}),m.reverse(),m}}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var r="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},o=function(t){return t&&t.__esModule?t:{default:t}}(n(24)),s=n(17);var a=function(t){return{layerName:t,zIndex:1<arguments.length&&void 0!==arguments[1]?arguments[1]:0}};e.Config={layers:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s.NoopFunc,n={};return"function"==typeof e&&(n[o.default.DEFAULT_LAYER]=e),t?(Object.keys(t).forEach(function(e){var i=t[e];n[e]="function"==typeof i?function(t){return Number.isInteger(t)?a(e,t):("object"===(void 0===t?"undefined":r(t))&&i(t),a(e))}:function(t){return a(e,t)}}),n):n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(19),o=n(51),s=n(17),a=function(t){return t&&t.__esModule?t:{default:t}}(n(24));var u=function(){function t(e){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.DEFAULT_SCENE;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.setScaleFactor=function(t){n.scaleFactor=t},this.addToPreload=function(t){n.preload.push(t)},this.initItem=function(t){var e=n.assets,i=n.context2D,r=n.itemSubscribers,o=n.getGraphics(t.layer().layerName);r.forEach(function(e){e.beforeInitialize(t,o)}),t.initialize(o,e,{context2D:i}),r.forEach(function(e){e.afterInitialize(t,o)}),t._hooks.runSetup(t),n.lm.addItem(t,t.layer())},this.onSetupDone=function(t){n.setupDone?t():n.setupWaitList.push(t)},this.p5=e,this.onInit=s.NoopFunc,this.preload=[],this.scaleFactor=1,this.setupDone=!1,this.scene=i,this.context2D=null,this.setupWaitList=[],this.assets={},this.graphics={},this.itemSubscribers=[],this.lm=new a.default.Manager,this.p5.preload=function(){n.preload.forEach(function(t){t(function(t,e){t&&e&&(n.assets[t]=e)})})},this.p5.setup=function(){var t=i.width,e=i.height,r=n.p5.createCanvas(t,e),o=r.canvas,s=r.elt.style;n.p5.pixelDensity(1),o.id="froobitDefaultCanvas",i.fullHeight&&(s.width=i.styleWidth+"vw",s.height="100vh"),n.createGraphics(),n.lm.runConfigs(n.getGraphics.bind(n)),n.onInit(),n.setupDone=!0,n.context2D=o.getContext("2d"),n.setupWaitList.forEach(function(t){t()}),n.setupWaitList=[]},this.p5.draw=function(){var t=n.p5,e=n.assets,i=n.context2D;n.lm.visitLayers(function(r){var o=r.items,s=r.layerName,a=n.getGraphics(s),u=n.isDefaultLayer(s);u||a.clear(),o.filter(function(t){return t._isRendered}).forEach(function(t){a.push(),t._hooks.runBeforeRender(t),t.render(a,e,{context2D:i}),t._hooks.runAfterRender(t),a.pop()}),u||t.image(a,0,0)})}}return i(t,[{key:"flush",value:function(){this.lm.clearItems(),this.p5.clear(),this.setupWaitList=[],this.itemSubscribers=[]}},{key:"isWebGLContext",value:function(){return!1}},{key:"createGraphics",value:function(){var t=this;this.lm.visitLayers(function(e){var n=e.layerName;if(!t.isDefaultLayer(n)){var i=t.scene,r=i.width,o=i.height;t.graphics[n]=t.p5.createGraphics(r,o),t.graphics[n].rootGL=t.p5,t.graphics[n].elt.id=n+"-canvas"}})}},{key:"isDefaultLayer",value:function(t){return t===a.default.DEFAULT_LAYER}},{key:"getGraphics",value:function(t){return this.isDefaultLayer(t)?this.p5:this.graphics[t]}},{key:"addToRender",value:function(t){var e=this,n=t;(0,r.isArray)(n)||(n=[t]),n.forEach(function(t){e.initItem(t)})}},{key:"registerItemSubscriber",value:function(t){var e=t.beforeInitialize,n=void 0===e?s.NoopFunc:e,i=t.afterInitialize,r=void 0===i?s.NoopFunc:i;this.itemSubscribers.push({beforeInitialize:n,afterInitialize:r})}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={handleAssetLoading:function(t,e,n){var i=t.images,r=void 0===i?{}:i,o=t.fonts,s=void 0===o?{}:o,a=t.sounds,u=void 0===a?{}:a;Object.keys(r).forEach(function(t){var i=e.loadImage(r[t]);n(t,i)}),Object.keys(s).forEach(function(t){var i=e.loadFont(s[t]);n(t,i)}),Object.keys(u).forEach(function(t){var i=e.loadSound(u[t]);n(t,i)})}};e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(115),r={frameworkInitMessage:function(){console.log("Froobit v"+i.version+" initialized - hooks")}};e.default=r,t.exports=e.default},function(t){t.exports={name:"froobit",version:"1.1.0",description:"Javascript 2D Game development framework",main:"./lib/index.js",scripts:{lint:"eslint src",build:"cross-env BABEL_ENV=production babel src --out-dir lib",prepublish:"npm run lint && npm run build"},engines:{node:">=8.12.0"},keywords:["game","framework"],author:"Ognjen Vucetic",license:"MIT",devDependencies:{"babel-cli":"^6.14.0","babel-core":"^6.26.3","babel-eslint":"^8.2.3","babel-loader":"^7.1.4","babel-preset-env":"^1.7.0","babel-preset-es2015":"^6.24.1","babel-preset-stage-2":"^6.24.1","babel-plugin-add-module-exports":"^0.2.1","babel-polyfill":"^6.26.0","babel-preset-minify":"^0.3.0","cross-env":"^5.1.3",eslint:"^4.19.1","eslint-config-airbnb-base":"^12.1.0","eslint-plugin-import":"^2.12.0"},dependencies:{express:"^4.16.3",keycode:"^2.2.0",keymirror:"^0.1.1",lodash:"^4.17.10","lodash.throttle":"^4.1.1",p5:"^0.7.2","planck-js":"^0.2.7","socket.io":"^2.1.1","socket.io-client":"^2.1.1",uniqid:"^4.1.1",victor:"^1.1.0"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.socketConnect=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(117)),r=n(64);e.socketConnect=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.WEB_SOCKET_SERVER;return i.default.connect(t)}},function(t,e,n){var i=n(118),r=n(47),o=n(68),s=n(37)("socket.io-client");t.exports=e=u;var a=e.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),u=r.source,c=r.id,h=r.path,l=a[c]&&h in a[c].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||l?(s("ignoring socket cache for %s",u),n=o(u,e)):(a[c]||(s("new io instance for %s",u),a[c]=o(u,e)),n=a[c]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}e.protocol=r.protocol,e.connect=u,e.Manager=n(68),e.Socket=n(74)},function(t,e,n){(function(e){var i=n(66),r=n(37)("socket.io-client:url");t.exports=function(t,n){var o=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),r("parse %s",t),o=i(t));o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443"));o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}}).call(this,n(14))},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=s[u];n=r.call(t,o),s.splice(u,1),u--}return n}),e.formatArgs.call(t,s),(i.log||e.log||console.log.bind(console)).apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(46),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(121)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++r)}),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(29))},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=s[u];n=r.call(t,o),s.splice(u,1),u--}return n}),e.formatArgs.call(t,s),(i.log||e.log||console.log.bind(console)).apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(46),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){(function(t){var i=n(48),r=n(67),o=Object.prototype.toString,s="function"==typeof t.Blob||"[object BlobConstructor]"===o.call(t.Blob),a="function"==typeof t.File||"[object FileConstructor]"===o.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=function t(e,n){if(!e)return e;if(r(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a],n);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var u in e)s[u]=t(e[u],n);return s}return e}(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(i(e))for(var r=0;r<e.length;r++)e[r]=t(e[r],n);else if("object"==typeof e)for(var o in e)e[o]=t(e[o],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,o=t;!function t(u,c,h){if(!u)return u;if(s&&u instanceof Blob||a&&u instanceof File){n++;var l=new FileReader;l.onload=function(){h?h[c]=this.result:o=this.result,--n||e(o)},l.readAsArrayBuffer(u)}else if(i(u))for(var f=0;f<u.length;f++)t(u[f],f,u);else if("object"==typeof u&&!r(u))for(var p in u)t(u[p],p,u)}(o),n||e(o)}}).call(this,n(14))},function(t,e,n){t.exports=n(124),t.exports.parser=n(26)},function(t,e,n){(function(e){var i=n(69),r=n(25),o=n(40)("engine.io-client:socket"),s=n(73),a=n(26),u=n(66),c=n(38);function h(t,n){if(!(this instanceof h))return new h(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var i="object"==typeof e&&e;i.global===i&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=h,h.priorWebsocketSuccess=!1,r(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=n(50),h.transports=n(69),h.parser=n(26),h.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=a.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},h.prototype.open=function(){var t;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},h.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},h.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,i=this;function r(){if(i.onlyBinaryUpgrades){var r=!this.supportsBinary&&i.transport.supportsBinary;n=n||r}n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(o('probe transport "%s" pong',t),i.upgrading=!0,i.emit("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){n||"closed"!==i.readyState&&(o("changing transport and sending upgrade packet"),f(),i.setTransport(e),e.send([{type:"upgrade"}]),i.emit("upgrade",e),e=null,i.upgrading=!1,i.flush())})}else{o('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,i.emit("upgradeError",s)}}))}function s(){n||(n=!0,f(),e.close(),e=null)}function a(n){var r=new Error("probe error: "+n);r.transport=e.name,s(),o('probe transport "%s" failed because of error: %s',t,n),i.emit("upgradeError",r)}function u(){a("transport closed")}function c(){a("socket closed")}function l(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),s())}function f(){e.removeListener("open",r),e.removeListener("error",a),e.removeListener("close",u),i.removeListener("close",c),i.removeListener("upgrading",l)}h.priorWebsocketSuccess=!1,e.once("open",r),e.once("error",a),e.once("close",u),this.once("close",c),this.once("upgrading",l),e.open()},h.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},h.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},h.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},h.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},h.prototype.sendPacket=function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},h.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():e()}):this.upgrading?i():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function i(){t.once("upgrade",n),t.once("upgradeError",n)}return this},h.prototype.onError=function(t){o("socket error %j",t),h.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},h.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},h.prototype.filterUpgrades=function(t){for(var e=[],n=0,i=t.length;n<i;n++)~s(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,n(14))},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){(function(e){var i=n(49),r=n(70),o=n(25),s=n(39),a=n(40)("engine.io-client:polling-xhr");function u(){}function c(t){if(r.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n="https:"===location.protocol,i=location.port;i||(i=n?443:80),this.xd=t.hostname!==e.location.hostname||i!==t.port,this.xs=t.secure!==n}}function h(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function l(){for(var t in h.requests)h.requests.hasOwnProperty(t)&&h.requests[t].abort()}t.exports=c,t.exports.Request=h,s(c,r),c.prototype.supportsBinary=!0,c.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new h(t)},c.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,i=this.request({method:"POST",data:t,isBinary:n}),r=this;i.on("success",e),i.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=i},c.prototype.doPoll=function(){a("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},o(h.prototype),h.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new i(t),r=this;try{a("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState)try{var t=n.getResponseHeader("Content-Type");r.supportsBinary&&"application/octet-stream"===t&&(n.responseType="arraybuffer")}catch(t){}4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},a("xhr data %s",this.data),n.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}e.document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},h.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},h.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}e.document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},h.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",l):e.addEventListener&&e.addEventListener("beforeunload",l,!1))}).call(this,n(14))},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(129),r=n(130),o=n(131);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(h(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function m(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function _(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function d(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function g(t,e,n,i){return U(V(e,t.length-n),t,n,i)}function b(t,e,n,i){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return b(t,e,n,i)}function A(t,e,n,i){return U(q(e),t,n,i)}function w(t,e,n,i){return U(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function B(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,c=t[r],h=null,l=c>239?4:c>223?3:c>191?2:1;if(r+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=l}return function(t){var e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=S));return n}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,i){return h(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return B(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=n-e,a=Math.min(o,s),c=this.slice(i,r),h=t.slice(e,n),l=0;l<a;++l)if(c[l]!==h[l]){o=c[l],s=h[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return d(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return d(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return g(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function E(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function M(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function T(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=L(t[o]);return r}function P(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function R(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function F(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,i,o){return o||F(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function j(t,e,n,i,o){return o||F(t,0,n,8),r.write(t,e,n,i,52,8),n+8}u.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:V(new u(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(14))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){for(var e,n=c(t),i=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,i,s)),u=0,h=s>0?i-4:i,l=0;l<h;l+=4)e=r[t.charCodeAt(l)]<<18|r[t.charCodeAt(l+1)]<<12|r[t.charCodeAt(l+2)]<<6|r[t.charCodeAt(l+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=r[t.charCodeAt(l)]<<2|r[t.charCodeAt(l+1)]>>4,a[u++]=255&e);1===s&&(e=r[t.charCodeAt(l)]<<10|r[t.charCodeAt(l+1)]<<4|r[t.charCodeAt(l+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function l(t,e,n){for(var i,r=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(h(i));return r.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?r-1:0,f=n?-1:1,p=t[e+l];for(l+=f,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=i;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,c=8*o-r-1,h=(1<<c)-1,l=h>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,m=i?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=m,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+p]=255&s,p+=m,s/=256,c-=8);t[n+p-m]|=128*_}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t,e,n){var i=t.byteLength;if(e=e||0,n=n||i,t.slice)return t.slice(e,n);if(e<0&&(e+=i),n<0&&(n+=i),n>i&&(n=i),e>=i||e>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=r[s];return o.buffer}},function(t,e){function n(){}t.exports=function(t,e,i){var r=!1;return i=i||n,o.count=t,0===t?e():o;function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(r=!0,e(t),e=i):0!==o.count||r||e(null,n)}}},function(t,e){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,i,r,o=String.fromCharCode;function s(t){for(var e,n,i=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function a(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(t,e){return o(t>>e&63|128)}function c(t,e){if(0==(4294967168&t))return o(t);var n="";return 0==(4294965248&t)?n=o(t>>6&31|192):0==(4294901760&t)?(a(t,e)||(t=65533),n=o(t>>12&15|224),n+=u(t,6)):0==(4292870144&t)&&(n=o(t>>18&7|240),n+=u(t,12),n+=u(t,6)),n+=o(63&t|128)}function h(){if(r>=i)throw Error("Invalid byte index");var t=255&n[r];if(r++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(t){var e,o;if(r>i)throw Error("Invalid byte index");if(r==i)return!1;if(e=255&n[r],r++,0==(128&e))return e;if(192==(224&e)){if((o=(31&e)<<6|h())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if((o=(15&e)<<12|h()<<6|h())>=2048)return a(o,t)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=(7&e)<<18|h()<<12|h()<<6|h())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,i=s(t),r=i.length,o=-1,a="";++o<r;)a+=c(i[o],n);return a},decode:function(t,e){var a=!1!==(e=e||{}).strict;n=s(t),i=n.length,r=0;for(var u,c=[];!1!==(u=l(a));)c.push(u);return function(t){for(var e,n=t.length,i=-1,r="";++i<n;)(e=t[i])>65535&&(r+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=o(e);return r}(c)}}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<t.length;i++)n[t.charCodeAt(i)]=i;e.encode=function(e){var n,i=new Uint8Array(e),r=i.length,o="";for(n=0;n<r;n+=3)o+=t[i[n]>>2],o+=t[(3&i[n])<<4|i[n+1]>>4],o+=t[(15&i[n+1])<<2|i[n+2]>>6],o+=t[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,i,r,o,s,a=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),l=new Uint8Array(h);for(e=0;e<u;e+=4)i=n[t.charCodeAt(e)],r=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],l[c++]=i<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&s;return h}}()},function(t,e){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),r=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t})}function a(t,e){e=e||{};var i=new n;return s(t).forEach(function(t){i.append(t)}),e.type?i.getBlob(e.type):i.getBlob()}function u(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,u.prototype=Blob.prototype),t.exports=i?r?Blob:u:o?a:void 0},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=s[u];n=r.call(t,o),s.splice(u,1),u--}return n}),e.formatArgs.call(t,s),(i.log||e.log||console.log.bind(console)).apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(46),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){(function(e){var i=n(70),r=n(39);t.exports=c;var o,s=/\n/g,a=/\\n/g;function u(){}function c(t){i.call(this,t),this.query=this.query||{},o||(e.___eio||(e.___eio=[]),o=e.___eio),this.index=o.length;var n=this;o.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=u)},!1)}r(c,i),c.prototype.supportsBinary=!1,c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},c.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},c.prototype.doWrite=function(t,e){var n=this;if(!this.form){var i,r=document.createElement("form"),o=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=u,r.method="POST",r.setAttribute("accept-charset","utf-8"),o.name="d",r.appendChild(o),document.body.appendChild(r),this.form=r,this.area=o}function c(){h(),e()}function h(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(t)}catch(t){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),h(),t=t.replace(a,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,n(14))},function(t,e,n){(function(e){var i,r=n(50),o=n(26),s=n(38),a=n(39),u=n(72),c=n(40)("engine.io-client:websocket"),h=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{i=n(140)}catch(t){}var l=h;function f(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(l=i),r.call(this,t)}l||"undefined"!=typeof window||(l=i),t.exports=f,a(f,r),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new l(t,e):new l(t):new l(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},f.prototype.write=function(t){var n=this;this.writable=!1;for(var i=t.length,r=0,s=i;r<s;r++)!function(t){o.encodePacket(t,n.supportsBinary,function(r){if(!n.usingBrowserWebSocket){var o={};if(t.options&&(o.compress=t.options.compress),n.perMessageDeflate)("string"==typeof r?e.Buffer.byteLength(r):r.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(r):n.ws.send(r,o)}catch(t){c("websocket closed before onclose event")}--i||a()})}(t[r]);function a(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}},f.prototype.onClose=function(){r.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),(t=s.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},f.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===f.prototype.name)}}).call(this,n(14))},function(t,e){},function(t,e){t.exports=function(t,e){for(var n=[],i=(e=e||0)||0;i<t.length;i++)n[i-e]=t[i];return n}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerFacade=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(24)),r=n(17);var o=i.default.DEFAULT_LAYER;e.LayerFacade=function(t){return function(e){var n=Object.keys(e);return 0===n.length?void t.mergeConfig(o,r.NoopFunc):void n.forEach(function(n){var i=e[n];n===o?t.mergeConfig(o,i):t.addLayer({layerName:n,layerConfig:i})})}}},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"run",value:function(t){var e=this;setTimeout(function(){t.acceptGC(e),e.run(t)},15e3)}},{key:"collect",value:function(t,e){var n=t[e];t[e]=n.filter(function(t){return t._isRendered})}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowMouse=void 0;var i=n(23);e.FollowMouse=(0,i.wrapperCreator)({setup:function(t){var e=this,n=t.p5,i=t.onSetupDone,r=t.getCenter;this.center=n.createVector(),i(function(){e.center=r()})},beforeRender:function(){var t=this.p5,e=this.center,n=t.createVector(t.mouseX,t.mouseY).sub(e).heading();this.setState({angle:n+t.PI/2})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicBackground=void 0;var i=n(23);e.DynamicBackground=function(t){return(0,i.wrapperCreator)({setup:function(e){var n=e.p5;t||(t=n.createVector()),this.setState({velocity:t,offset:n.createVector()})},beforeRender:function(t){var e=this.setState,n=(0,this.getState)(),i=n.offset,r=n.velocity;r&&(i.add(r),e({offset:i})),t.setPositionOffset(i)}})}},function(t,e,n){"use strict";var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0}),e.createCamera=function(){var t={offset:{x:0,y:0},target:{}},e={track:function(e){t.target=e},OBJECT:(0,r.wrapperCreator)({beforeRender:function(t){var n=this.gl;n=n(t.layer().layerName);var i=e.getOffset();if(e.isTarget(t))n.translate(i.x,i.y);else{var r=e.getTargetPosition(),o=r.x,s=r.y,a=t.getPosition(),u=a.x,c=a.y;u=u-o+i.x,c=c-s+i.y,n.translate(u,c)}}}),PARALLAX:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.velocity,o=void 0===n?{x:.9,y:.6}:n,s=t.damping,a=void 0===s?{x:.9,y:.7}:s,u=i({},o);return function(t){var n=t.isLastLayer;if(n)return(0,r.wrapperCreator)({});var o=i({},u);return u.x*=a.x,u.y*=a.y,(0,r.wrapperCreator)({beforeRender:function(t){var n=e.getTargetPosition(),i=n.x,r=n.y;i*=o.x,r*=o.y,t.setPositionOffset({x:i,y:r})}})}},setOffset:function(e){t.offset=i({},e)},getOffset:function(){return t.offset},isTarget:function(e){return e.body===t.target},getTargetPosition:function(){var e=t.target;return e?e.getPosition():{x:0,y:0}}};return e};var r=n(23)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addonsLoader=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(149));e.addonsLoader=function(t,e){!0===e.editor&&t.push(i.default)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(150),r=n(20),o=n(30);e.default=function(t){var e=t.p5,n=t.onEvent,s=t.getMouse,a=new i.Editor;return n(o.MouseEvents.mousePressed,function(){a.startDrawing(s())}),n(o.MouseEvents.mouseReleased,function(){a.endDrawing(s())}),n(o.KeyboardEvents.keyPressed,function(t){switch(t.code){case"Backspace":a.undo();break;case"KeyS":var n=r.Camera.getOffset(),i=r.Camera.getTargetPosition();a.save(e,n,i);break;case"KeyN":a.nextType();break;case"KeyP":a.prevType()}}),a},t.exports=e.default},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;var r=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(n(36));e.Editor=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.corners=[],t.typeNumber=0,t}var n=Math.max;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"startDrawing",value:function(t){var e=t.x,n=t.y;this.corners.push({type:this.typeNumber,begin:{x:e,y:n}})}},{key:"endDrawing",value:function(t){var e=Math.abs,n=t.x,i=t.y,r=this.corners[this.corners.length-1],o=r.begin,s=o.x,a=o.y;return 800>e(s-n)*e(a-i)?void this.corners.pop():void(r.end={x:n,y:i})}},{key:"undo",value:function(){this.corners.pop()}},{key:"nextType",value:function(){this.typeNumber+=1}},{key:"prevType",value:function(){this.typeNumber=n(0,this.typeNumber-1)}},{key:"save",value:function(t,e,n){var i=this,o={objects:this.corners.filter(function(t){return!!t}).map(function(o){var s=o.type,a=o.begin,u=o.end,c=i.getRectParams(a,u||{x:t.mouseX,y:t.mouseY});return c.x+=n.x-e.x,c.y+=n.y-e.y,r({type:s},c)})};t.saveJSON(o,"platforms.json")}},{key:"getRectParams",value:function(t,e){var i=Math.min;if(!e)return null;var r=t.x,o=t.y,s=e.x,a=e.y,u=i(r,s),c=i(o,a);return{x:u,y:c,w:n(r,s)-u,h:n(o,a)-c}}},{key:"render",value:function(t){var e=this;t.fill(35,50),t.stroke(180,250,200),this.corners.forEach(function(n){var i=n.type,r=n.begin,o=n.end,s=e.getRectParams(r,o||{x:t.mouseX,y:t.mouseY}),a=s.x,u=s.y,c=s.w,h=s.h;t.rect(a,u,c,h),t.push(),t.stroke(20),t.strokeWeight(2),t.fill(255),t.textStyle(t.BOLD),t.textSize(16),t.text("T"+i,a+10,u+10),t.pop()})}}]),e}(s.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(52)),o=n(35),s=f(n(53)),a=n(17),u=n(30),c=n(152),h=n(153),l=n(17);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e){var n=e.controllers,i=e.p5,o=e.renderer,s=e.socket,u=e.options;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.controllers=(0,a.flatten)(n),this.p5=i,this.renderer=o,this.socket=s,this.activities=new r.default,this.context=(0,c.withContext)(),this.options=u}return i(t,[{key:"reload",value:function(){var t=this.renderer;t.flush(),(0,u.clearEventHandlers)(this.p5),this.activities=new r.default,s.default.create().run(),t.registerItemSubscriber({beforeInitialize:s.default.subscriber}),this.runControllers().forEach(function(e){t.addToRender(e)})}},{key:"run",value:function(){var t=this,e=this.renderer;this.options.physics&&(s.default.create().run(),e.registerItemSubscriber({beforeInitialize:s.default.subscriber})),e.onInit=function(){t.runControllers().forEach(function(t){e.addToRender(t)})}}},{key:"runControllers",value:function(){var t=this,e=this.activities,n=e.provide,i=e.accept,r=e.trigger,a=this.p5,c=this.socket,f=this.controllers,p=this.renderer,m=(0,o.getCenterCreate)(a,p.scaleFactor),_=(0,o.getMouseCreate)(a,p.scaleFactor),d=(0,u.onEventCreate)(a);return f.map(function(e){var u=null,f={beforeRender:[],afterRender:[]},y={p5:a,gl:p.getGraphics.bind(p),render:function(t){u&&t._hooks.merge(u).mergeBeforeRender(f.beforeRender).mergeAfterRender(f.afterRender),(0,h.bindMixins)(t,y),p.addToRender(t)},preload:p.addToPreload.bind(p),provide:n.bind(t.activities),accept:i.bind(t.activities),trigger:r.bind(t.activities),onEvent:d,socket:c,getCenter:m,getMouse:_,scaleFactor:p.scaleFactor,getPlayerAbsolutePos:function(t){return(0,o.getPlayerAbsolutePos)(m(),t)},getOffsetForAbsolutePos:function(t){return(0,o.getOffsetForAbsolutePos)(m(),t)},isSetupDone:function(){return p.setupDone},onSetupDone:p.onSetupDone.bind(p),setScaleFactor:p.setScaleFactor.bind(p),world:s.default.world,scene:p.scene,stage:{reload:function(){t.reload()}},beforeRender:function(t){f.beforeRender.push(t)},afterRender:function(t){f.afterRender.push(t)}},v=e(y),g=v||{},b=g.items,x=g.hooks;return x?(u=x,b.forEach(function(t){t._hooks.merge(u).mergeBeforeRender(f.beforeRender).mergeAfterRender(f.afterRender),(0,h.bindMixins)(t,y)}),b):(0,l.ensureArray)(v).map(function(t){return(0,h.bindMixins)(t,y)})})}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};e.withContext=function(t){var e=i({},t);return{getContext:function(){return i({},e)},setContext:function(t){e=i({},e,t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bindMixins=void 0;var i=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=n(19),o=n(17);e.bindMixins=function(t,e){return(0,o.ensureArray)(t._mixins).forEach(function(n){var o=i({},e),s=n.setup,a=n.beforeRender,u=n.afterRender;(0,r.isFunction)(s)&&t._hooks.addToSetup(s.bind(o)),(0,r.isFunction)(a)&&t._hooks.addToBeforeRender(a.bind(o)),(0,r.isFunction)(u)&&t._hooks.addToAfterRender(u.bind(o))}),t}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.newConnection=void 0;var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},s=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a=function(t){return t&&t.__esModule?t:{default:t}}(n(155)),u=n(19),c=n(23);var h=function(t){return{beforeRender:function(e){var n=this.p5,i=e._internal,r=i[t+"_next"];r&&(i[t].x=n.lerp(i[t].x,r.x,.03),i[t].y=n.lerp(i[t].y,r.y,.03))}}},l=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];e[n]=(0,u.isFunction)(i)?s({},i()):{default:i}}),e},f=function(t){return t+"_next"},p=function(t,e){Object.keys(t).forEach(function(n){e({key:n,value:t[n]})})},m=function(t){return"object"===(void 0===t?"undefined":o(t))?s({},t):t},_=function(t,e,n){var i=e.scope,r=e.client,o=void 0===r?{}:r,s=e.server,u=void 0===s?{}:s,c=t._internal;p(o,function(e){var r=e.key,o=e.value,s=(0,a.default)(function(){n.emit("valueUpdate",{scope:i,name:r,val:c[r]})},50);c[r]=m(o.default),Object.defineProperty(t,r,{get:function(){return c[r]},set:function(t){c[r]=t,s()}})}),p(u,function(e){var n=e.key,i=e.value;c[n]=m(i.default),Object.defineProperty(t,n,{get:function(){return c[n]},set:function(t){c[n]=t}})})};e.newConnection=function(t){var e=function(t){var e=t.scope,n=t.client,i=t.server;return{scope:e,client:l(n),server:l(i)}}(t),n=e.scope,i=void 0===n?"__frDefaultScope":n,o=e.server,s={connect:[],disconnect:[]},a=function(t){return function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];s[t].forEach(function(t){t.apply(void 0,n)})}};return{CLIENT:(0,c.wrapperCreator)({setup:function(t){var n=t.render,s=t.socket,u={},c=r(this.items,1)[0],l=function(t){var e=t.server,n={};return Object.keys(e).forEach(function(t){var i=e[t].lerp;i&&(n[t]=i)}),n}(e);Object.keys(l).forEach(function(t){c.with(h(t))}),s.on("serverUpdate",function(t,e,n){return function(i){n(i[e.id][t]||{})}}(i,s,function(t){Object.keys(t).filter(function(t){return!!l[t]}).forEach(function(e){var n=c._internal,i=t[e];n[e]||(n[e]=i),n[f(e)]=i}),Object.keys(t).filter(function(t){return!l[t]}).forEach(function(e){c._internal[e]=t[e]})})),s.on("serverUpdate",function(t,e,n){return function(i){Object.keys(i).filter(function(t){return t!==e.id}).forEach(function(e){n(e,i[e][t])})}}(i,s,function(t,e){if(u[t]){var i=u[t];Object.keys(e).filter(function(t){return!!l[t]}).forEach(function(t){var n=i._internal,r=e[t];n[t]||(n[t]=r),n[f(t)]=r})}else{var r=new c.constructor;u[t]=r,Object.keys(l).forEach(function(t){r.with(h(t))}),r._internal={},_(r,{server:o}),n(r),a("connect")(r)}})),s.on("clientDisconnected",function(t){var e=u[t];e&&(a("disconnect")(e),delete u[t])}),c._internal={},_(c,e,s),console.log(c)}}),on:function(t,e){s[t]&&s[t].push(e)}}}},function(t,e,n){(function(e){var n="Expected a function",i=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,h="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,f=h||l||Function("return this")(),p=Object.prototype.toString,m=Math.max,_=Math.min,d=function(){return f.Date.now()};function y(t,e,i){var r,o,s,a,u,c,h=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function y(e){var n=r,i=o;return r=o=void 0,h=e,a=t.apply(i,n)}function b(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-h>=s}function x(){var t=d();if(b(t))return A(t);u=setTimeout(x,function(t){var n=e-(t-c);return f?_(n,s-(t-h)):n}(t))}function A(t){return u=void 0,p&&r?y(t):(r=o=void 0,a)}function w(){var t=d(),n=b(t);if(r=arguments,o=this,c=t,n){if(void 0===u)return function(t){return h=t,u=setTimeout(x,e),l?y(t):a}(c);if(f)return u=setTimeout(x,e),y(c)}return void 0===u&&(u=setTimeout(x,e)),a}return e=g(e)||0,v(i)&&(l=!!i.leading,s=(f="maxWait"in i)?m(g(i.maxWait)||0,e):s,p="trailing"in i?!!i.trailing:p),w.cancel=function(){void 0!==u&&clearTimeout(u),h=0,r=c=o=u=void 0},w.flush=function(){return void 0===u?a:A(d())},w}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return i;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?i:+t}t.exports=function(t,e,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return v(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),y(t,e,{leading:r,maxWait:e,trailing:o})}}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(157);e.default=function(){return new i.Background}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(20));e.Background=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Entity),i(e,[{key:"render",value:function(t){return t.background(230)}}]),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(20),o=n(159),s=n(77);e.default=function(t){var e=t.p5,n=t.onEvent,a=t.render,u=t.trigger,c={},h=function(t,e){return t+":"+e},l=function(){return 4===Object.keys(c).length},f=function(){u(s.Events.ControlPointsAdded,[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Object.values(c))))},p=function(){var t=e.mouseX,n=e.mouseY;return Object.keys(c).find(function(r){var o=function(t){return t.split(":")}(r),s=i(o,2),a=s[0],u=s[1],c=parseFloat(a),h=parseFloat(u);return e.dist(c,h,t,n)<6})},m=null;n(r.MouseEvents.mousePressed,function(){var t=p();t&&(m=t)}),n(r.MouseEvents.mouseReleased,function(){var t=e.mouseX,n=e.mouseY;if(!m){if(p())return;if(l())return;var i=new o.ControlPoint({x:t,y:n},12);return c[h(t,n)]=i,a(i),void(l()&&f())}var r=c[m];delete c[m],c[h(t,n)]=r,m=null}),n(r.MouseEvents.mouseDragged,function(){var t=e.mouseX,n=e.mouseY;m&&(c[m].update(t,n),l()&&f())})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlPoint=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(20));(e.ControlPoint=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.id=e.id++,i.point=t,i.radius=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Entity),r(e,[{key:"update",value:function(t,e){this.point={x:t,y:e}}},{key:"getPos",value:function(){return i({},this.point)}},{key:"render",value:function(t){var e=this.point,n=e.x,i=e.y;t.fill(0,100),1!==this.id&&2!==this.id||t.fill(0,200),t.noStroke(),t.ellipse(n,i,this.radius,this.radius)}}]),e}()).id=0},function(t,e,n){"use strict";t.exports=function(t){var e,n={};if(!(t instanceof Object)||Array.isArray(t))throw new Error("keyMirror(...): Argument must be an object.");for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(162),r=n(77);e.default=function(t){var e=t.accept,n=new i.BezierCurve;return e(r.Events.ControlPointsAdded,function(t){var e=t.sort(function(t,e){return t.id-e.id}).reduce(function(t,e){var n=e.getPos(),i=n.x,r=n.y;return[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t),[i,r])},[]);n.update(e)}),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BezierCurve=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(20));e.BezierCurve=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Entity),i(e,[{key:"initizalize",value:function(){this.controlPoints=[]}},{key:"update",value:function(t){this.controlPoints=t}},{key:"render",value:function(t){t.noFill(),t.stroke(255,0,0),t.strokeWeight(2),this.controlPoints&&t.bezier.apply(t,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.controlPoints))}}]),e}()},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAAA5CAMAAAAfgAkhAAAAY1BMVEVHcEzEHhrEHhozMzMzMzMzMzMzMzPEHhrEHhrEHhozMzMzMzMzMzPEHhozMzMzMzPEHhozMzMzMzMzMzMzMzPEHhrEHhrEHhrEHhrEHhozMzMzMzPEHhrEHhrEHhrEHhozMzN9pqZ3AAAAH3RSTlMA8DAwwIBAQMCA8BCgENBgYOAgsFDg0CCwoHCQcJBQKEyXBQAABrFJREFUaN7tmtl6qyoUgFFBxTGOUaOJ7/+UB1jMmjZNur9zUy4aJ+BnzWIR+qLh5hah91q873vMD1rSxzH6Nw2zSXBtztu4/b5T1BWtxccP9o8o4nghfKgojmH+tiakzyUfI5Qy7Ct2UtkCbVmP3Jz2hN1s2UMNYEWKr/mIjzNU7Ldhvx37vQmqrFZ8eyYmKuwTaBk77xHKpVgJI6kJyCtWUuMH+BO8Vkybwy9WeKzVCmnP2PyLuty4+ieCiw8gHq9jWK3DV6C8JvEHlsxhFuCLFcee5Xxiwcgm4LKqSCMeVa0DPq53bmxY/NQNjlDERyM3bhr8gEhJv89XiMnYmvkkVd/zs4XzoVpg878LaLnTXYm4lYuOBNRtBLtL6v1E8D/ny2CWvRXHSEzaCT6hNq51prWcc2e6K6D3omMnSBpwN81HLL49+oBvJ/AjnFJ6TQZ8RIq1WOS0ud01kwbboMjYh+Ljwcnwkbf4+PIbZ40xIUusmMGvjcaaotZ8QuZgfow6FgiiY70U2msNX/EWH4cA26uEwUQGll+OsBCO4Mu6uj2EJi42bnnxAr6zK6HbfF33dpghSrkV+F9nFozNytlVyHVRT4wD8xXdZH9CtD9gn68Won6fTyjlBnxcXDk4o+Zr+VNCPTcnUGCQesdl2GFwXwCJbb4OlvIBH9dpj8VKd4gkWMU+SCU9KC/KbP9FREVyKf7G5uOwHekzcAz8ER9Xag7poAMvaLRPQ8ptlAXYbghJJdMBD2u+XPgaC0A81nzEh52oSlBeafvrRZAxbg64+TG2K0ES4CtgPdUtA63cfpOPoRQSMWZ0uR2M/QImUkkiVoqGfKarDCZbCYbfjS+3xueDy7ggUZ3bhcTS4a4+1j6NiXIxlBt8kDaT1Q5mcjTYn7SaFLj+aacoFgJdlhjyTq4qwpYQ0qO/9tf+2l/73VYmCWVtTU7uXdmNOb38f3BbGjx0m0v/diKu01dH48uhdEuhDaxr8iHfw2mj5grf4ksefgt/le8BmkzYygcx8l1cXd/nQ7/LN5lZgis7pOIw+Sd8zO6T64mNsMvlM76UX0ulNf4aXyjMpbzM4+OxSbh1kBJxnO+6gTsEc2LxDROlqZGfxfpDvvLIB/43o2SyJIDCwTJ6Y6MXy1mnUrNw+78YS5N9N80XvmsujA9mnFNHQ2FgPxOo8S+us5YWn+whmFff/n5qzmOqG0o94OCAp8PGxXt0UwOmqocMJLNelNTvndKJvs5n20N6YpGHa8IGy8C/fFV8Uu+j8puQXkqUUJoOnuv8At/1ICc59ny4TF2DCVw7oydjvMZnu6Q160Ah7KtFT3SyJHVVFDMdVQeHz8P7mq+/weZJtHQY44L0kcVHIagk9GqNMiip3i2lhhJlRWizKO6Byj62lapgGSYrndIgOBq2epPu5MZEhL39JImi7CIxfNp2lEQhKUmjm7RUQzuQrq5+5QrlStKnqaCSr89RZrZ/+rP4YvEZmwwcdchkhcKHk+qpxD5Lv9TjC9KJ0kvi7UR0yN6dkvsowzO+waQIuHB3HegqnUZJGeQ6nNYHVJkvvc+nntHKN2nYA2hRuzTFqbcavsnLgcZaINom1HsMXOcQ8O/GgKlCPXpuBfuGlmLbZ3yXh1eirZ63Ae86eY/JzOXzBaU2zuQ53203u49V+yzajWloWbo7sc8n87/PBzfnJLmoODW/whcDn9zlKVqPb0wOJU3iTWz0u9l8Rr+jxUft7OcMeT/ny6UD66312OFL0bd85sJg8wWl60UW36ptxhoy8SKf/bGM8ZntveKnfKl7ek9dO5WnpbpY0ofPF+rRYUX+Pp/49EMy53vEC3yJE8uU1kLqJLFZ5QTg09WsEFZi4nGpsiM3iMG8aGK9g57XRWY+OL3Ap2rY4G4pbdBZj1erpXEGuBs4NYPFh/RSE8e9YH84AsfIC/3ZePqeD406I5t3W2qV3mNqxSc/vszI5UvlfOUooyPR/osRlvvJveajz/iskuZYXgm3OJZXfJyTktXh22QqGaWiifAE2HoXX7dJi6JKWeNzPvpVSSiywrE8Da4eX5pYQ6ZOMSTrcPHZjoDX9sVutfh1vnI8fev2q37hKkc6lw/ZnS65+Zy2V7mNd0Nf883Oa97mcKhS4epmn9AuiIbt6g2ZHqrUWf/fAGymR7fG/5pIhdlvFkuYpulM6cV7CV8Vy7hamz7hpkSrXosBZQ39wtlMMjq22ct410C93PYEY3x7698B+EbByZtr6GwrDBM9vH1fnV7lOjERbBe5zHxh1lct+dmM/wHjU49N5wKmqQAAAABJRU5ErkJggg=="},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(165);e.default=function(){return new i.MadeWith}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MadeWith=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(20));e.MadeWith=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Entity),i(e,[{key:"render",value:function(t,e){var n=e.img,i=t.height-n.height-5;t.translate(5,i),t.image(n,0,0)}}]),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(167);e.default=function(){return new i.InfoText}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InfoText=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(20));e.InfoText=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Entity),i(e,[{key:"render",value:function(t){t.textAlign(t.TOP),t.text("Click to set control points; Drag to change the curve;",20,20)}}]),e}()}]);